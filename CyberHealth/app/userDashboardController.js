var userApp=angular.module("userApp",["ngRoute","oc.lazyLoad","ngCookies","requestModule","flash","ngAnimate","ngTouch","ngPercentDisplay","userDashboardServiceModule","angular-svg-round-progress","ui.bootstrap","angular-nicescroll"]);userApp.controller("UserDashboardController",function(a,b,c,d,e,f,g,h,j,k,l,m,n){a.foodSearchResult=[],a.userFood={},a.userFood.sessionid=1,a.graphSessionId="1",a.servings=0,a.current=a.caloriesIntake=0,a.max=a.gainGraphMax=100,a.exerciseSearchResult=[],a.userExercise={},a.caloriesSpent=0,a.workoutvalue=0,b.singlePicker=!1,b.minimumDate=new Date,a.weightUpdateText="Update Weight",a.graphs=1,a.historyReport=0,a.historyType=1,a.showExercise=0,n.current.$$route.fromGoal&&$("#updateWeightGoal").click(),a.doUserAddFood=function(){$(function(){$("#lean_overlay").fadeTo(1e3),$("#modal-add-food").fadeIn(600),$(".user_register").show()}),$(".modal_close").click(function(){$(".user_register").hide(),$("#modal-add-food").hide(),$("#lean_overlay").hide(),a.resetdata()}),$("#lean_overlay").click(function(){$(".user_register").hide(),$("#modal-add-food").hide(),$("#lean_overlay").hide(),a.resetdata()}),a.selectedFood=""},a.doUserAddExercise=function(){$(function(){$("#lean_overlay").fadeTo(1e3),$("#modal-add-exercise").fadeIn(600),$(".user_register").show()}),$(".modal_close").click(function(){$(".user_register").hide(),$("#modal-add-exercise").hide(),$("#lean_overlay").hide(),a.resetexercisedata()}),$("#lean_overlay").click(function(){$(".user_register").hide(),$("#modal-add-exercise").hide(),$("#lean_overlay").hide(),a.resetexercisedata()}),a.selectedExercise=""},a.frequentFood=function(b){a.isNew=!0,a.title="Add Food",a.loaded=!0;var c=e.doGetSelectedFoodDetails(b);c.then(function(b){a.userSelectedFoodDetails=b,a.loaded=!1,a.doUserAddFood()})},a.suggestedFoodByAdmin=function(b){a.isNew=!0,a.title="Add Food",a.loaded=!0;var c=e.doGetSelectedFoodDetails(b);c.then(function(b){a.userSelectedFoodDetails=b,a.loaded=!1,a.doUserAddFood()})},a.foodSelected=function(){a.isNew=!0,a.title="Add Food";var b=e.doGetSelectedFoodDetails(a.selectedFood.foodid);b.then(function(b){a.userSelectedFoodDetails=b,a.doUserAddFood()})};var o="",p="";a.doEditUserFood=function(b,c){a.isNew=!1,a.title="Edit Food",a.loaded=!0;var d=e.doGetSelectedFoodDetails(b);d.then(function(b){a.userSelectedFoodDetails=b;var d=e.doGetUserFoodDetails(c);d.then(function(b){a.userFood.userfoodid=b.userfoodid,a.userFood.foodid=b.foodid,$.each(a.userSelectedFoodDetails.measureid,function(c,d){d.measureid==b.measureid.measureid&&(a.userFood.measure=d,o=angular.copy(d))}),a.userFood.servings=parseFloat(b.measureid.servings),p=angular.copy(b.measureid.servings),a.current=a.caloriesIntake=b.measureid.calories,a.current=a.current.toFixed(2),a.current.length-3>2?a.max=100+100*String(0|a.current).slice(0,-2):a.max=100,a.loaded=!1,a.doUserAddFood()})})},a.isCleanFood=function(){return angular.equals(o,a.userFood.measure)&&angular.equals(p,a.userFood.servings)},a.doCalculateCalories=function(){0==a.userFood.servings&&(a.current=a.caloriesIntake=0),!a.userFood.servings>0?a.current=a.caloriesIntake=0:(a.current=a.caloriesIntake=a.userFood.measure.calories*a.userFood.servings,a.current=a.current.toFixed(2),a.current.length-3>2?a.max=100+100*String(0|a.current).slice(0,-2):a.max=100)},a.doInsertUserFood=function(){a.userFood.foodid=a.userSelectedFoodDetails.foodid,a.userFood.measureid=a.userFood.measure.measureid,a.userFood.addeddate=document.getElementById("main-start-date").value,a.userFood.servings=parseFloat(a.userFood.servings);var b=e.doInsertUserFood(a.userFood);b.then(function(){a.loadFoodDiary(a.userFood.addeddate),a.doGetIntakeBruntByDate(a.userFood.addeddate),a.goGetDailyIntakeGraph(a.userFood.addeddate),a.goGetSessionGraph(a.storedSessionId),a.doGetHistoryReport(),a.getBudget(a.userFood.addeddate)})},a.doUpdateUserFood=function(){a.userFood.userfoodid=a.userFood.userfoodid,a.userFood.foodid=a.userFood.foodid,a.userFood.measureid=a.userFood.measure.measureid,a.userFood.servings=parseFloat(a.userFood.servings);var b=e.doUpdateUserFood(a.userFood);b.then(function(){var b=document.getElementById("main-start-date").value;a.loadFoodDiary(b),a.doGetIntakeBruntByDate(b),a.goGetDailyIntakeGraph(b),a.goGetSessionGraph(a.storedSessionId),a.doGetHistoryReport(),a.getBudget(b)})},a.doDeleteUserFood=function(b){a.loaded=!0;var c=e.doDeleteUserFood(b);c.then(function(){var b=document.getElementById("main-start-date").value;a.loadFoodDiary(b),a.doGetIntakeBruntByDate(b),a.goGetDailyIntakeGraph(b),a.goGetSessionGraph(a.storedSessionId),a.doGetHistoryReport(),a.getBudget(b)})},a.loadFoodDiary=function(b){a.loaded=!0;var c=e.getFoodDiary(b);c.then(function(b){a.userFoodDiaryDataAll=b,a.loadSessionDetails(),a.loadSessionFood(),a.loaded=!1})},a.loadSessionDetails=function(){switch(a.suggest={},a.suggest.session=a.userFood.sessionid,c.postRequest("user/getUserFoodSuggestions/",a.suggest).then(function(b){a.adminSuggestedFood={},a.adminSuggestedFood="",a.adminSuggestedFood=b.data.foodSuggestion,document.getElementById("marquee").innerHTML="<marquee class='feedbackslide' behavior='scroll' direction='left' id='marqueeid' onmouseover='mouseover(this);' onmouseout='mouseout(this);' scrollamount='3'><span ng-repeat='suggestedFood in adminSuggestedFood' class='slideFeedback'><a href='' ng-click='suggestedFoodByAdmin(suggestedFood.foodId)'>{{suggestedFood.foodName}}</a></span></marquee>",k(document.getElementById("marquee"))(a)}),parseInt(a.userFood.sessionid)){case 1:a.userFoodDiaryData=a.userFoodDiaryDataAll.BreakFast;break;case 2:a.userFoodDiaryData=a.userFoodDiaryDataAll.Brunch;break;case 3:a.userFoodDiaryData=a.userFoodDiaryDataAll.Lunch;break;case 4:a.userFoodDiaryData=a.userFoodDiaryDataAll.Evening;break;case 5:a.userFoodDiaryData=a.userFoodDiaryDataAll.Dinner}},a.inputChanged=function(b){if(b.length>=3){a.loadingFoods=!0,0==a.foodSearchResult.length&&(a.loadingFoods=!0);var c=e.searchFood(b,a.userFood.sessionid);return c.then(function(b){return a.foodSearchResult=b,a.loadingFoods=!1,a.foodSearchResult})}return $(".dropdown-menu").animate({scrollTop:0},0),{}},a.doGetDemograph=function(){var c=e.doGetDemographyDetails();c.then(function(c){if(a.demography=c,a.userProfile){var d=2;1==a.userProfile.gender&&(d=4),1==a.userProfile.unitPreference?(a.heightCal=a.demography.height/100,a.heightCal=a.heightCal*a.heightCal,a.idealWeight=22*a.heightCal,a.idealWeight=a.idealWeight.toFixed(1),a.demography.weight<a.idealWeight?(a.upweight=1,a.idealWeightlevel=a.demography.weight/a.idealWeight,a.idealWeightlevel=100*a.idealWeightlevel/2,a.balanceweight=a.idealWeight-a.demography.weight,a.balanceweight=a.balanceweight.toFixed(1)):a.demography.weight>a.idealWeight?(a.upweight=0,a.idealWeightlevel=a.idealWeight/a.demography.weight,a.idealWeightlevel=100-100*a.idealWeightlevel/2,a.balanceweight=a.demography.weight-a.idealWeight,a.balanceweight=a.balanceweight.toFixed(1)):(a.upweight=2,a.idealWeightlevel=1,a.idealWeightlevel=100*a.idealWeightlevel/2)):2==a.userProfile.unitPreference&&(a.heightFeet=a.demography.height.toString().split(".")[0],a.heightInches=a.demography.height.toString().split(".")[1],a.heightTotal=12*parseInt(a.heightFeet)+parseInt(a.heightInches),a.heightTotal=2.54*a.heightTotal,a.heightCal=a.heightTotal/100,a.heightCal=a.heightCal*a.heightCal,a.idealWeight=22*a.heightCal,a.idealWeight=a.idealWeight/.4536,a.idealWeight=a.idealWeight.toFixed(1),a.idealWeight=parseFloat(a.idealWeight),a.weightCal=.4536*a.demography.weight,a.weightCal=a.demography.weight.toFixed(2),a.weightCal=parseFloat(a.weightCal),a.weightCal<a.idealWeight?(a.upweight=1,a.idealWeightlevel=a.weightCal/a.idealWeight,a.idealWeightlevel=100*a.idealWeightlevel/2,a.balanceweight=a.idealWeight-a.weightCal,a.balanceweight=a.balanceweight.toFixed(1)):a.weightCal>a.idealWeight?(a.upweight=0,a.idealWeightlevel=a.idealWeight/a.weightCal,a.idealWeightlevel=100-100*a.idealWeightlevel/2,a.balanceweight=a.weightCal-a.idealWeight,a.balanceweight=a.balanceweight.toFixed(1)):(a.upweight=2,a.idealWeightlevel=1,a.idealWeightlevel=100*a.idealWeightlevel/2)),b.idealWeightlevel=a.idealWeightlevel.toFixed(2),a.graph={status:"goal"},setTimeout(viewWeightGraph(),10)}else{var f=e.doGetUserDetails();f.then(function(c){a.userProfile=c,a.userProfileImage=a.userProfile.imageurl+"?decache="+Math.random();var d=2;1==a.userProfile.gender&&(d=4),a.idealWeight=a.demography.height-100-(a.demography.height-150)/d,a.idealWeight=a.idealWeight.toFixed(2),a.demography.weight<a.idealWeight?(a.upweight=1,a.idealWeightlevel=a.demography.weight/a.idealWeight,a.idealWeightlevel=100*a.idealWeightlevel/2,a.balanceweight=a.idealWeight-a.demography.weight,a.balanceweight=a.balanceweight.toFixed(2)):a.demography.weight>a.idealWeight?(a.upweight=0,a.idealWeightlevel=a.idealWeight/a.demography.weight,a.idealWeightlevel=100-100*a.idealWeightlevel/2,a.balanceweight=a.demography.weight-a.idealWeight,a.balanceweight=a.balanceweight.toFixed(2)):(a.upweight=2,a.idealWeightlevel=1,a.idealWeightlevel=100*a.idealWeightlevel/2),b.idealWeightlevel=a.idealWeightlevel.toFixed(2),a.graph={status:"goal"},setTimeout(viewWeightGraph(),10)})}})},a.doGetDemograph();var q=e.doGetFrequentlyAdded();q.then(function(b){a.frequentFoodList=b}),a.isAddFood=!1,a.doAddSuggestFood=function(){c.postRequest("user/searchFoodnamebyUser/",{foodname:a.foodSuggest.foodname}).then(function(b){if(0==b.data.Response_status){var c=e.doAddSuggestedFood(a.foodSuggest);c.then(function(b){a.isAddFood=!0,a.resetdata()},function(){errorMessage(d,"Please try again later!")})}else 1==b.data.Response_status&&(errorMessage(d,"Food&nbsp;already&nbsp;exists"),a.resetdata())})},a.msg=function(){a.isAddFood=!1,a.isAddExercise=!1},a.isAddExercise=!1,a.doAddSuggestExercise=function(){var b=e.doAddSuggestedExercise(a.exerciseSuggest);b.then(function(b){a.isAddExercise=!0,a.resetexercisedata()},function(){errorMessage(d,"Please try again later!")})},a.inputChangedExercise=function(b){if(b.length>=3){a.loadingExercise=!0,0==a.exerciseSearchResult.length&&(a.loadingExercise=!0);var c=e.searchExercise(b);return c.then(function(b){return a.exerciseSearchResult=b,a.loadingExercise=!1,a.exerciseSearchResult})}},a.frequentExercise=function(b){a.isNew=!0,a.title="Add Exercise",a.loaded=!0;var c=e.doGetSelectedExerciseDetails(b);c.then(function(b){a.userSelectedExerciseDetails=b,a.loaded=!1,a.doUserAddExercise()})},a.suggestedExerciseByAdmin=function(b){a.isNew=!0,a.title="Add Exercise",a.loaded=!0;var c=e.doGetSelectedExerciseDetails(b);c.then(function(b){a.userSelectedExerciseDetails=b,a.loaded=!1,a.doUserAddExercise()})},a.exerciseSelected=function(){a.isNew=!0,a.title="Add Exercise";var b=e.doGetSelectedExerciseDetails(a.selectedExercise.exerciseid);b.then(function(b){a.userSelectedExerciseDetails=b,a.doUserAddExercise()})},a.loadExerciseDiary=function(b){a.loaded=!0;var d=e.getExerciseDiary(b);d.then(function(b){a.userExerciseDiaryDataAll=b,a.loaded=!1}),c.getRequest("user/getUserExerciseSuggestions/","").then(function(b){a.adminSuggestedExercise=b.data.exerciseSuggestion})},a.doInsertUserExercise=function(){a.userExercise.exerciseid=a.userSelectedExerciseDetails.exerciseid,a.userExercise.date=document.getElementById("main-start-date").value,a.userExercise.workoutvalue=parseInt(a.userExercise.workoutvalue);var b=e.doInsertUserExercise(a.userExercise);b.then(function(){a.loadExerciseDiary(a.userExercise.date),a.doGetIntakeBruntByDate(a.userExercise.date),a.doGetHistoryReport(),a.getBudget(a.userExercise.date)})},a.doDeleteUserExercise=function(b){a.loaded=!0;var c=e.doDeleteUserExercise(b);c.then(function(){var b=document.getElementById("main-start-date").value;a.loadExerciseDiary(b),a.doGetIntakeBruntByDate(b),a.doGetHistoryReport(),a.getBudget(b)})};var r="",s="";a.doEditUserExercise=function(b,c){a.isNew=!1,a.title="Edit Exercise",a.loaded=!0;var d=e.doGetSelectedExerciseDetails(b);d.then(function(d){a.userSelectedExerciseDetails=d;var f=e.doGetUserExerciseDetails(c);f.then(function(d){a.userExercise.userexercisemapid=c,a.userExercise.exerciseid=b,a.userExercise.workoutvalue=parseInt(d.workoutvalue),s=parseInt(d.workoutvalue),a.current=a.caloriesSpent=d.calories,a.current=a.current.toFixed(2),a.current.length-3>2?a.max=100+100*String(0|a.current).slice(0,-2):a.max=100,a.loaded=!1,a.doUserAddExercise()})})},a.isCleanExercise=function(){return angular.equals(r,a.userExercise.levelid)&&angular.equals(s,a.userExercise.workoutvalue)},a.doUpdateUserExercise=function(){null!=a.userExercise.date&&delete a.userExercise.date,a.userExercise.userexercisemapid=a.userExercise.userexercisemapid,a.userExercise.exerciseid=a.userExercise.exerciseid,a.userExercise.levelid=a.userExercise.levelid.levelid,a.userExercise.workoutvalue=parseInt(a.userExercise.workoutvalue);var b=e.doUpdateUserExercise(a.userExercise);b.then(function(){var b=document.getElementById("main-start-date").value;a.loadExerciseDiary(b),a.doGetIntakeBruntByDate(b),a.doGetHistoryReport(),a.getBudget(b)})};var t=e.doGetFrequentlyUsedExercise();t.then(function(b){a.frequentExerciseList=b}),a.doCalculateCaloriesExercise=function(){0==a.userExercise.workoutvalue&&(a.current=a.caloriesSpent=0),!a.userExercise.workoutvalue>0?a.current=a.caloriesSpent=0:(a.current=a.caloriesSpent=a.userSelectedExerciseDetails.MET*a.demography.weight*(a.userExercise.workoutvalue/60),a.current=a.current.toFixed(2),a.current.length-3>2?a.max=a.max+100*String(0|a.current).slice(0,-2):a.max=100)},a.resetdata=function(){a.foodSuggest={},a.foodSuggestForm.$setPristine(),a.userFood.measure="",a.userFood.servings=[],a.FoodAddForm.$setPristine(),a.current=a.caloriesIntake=0,a.max=100,a.userSelectedFoodDetails={}},a.resetexercisedata=function(){a.exerciseSuggest={},a.exerciseSuggestForm.$setPristine(),a.userExercise.levelid="",a.userExercise.workoutvalue="",a.ExerciseAddForm.$setPristine(),a.current=a.caloriesSpent=0,a.max=100,a.userSelectedExerciseDetails={}},a.goal={status:"set-goal"},a.graph={status:"goal"},a.viewGoal=function(){a.doGetWeightGoal(),a.graph={status:"goal"},a.doGetDemograph(),setTimeout(viewWeightGraph(),10)},a.cancelUpdate=function(){a.goal={status:"view-goal"}},a.doGetWeightGoal=function(){a.weightGraph=!0,c.getRequest("getUserId/","").then(function(b){a.userProfile=b.data.User_Profile,a.demographydetail=b.data.demography,a.preferMetric=a.userProfile.unitPreference,a.plantype=a.demographydetail.userPlanType}),c.getRequest("user/getDemography/","").then(function(b){a.demographydata=b.data.Demography_Data,a.weight=a.demographydata.targetweight,a.currentwt=a.demographydata.weight}),c.postRequest("checkGoalStatus/",{date:u}).then(function(b){a.goalPossibilitycheck=b.data.Response_status}),c.getRequest("user/getWeightGoal/","").then(function(c){if(0==c.data.Response_status)a.updateGoal=0,b.singlePicker=!0,b.minimumDate=new Date,a.goal={status:"set-goal"};else if(1==c.data.Response_status)if(a.goalDetails=c.data.Weight_Goal,null==a.goalDetails.goalid)a.updateGoal=0,a.targetText="Period",b.singlePicker=!0,b.minimumDate=new Date;else{a.updateGoal=1;var d,f=a.goalDetails.startdate.slice(6,10)+"-"+a.goalDetails.startdate.slice(3,5)+"-"+a.goalDetails.startdate.slice(0,2),g=u.slice(6,10)+"-"+u.slice(3,5)+"-"+u.slice(0,2),h=a.goalDetails.enddate.slice(6,10)+"-"+a.goalDetails.enddate.slice(3,5)+"-"+a.goalDetails.enddate.slice(0,2);new Date(f).getTime()>new Date(g).getTime()?(d=new Date(f).getTime(),a.viewGraphButton=!1):(d=new Date(g).getTime(),a.viewGraphButton=!0);var i=864e5,j=new Date(h).getTime(),k=j-d;if(a.remainingDates=Math.round(k/i),a.remainingDates<0){a.remainingDates=0,a.goalExpired=1;var l=new Date(f).getTime(),m=j-l;a.targetDays=Math.round(m/i);var n=e.doGetAchievedWeight(a.goalDetails.enddate);n.then(function(b){a.achievedWeight=b;var c=0,d=0,e=0;a.goalDetails.targetweight>a.goalDetails.initialweight?(c=a.goalDetails.targetweight-a.goalDetails.initialweight,d=a.achievedWeight-a.goalDetails.initialweight,d<=0?a.achieveStatus=0:(e=d/c,1==e?a.achieveStatus=2:.6>=e<1&&e<1.4?a.achieveStatus=1:a.achieveStatus=0)):(c=a.goalDetails.initialweight-a.goalDetails.targetweight,d=a.goalDetails.initialweight-a.achievedWeight,d<=0?a.achieveStatus=0:(e=d/c,1==e?a.achieveStatus=2:.6>=e<1&&e<1.4?a.achieveStatus=1:a.achieveStatus=0))})}else a.goalExpired=0;b.currentweight=a.demography.weight,b.targetweight=a.goalDetails.targetweight,a.goal={status:"view-goal"}}})},a.setGoal=function(){a.setGoalDetails={},5==a.setGoalDetails.goalchoice&&(""==a.setGoalDetails.enddate?a.setGoalDetails.enddate=u:a.setGoalDetails.enddate=document.getElementById("start").value),a.setGoalDetails.enddate=a.enddate,a.setGoalDetails.currentweight=a.demography.weight,a.setGoalDetails.goalchoice=a.goalchoice,""!=a.demography.weight&&($(function(){$("#lean_overlay").fadeTo(1e3),$("#goal-confirmation").fadeIn(600),$(".common_model").show()}),$(".modal_close").click(function(){$(".common_model").hide(),$("#goal-confirmation").hide(),$("#lean_overlay").hide()}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#goal-confirmation").hide(),$("#lean_overlay").hide()}))},a.setGoalConfirmation=function(){c.postRequest("user/insertWeightGoal/",a.setGoalDetails).then(function(b){a.doGetWeightGoal(),a.doInsertOrUpdateWeightLog(u,parseFloat(a.setGoalDetails.initialweight))},function(){errorMessage(d,"Please try again later!")})},a.doGetWeightLog=function(b,c){var d=e.doGetWeightLogDetails(b);d.then(function(b){var d=b.Weight_logs;d.weight?(a.weightlog=a.originalWeight=d.weight,1==c?$("#weightLog").val(d.weight):$("#weightLog1").val(d.weight)):(a.originalWeight="",1==c?$("#weightLog").val(""):$("#weightLog1").val(""))})},a.weightLogEntry=function(b){a.weightUpdateText="Updating...",a.spinner=!0,1==b?a.doInsertOrUpdateWeightLog(a.UserDate,parseFloat($("#weightLog").val())):a.doInsertOrUpdateWeightLog($("#weight-log-date1").val(),parseFloat($("#weightLog1").val()))},a.checkGoalOnLoad=function(b){c.postRequest("checkGoalStatus/",{date:b}).then(function(b){a.budgetCheck=b.data.goalPossiblity})},a.checkGoalStatus=function(b){c.postRequest("checkGoalStatus/",{date:b}).then(function(b){a.budgetCheck=b.data.goalPossiblity,0==a.budgetCheck&&($(function(){$("#lean_overlay").fadeTo(1e3),$("#budgetAlert").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),$(".modal_close").click(function(){$(".common_model").hide(),$("#budgetAlert").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#budgetAlert").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}))})},a.budgetChangePlan=function(){j(function(){$("#updateWeightGoal").click(),a.updateGoalDetails(a.weight)})},a.doInsertOrUpdateWeightLog=function(e,f){c.postRequest("user/weightlogInsertorUpdate/",{date:e,weight:f}).then(function(c){e==u&&a.weightGraph&&(b.currentweight=f,refreshGraph()),a.spinner=!1,a.weightUpdateText="Update Weight",a.doGetWeightLog(e),a.doGetDemograph(),a.getBudget(e),a.doGetWeightGoal(),a.checkGoalStatus(e)},function(){errorMessage(d,"Please try again later!")})},a.isCleanWeight=function(){return angular.equals(parseFloat($("#weightLog").val()),parseFloat(a.originalWeight))},a.isCleanWeight1=function(){return angular.equals(parseFloat($("#weightLog1").val()),parseFloat(a.originalWeight))},a.doGetWeightLogGraph=function(){a.graph={status:"goal-graph"};var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.postRequest("user/getWeightLogGraph/",{startdate:a.goalDetails.startdate.toString(),enddate:a.goalDetails.enddate.toString()}).then(function(c){a.weightlogGraph=c.data.Weight_logs;var d=[],e=[];$.each(a.weightlogGraph,function(a,c){if(1==c.userentry){var f=[],g=c.date.split("/");f.push(b[g[1]-1]+" "+g[0]),f.push(c.weight),e.push(b[g[1]-1]+" "+g[0]),d.push(f)}}),a.weightGraphValue=d,a.weightGraph=h(a.weightGraphValue,30),console.log(a.weightGraph),a.dateRange=e,console.log(a.dateRange)},function(){errorMessage(d,"Please try again later!")})},a.deteteGoal=function(){$(function(){$("#lean_overlay").fadeTo(1e3),$("#goal-delete-confirmation").fadeIn(600),$("#goal-delete-confirmation").fadeIn(600),$(".common_model").show()}),$(".modal_close").click(function(){$(".common_model").hide(),$("#goal-delete-confirmation").hide(),$("#lean_overlay").hide()}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#goal-delete-confirmation").hide(),$("#lean_overlay").hide()})},a.doAddWeightPopup=function(b){a.choice=b,a.updateWeightForm.$setPristine(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#updateWeight").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),$(".modal_close").click(function(){$(".common_model").hide(),$("#updateWeight").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#updateWeight").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},a.docheckGoalEndDate=function(b){a.goalchoice=parseInt(b),5==b?a.goalPossiblityStatus=1:c.postRequest("checkgoalenddate/",{currentweight:a.demography.weight,goalchoice:a.goalchoice}).then(function(b){a.goalPossiblityStatus=b.data.Response_status,a.customResponse=1,1==b.data.Response_status&&(a.enddate=b.data.goalEndDate)})},a.doCheckPossibleDate=function(b){c.postRequest("/user/getWeightLogGraph/",{startdate:a.UserDate,enddate:a.UserDate}).then(function(c){a.UserWeightEntry=c.data.Weight_logs[0].userentry,0==a.UserWeightEntry?a.doAddWeightPopup(b):a.docheckGoalEndDate(b)})},a.updateWeightLogAndEndDate=function(b){a.updateWeightLog(),a.docheckGoalEndDate(b)},a.updateWeightLog=function(){a.weightlog=parseFloat(a.weightlog),c.postRequest("user/weightlogInsertorUpdate/",{date:a.UserDate,weight:a.weightlog}).then(function(a){},function(){errorMessage(d,"Please try again later!")})},a.doDeleteGoal=function(){c.postRequest("user/deleteWeightGoal/",{date:u,currentweight:a.demography.weight}).then(function(c){a.updateGoal=0,b.goalStartDate=b.goalEndDate=u,b.minimumDate=new Date,a.targetText="Period",b.singlePicker=!0,a.goal={status:"set-goal"}},function(){errorMessage(d,"Please try again later!")})},a.updateGoalDetails=function(c){a.weightGraph=!1,a.goalPossiblityStatus=0,a.targetText="End Date",b.singlePicker=!0,a.originalUpdateGoalWeight={endDate:a.goalDetails.enddate,weight:a.goalDetails.targetweights};var d=a.goalDetails.startdate.slice(6,10)+","+a.goalDetails.startdate.slice(3,5)+","+a.goalDetails.startdate.slice(0,2),e=u.slice(6,10)+","+u.slice(3,5)+","+u.slice(0,2);3==a.goalDetails.planType&&(b.goalStartDate=a.goalDetails.enddate),5==a.goalDetails.planchoice&&(b.goalStartDate=a.goalDetails.startdate,a.goalDetails.enddate!=u?b.goalEndDate=a.goalDetails.enddate:b.goalEndDate=new Date),a.weight=a.goalDetails.targetweight,a.currentEnddate=a.goalDetails.enddate,2==a.goalDetails.planType&&(a.goalchoice=a.goalDetails.planchoice.toString()),a.currentweight=c,new Date(d).getTime()>=new Date(e).getTime()?b.minimumDate=a.goalDetails.startdate:b.minimumDate=new Date,a.goal={status:"set-goal"}},a.setGoalTypeOptions=function(b){var c;2==a.demography.userPlanType?c="Gain":3==a.demography.userPlanType&&(c="Lose"),1==a.userProfile.unitPreference?a.goalTypeOptions=[{value:1,name:c+" 1/4 kg per week"},{value:2,name:c+" 1/2 kg per week"},{value:3,name:c+" 3/4 kg per week"},{value:4,name:c+" 1 kg per week"},{value:5,name:"Custom"}]:a.goalTypeOptions=[{value:1,name:c+" 1/2 lb per week"},{value:2,name:c+" 1 lb per week"},{value:3,name:c+" 1 1/2 lbs per week"},{value:4,name:c+" 2 lbs per week"},{value:5,name:"Custom"}],2==b?a.goalType=a.goalTypeOptions[0]:null==a.goalDetails.planchoice?a.goalType=a.goalTypeOptions[0]:a.goalType=a.goalTypeOptions[a.goalDetails.planchoice-1]},a.isCleanUpdateGoal=function(){var b=document.getElementById("end").value;""==b&&(b=a.goalDetails.enddate);var c={endDate:b,weight:parseFloat(document.getElementById("target").value)};return angular.equals(a.originalUpdateGoalWeight,c)},a.changeGoalType=function(b){a.goalType=b},a.updateGoalAlert=function(){$(function(){$("#lean_overlay").fadeTo(1e3),$("#updateGoalAlert").fadeIn(600),$(".common_model").show()}),$(".modal_close").click(function(){$(".common_model").hide(),$("#updateGoalAlert").hide(),$("#lean_overlay").hide()}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#updateGoalAlert").hide(),$("#lean_overlay").hide()})},a.updateGoalCheck=function(){2==a.goalDetails.planType?a.demography.weight<a.demography.targetweight?(a.doWeightGoalUpdate="loss",a.updateGoalAlert()):a.doUpdateGoal():3==a.goalDetails.planType&&(a.demography.weight>a.demography.targetweight?(a.doWeightGoalUpdate="gain",a.updateGoalAlert()):a.doUpdateGoal())},a.highlightPlan=function(){m.planHighlight=!0,l.url("/demography")},a.doUpdateGoal=function(){a.setGoalDetails={},a.setGoalDetails.currentweight=a.demography.weight,2==a.goalDetails.planType?(a.setGoalDetails.goalchoice=parseInt(a.goalchoice),5==a.setGoalDetails.goalchoice&&(""==document.getElementById("start").value?a.setGoalDetails.enddate=a.goalDetails.enddate:a.setGoalDetails.enddate=document.getElementById("start").value)):3==a.goalDetails.planType?(a.setGoalDetails.goalchoice="",""==document.getElementById("start1").value?a.setGoalDetails.enddate=a.goalDetails.enddate:a.setGoalDetails.enddate=document.getElementById("start1").value):a.setGoalDetails.enddate=a.enddate,a.userChosenDate=a.setGoalDetails.enddate,c.postRequest("user/weightgoalInsertorUpdate/",a.setGoalDetails).then(function(b){0==b.data.Response_status?(a.customResponse=b.data.Response_status,a.goalPossiblityStatus=0,a.customPossibleDate=b.data.possibledate,a.setGoalDetails.enddate=a.customPossibleDate,$(function(){$("#lean_overlay").fadeTo(1e3),$("#custom-goal-confirmation").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),$(".modal_close").click(function(){$(".common_model").hide(),$("#custom-goal-confirmation").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#custom-goal-confirmation").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})):(a.doGetWeightGoal(),a.getBudget(u))},function(){errorMessage(d,"Please try again later!")})},a.customGoalClear=function(){a.setGoalDetails.enddate=a.enddate},a.checkCustomGoal=function(){a.setGoalDetails={},a.goalType=a.goalDetails.planType,a.setGoalDetails.currentweight=a.demography.weight,a.setGoalDetails.goalchoice=parseInt(a.goalchoice),2==a.goalType?5==a.setGoalDetails.goalchoice&&0!=a.customResponse?""==document.getElementById("start").value?a.setGoalDetails.enddate=u:a.setGoalDetails.enddate=document.getElementById("start").value:5==a.setGoalDetails.goalchoice&&0==a.customResponse?a.setGoalDetails.enddate=a.customPossibleDate:a.setGoalDetails.enddate=a.enddate:3==a.goalType&&(""==document.getElementById("start1").value?a.setGoalDetails.enddate=u:a.setGoalDetails.enddate=a.customPossibleDate),a.userChosenDate=a.setGoalDetails.enddate,c.postRequest("user/weightgoalInsertorUpdate/",a.setGoalDetails).then(function(b){0==b.data.Response_status?(a.customResponse=b.data.Response_status,a.goalPossiblityStatus=10,a.customPossibleDate=b.data.possibledate,a.setGoalDetails.enddate=a.customPossibleDate):1==b.data.Response_status&&(a.doGetWeightGoal(),a.getBudget(u))},function(){errorMessage(d,"Please try again later!")})},a.doGetIntakeBruntByDate=function(b){c.postRequest("user/getTotalCalorieDetailForDate/",{date:b}).then(function(b){a.calorieGraph=b.data.BudgetDetail,""==a.calorieGraph.Intake&&(a.calorieGraph.Intake=0),""==a.calorieGraph.Burnt?a.calorieGraph.Burnt=0:""!=a.calorieGraph.Burnt&&(a.calorieGraph.Burnt=Math.abs(a.calorieGraph.Burnt)),a.averageIntake=Math.round(a.calorieGraph.averagecalorieintake),a.averageSpent=Math.round(a.calorieGraph.averagecalorieburnt),a.currentGain=a.calorieGraph.Intake,a.currentGain=a.currentGain.toFixed(2),a.currentSpent=a.calorieGraph.Burnt,a.currentSpent=a.currentSpent.toFixed(2);var c,d;d=a.calorieGraph.Intake>a.calorieGraph.Burnt?parseFloat((a.calorieGraph.Intake-a.calorieGraph.Burnt).toFixed(2)):0,c=a.calorieGraph.Intake<a.calorieGraph.Burnt?parseFloat((a.calorieGraph.Burnt-a.calorieGraph.Intake).toFixed(2)):0,a.calorieGraph.Intake==a.calorieGraph.Burnt&&(c=0,d=0),$("#gainVsSpent").highcharts({chart:{type:"column"},xAxis:{categories:["Compare <br/> <small>(calories)</small>"]},yAxis:{allowDecimals:!1,min:0,title:{text:""}},credits:{enabled:!1},exporting:{enabled:!1},legend:{enabled:!1},title:{text:""},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 1)",borderWidth:1,shadow:!0,style:{fontSize:"10px",padding:5,zIndex:1e4},formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>"}},plotOptions:{column:{stacking:"normal"}},series:[{name:"Intake",data:[a.calorieGraph.Intake],color:"limegreen",stack:"male"},{name:"Burnt",data:[a.calorieGraph.Burnt],color:"red",stack:"female"}]})},function(){errorMessage(d,"Please try again later!")})},a.updateAverageGainSpent=function(b){c.postRequest("user/getTotalCalorieDetailForDate/",{date:b}).then(function(b){a.averageIntake=Math.round(b.data.Calorie_Graph.averagecalorieintake),a.averageSpent=Math.round(b.data.Calorie_Graph.averagecalorieburnt)})},a.goGetDailyIntakeGraph=function(b){c.postRequest("user/dailyCalorieGraph/",{date:b}).then(function(b){a.calorieIntakeGraph=b.data.dailyCalorieGraph,""==a.calorieIntakeGraph.averagefat&&(a.calorieIntakeGraph.averagefat=0),""==a.calorieIntakeGraph.fat&&(a.calorieIntakeGraph.fat=0),""==a.calorieIntakeGraph.averageprotein&&(a.calorieIntakeGraph.averageprotein=0),""==a.calorieIntakeGraph.protein&&(a.calorieIntakeGraph.protein=0),""==a.calorieIntakeGraph.averagefibre&&(a.calorieIntakeGraph.averagefibre=0),""==a.calorieIntakeGraph.fibre&&(a.calorieIntakeGraph.fibre=0),""==a.calorieIntakeGraph.averagecarbo&&(a.calorieIntakeGraph.averagecarbo=0),""==a.calorieIntakeGraph.carbo&&(a.calorieIntakeGraph.carbo=0),$("#dailyIntake").highcharts({title:{text:""},xAxis:{categories:["Protein","Fat","Carbs","Fibre"],labels:{style:{fontSize:"9px",fontWeight:"normal"},useHTML:!0,formatter:function(){return"Protein"==this.value?this.value+'<br/><img class="hidden-md" src="../../images/i-protein.jpg"/>':"Fat"==this.value?"&nbsp;&nbsp;"+this.value+'&nbsp;&nbsp;<br/><img class="hidden-md" src="../../images/i-fats.jpg"/>':"Carbs"==this.value?this.value+'<br/><img class="hidden-md" src="../../images/i-carbs.jpg"/>':"Fibre"==this.value?"&nbsp;"+this.value+'&nbsp;<br/><img class="hidden-md" src="../../images/i-fibre.jpg"/>':this.value}}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 1)",borderWidth:1,shadow:!0,style:{fontSize:"10px",padding:5,zIndex:1e4},formatter:!1},yAxis:{title:{text:null},labels:{style:{fontSize:"10px"}}},exporting:{enabled:!1},credits:{enabled:!1},legend:{enabled:!0},series:[{type:"column",name:"Units",data:[{name:"Protein",color:"limegreen",y:parseFloat(a.calorieIntakeGraph.protein)},{name:"Fat",color:"red",y:parseFloat(a.calorieIntakeGraph.fat)},{name:"Carbs",color:"orange",y:parseFloat(a.calorieIntakeGraph.carbo)},{name:"Fibre",color:"#ffcc00",y:parseFloat(a.calorieIntakeGraph.fibre)}]},{type:"spline",name:"Average",data:[parseFloat(a.calorieIntakeGraph.averageprotein),parseFloat(a.calorieIntakeGraph.averagefat),parseFloat(a.calorieIntakeGraph.averagecarbo),parseFloat(a.calorieIntakeGraph.averagefibre)],marker:{lineWidth:1,lineColor:Highcharts.getOptions().colors[1],fillColor:"white"}}]})},function(){errorMessage(d,"Please try again later!")})},a.graphOne=function(){a.graphs=1},a.graphTwo=function(){a.graphs=2},a.loadSessionFood=function(){switch(parseInt(a.graphSessionId)){case 1:a.userSessionFoods=a.userFoodDiaryDataAll.BreakFast;break;case 2:a.userSessionFoods=a.userFoodDiaryDataAll.Brunch;break;case 3:a.userSessionFoods=a.userFoodDiaryDataAll.Lunch;break;case 4:a.userSessionFoods=a.userFoodDiaryDataAll.Evening;break;case 5:a.userSessionFoods=a.userFoodDiaryDataAll.Dinner}a.goGetSessionGraph(a.graphSessionId)},a.goGetSessionGraph=function(b){a.loaded=!0;var e=document.getElementById("main-start-date").value;
a.storedSessionId=b,a.storedSessionId&&c.postRequest("user/getDailyCalorieGraphWithSession/",{date:e,sessionid:b}).then(function(b){a.calorieIntakeGraph=b.data.Calorie_Graph,a.graphResponse=b.data.Response_status,""==a.calorieIntakeGraph.fat&&(a.calorieIntakeGraph.fat=0),""==a.calorieIntakeGraph.protein&&(a.calorieIntakeGraph.protein=0),""==a.calorieIntakeGraph.fibre&&(a.calorieIntakeGraph.fibre=0),""==a.calorieIntakeGraph.carbo&&(a.calorieIntakeGraph.carbo=0),a.totalUnits=a.calorieIntakeGraph.fat+a.calorieIntakeGraph.protein+a.calorieIntakeGraph.fibre+a.calorieIntakeGraph.carbo,$("#sessionGraph").highcharts({title:{text:""},xAxis:{categories:["Protein","Fat","Carbs","Fibre"],labels:{useHTML:!0,formatter:function(){return"Protein"==this.value?this.value+'<br/><img src="../../images/i-protein.jpg"/>':"Fat"==this.value?"&nbsp;&nbsp;"+this.value+'&nbsp;&nbsp;<br/><img src="../../images/i-fats.jpg"/>':"Carbs"==this.value?this.value+'<br/><img src="../../images/i-carbs.jpg"/>':"Fibre"==this.value?this.value+'<br/><img src="../../images/i-fibre.jpg"/>':this.value}}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 1)",borderWidth:1,shadow:!0,style:{fontSize:"10px",padding:5,zIndex:500},formatter:!1},yAxis:{title:{text:null},min:0,max:a.totalUnits,labels:{style:{fontSize:"10px"}}},exporting:{enabled:!1},credits:{enabled:!1},legend:{enabled:!1},series:[{type:"column",showInLegend:!1,name:"Unit",data:[{name:"Protein",color:"limegreen",y:parseFloat(a.calorieIntakeGraph.protein)},{name:"Fat",color:"red",y:parseFloat(a.calorieIntakeGraph.fat)},{name:"Carbs",color:"orange",y:parseFloat(a.calorieIntakeGraph.carbo)},{name:"Fibre",color:"#ffcc00",y:parseFloat(a.calorieIntakeGraph.fibre)}]}]}),a.loaded=!1},function(){errorMessage(d,"Please try again later!")})},a.doGetCoachAdvices=function(){c.getRequest("user/getCoachAdvicesByUser/","").then(function(b){var d=e.getCoachIndividualDetail(b.data.Coach_Advice),f=[];$.each(d,function(a,b){f.push(b.coachid)}),c.getRequest("user/getmyCoachList/","").then(function(b){a.coachlist=b.data.getmyCoachList,$.each(a.coachlist,function(a,b){if(f.indexOf(b.userid)==-1){var c={};c.coachid=b.userid,c.coachname=b.name,c.coachimage=b.imageurl,c.description="",d.push(c)}});var c=[{coachid:"n1",coachname:""},{coachid:"n2",coachname:""},{coachid:"n3",coachname:""},{coachid:"n4",coachname:""}];if(d.length<3)for(i=d.length;i<3;i++)d.push(c[i]);else d.push(c[0]);a.coachadvice=d,a.usercoachadvicedetails=a.coachadvice[0],coachAdviceCarousel()})},function(){console.log("Please try again later!")})},a.setCoachDeatails=function(b){a.usercoachadvicedetails=b},a.getHistory=function(){a.historyReport=1,""==$("#history-start").val()?a.isHistoryEmpty=1:a.isHistoryEmpty=0},a.otherThanHistory=function(){a.historyReport=0},a.setHistoryType=function(b){a.historyType=b,""==$("#history-start").val()||a.doGetHistoryReport()},a.doGetHistoryReport=function(){a.isHistoryEmpty=0,a.loaded=!0;var b,d;""==$("#history-start").val()?b=d=u:(b=$("#history-start").val(),d=$("#history-end").val());var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=[],g=[],h=[],i=[],j={};1==a.historyType?c.postRequest("user/calorieGraphbyDates/",{fromdate:b,todate:d}).then(function(c){a.historyRecord=c.data.calorieGraphbyDates,$.each(a.historyRecord,function(a,b){var c=[],d=b.date.split("/");c.push(e[d[1]-1]+" "+d[0]),c.push(parseFloat(b.calorie)),i.push(e[d[1]-1]+" "+d[0]),f.push(c)}),j.title="Calories Gained Graph ( "+b+" - "+d+" )",j.name="Calories Gained",j.suffix=" cals",j.yaxis="Calories (cal)",j.xaxis="Date Range",j.color="limegreen",a.drawHistoryGraph(f,i,j)}):2==a.historyType?c.postRequest("user/getCalorieBurntGraphByDates/",{fromdate:b,todate:d}).then(function(c){a.historyRecord=c.data.CalorieBurntGraphbyDates,$.each(a.historyRecord,function(a,b){var c=[],d=b.date.split("/");c.push(e[d[1]-1]+" "+d[0]),c.push(parseFloat(b.calorie)),i.push(e[d[1]-1]+" "+d[0]),f.push(c)}),j.title="Calories Brunt Graph ( "+b+" - "+d+" )",j.name="Calories Burned",j.suffix=" cals",j.yaxis="Calories (cal)",j.xaxis="Date Range",j.color="red",a.drawHistoryGraph(f,i,j)}):3==a.historyType?c.postRequest("user/getExerciseMinutesUsingDates/",{fromdate:b,todate:d}).then(function(c){a.historyRecord=c.data.ExerciseMinutesUsingDates,$.each(a.historyRecord,function(a,b){var c=[],d=b.date.split("/");c.push(e[d[1]-1]+" "+d[0]),c.push(parseFloat(b.workoutvalue)),i.push(e[d[1]-1]+" "+d[0]),f.push(c)}),j.title="Exercise Minutes Graph ( "+b+" - "+d+" )",j.name="Exercise Minutes",j.suffix=" mints",j.yaxis="Minutes",j.xaxis="Date Range",j.color="blue",a.drawHistoryGraph(f,i,j)}):4==a.historyType?(1==a.userProfile.unitPreference?a.unit="Kgs":2==a.userProfile.unitPreference&&(a.unit="Lbs"),c.postRequest("/user/getWeightLogGraph/",{startdate:b,enddate:d}).then(function(c){a.historyRecord=c.data.Weight_logs,$.each(a.historyRecord,function(a,b){if(1==b.userentry){var c=[],d=b.date.split("/");c.push(e[d[1]-1]+" "+d[0]),c.push(parseFloat(b.weight)),i.push(e[d[1]-1]+" "+d[0]),f.push(c)}}),j.title="Weight Log Graph ( "+b+" - "+d+" )",j.name="Weight Log",j.suffix=a.unit,j.yaxis="Weight ("+a.unit+")",j.xaxis="Date Range",j.color="#f8ba01",a.drawHistoryGraph(f,i,j)})):c.postRequest("/user/budgetGraphbyDates/",{startdate:b,enddate:d}).then(function(c){a.historyRecord=c.data.BudgetList,$.each(a.historyRecord,function(a,b){var c=[],d=b.date.split("/");c.push(e[d[1]-1]+" "+d[0]),c.push(parseFloat(b.Budget)),g.push(b.Net),h.push(e[d[1]-1]+" "+d[0]),f.push(c)}),j.title="Budget Vs Net Graph ( "+b+" - "+d+" )",j.name="Budget",j.suffix=" cals",j.yaxis="Calories (Cal)",j.xaxis="Date Range",j.color="#f8ba01",a.drawHistoryGraphForBudget(f,j,g,h)})},a.drawHistoryGraph=function(b,c,d){console.log(b),console.log(d),a.loaded=!1,$("#historyGraph").highcharts({title:{text:d.title},xAxis:{title:{text:d.xaxis},categories:c},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 1)",borderWidth:1,shadow:!0,style:{fontSize:"10px",padding:5,zIndex:500},formatter:!1,valueSuffix:d.suffix},yAxis:{title:{text:d.yaxis},plotLines:[{value:0,width:1,color:d.color}]},colors:[d.color],exporting:{enabled:!1},credits:{enabled:!1},legend:{enabled:!1},series:[{name:d.name,data:b}]})},a.drawHistoryGraphForBudget=function(b,c,d,e){console.log(b),console.log(c),console.log(d),console.log(e),a.loaded=!1,$("#historyGraph").highcharts({chart:{type:"column"},title:{text:c.titlesle},xAxis:{title:{text:c.xaxis},categories:e},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 1)",borderWidth:1,shadow:!0,style:{fontSize:"10px",padding:5,zIndex:500},formatter:!1,valueSuffix:c.suffix},yAxis:{title:{text:c.yaxis},plotLines:[{value:0,width:1,color:c.color}]},colors:[c.color],exporting:{enabled:!1},credits:{enabled:!1},legend:{enabled:!1},series:[{type:"column",name:"Net",data:d},{type:"spline",name:"Budget",data:b,marker:{lineWidth:2,lineColor:Highcharts.getOptions().colors[3],fillColor:"white"}}]})},a.datePicker=function(){$("#main-date").click()},a.getUserTimeZone=function(b){c.getRequest("getUserTimeZone/","").then(function(c){a.UserTimeZone=c.data.time,a.UserDate=a.UserTimeZone.slice(0,10),a.selectDate=b,a.UserDate==b?a.disableUpdateWeight=!1:a.disableUpdateWeight=!0})},a.getBudget=function(b){c.postRequest("user/getTotalCalorieDetailForDate/",{date:b}).then(function(b){a.budgetDetails=b.data.BudgetDetail,a.Budget=a.budgetDetails.Budget,a.Net=a.budgetDetails.Net,1==a.budgetDetails.OverorUnderStatus?a.currentGainColour="red":2==a.budgetDetails.OverorUnderStatus&&(a.currentGainColour="limegreen")})};var u=new Date,v=u.getDate(),w=u.getMonth()+1,x=u.getFullYear();v<10&&(v="0"+v),w<10&&(w="0"+w),u=v+"/"+w+"/"+x,a.weightLogDate=u,a.todayDate=u,a.selectedDate=u,b.goalStartDate=b.goalEndDate=u,a.initialLoadFoodAndExercise=function(b){a.loadFoodDiary(b),a.loadExerciseDiary(b),a.doGetIntakeBruntByDate(b),a.goGetDailyIntakeGraph(b),a.doGetWeightGoal(),a.doGetWeightLog(b),a.goGetSessionGraph(a.storedSessionId),a.getUserTimeZone(b),a.getBudget(b),a.checkGoalOnLoad(b)},a.initialLoadFoodAndExercise(u),a.doGetCoachAdvices(),a.offset=0,a.timerCurrent=0,a.uploadCurrent=0,a.stroke=12,a.radius=70,a.isSemi=!1,a.rounded=!1,a.responsive=!1,a.clockwise=!0,a.bgColor="#ddd",a.duration=1e3,a.currentAnimation="easeOutCubic",a.animations=[],angular.forEach(g.animations,function(b,c){a.animations.push(c)}),a.getStyle=function(){var b=(a.isSemi?"":"translateY(-50%) ")+"translateX(-50%)";return{top:a.isSemi?"auto":"52%",bottom:a.isSemi?"5%":"auto",left:"50%",transform:b,"-moz-transform":b,"-webkit-transform":b}};a.prevent=function(){event.preventDefault()},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.format="dd/MM/yyyy";var y=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};return function(e,f,g){var h=y;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(f=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");f=String(h.masks[f]||f||h.masks["default"]),"UTC:"==f.slice(0,4)&&(f=f.slice(4),g=!0);var i=g?"getUTC":"get",j=e[i+"Date"](),k=e[i+"Day"](),l=e[i+"Month"](),m=e[i+"FullYear"](),n=e[i+"Hours"](),o=e[i+"Minutes"](),p=e[i+"Seconds"](),q=e[i+"Milliseconds"](),r=g?0:e.getTimezoneOffset(),s={d:j,dd:d(j),ddd:h.i18n.dayNames[k],dddd:h.i18n.dayNames[k+7],m:l+1,mm:d(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(m).slice(2),yyyy:m,h:n%12||12,hh:d(n%12||12),H:n,HH:d(n),M:o,MM:d(o),s:p,ss:d(p),l:d(q,3),L:d(q>99?Math.round(q/10):q),t:n<12?"a":"p",tt:n<12?"am":"pm",T:n<12?"A":"P",TT:n<12?"AM":"PM",Z:g?"UTC":(String(e).match(b)||[""]).pop().replace(c,""),o:(r>0?"-":"+")+d(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(j%100-j%10!=10)*j%10]};return f.replace(a,function(a){return a in s?s[a]:a.slice(1,a.length-1)})}}();y.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},y.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(a,b){return y(this,a,b)}}).constant("uibdatepickerPopupConfig",{datepickerPopup:"dd/MM/yyyy",closeOnDateSelection:!0,appendToBody:!0,showButtonBar:!1}).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!1,startingDay:0,yearRange:20,minDate:null,maxDate:new Date}),userApp.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),userApp.directive("hcGraph",function(){return{restrict:"C",replace:!0,scope:{graph:"=graph"},controller:function(a,b,c){},template:'<div id="graph-container" style="margin: 0 auto;height: 300px">not working</div>',link:function(a,b,c){console.log(c);var d=new Highcharts.Chart({chart:{renderTo:"graph-container",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Goal Graph",x:-20},subtitle:{text:"",x:-20},xAxis:{title:{text:"Date Range"},categories:[]},yAxis:{title:{text:"Weight "},plotLines:[{value:0,width:1,color:"#f8ba01"}]},tooltip:{valueSuffix:"Kgs"},colors:["#f8ba01"],legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0,x:80,y:0},series:[{name:"Weight",data:[]}],exporting:{enabled:!1},credits:{enabled:!1}});a.$watch("graph",function(a){d.series[0].setData(a,!0)},!0)}}}),userApp.directive("historyGraph",function(){return{restrict:"C",replace:!0,scope:{historygraph:"="},controller:function(a,b,c){},template:'<div id="graph-container" style="height: 400px;width: 67%">not working</div>',link:function(a,b,c){var d=new Highcharts.Chart({chart:{renderTo:"graph-container",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:a.test,x:-20},subtitle:{text:"",x:-20},xAxis:{title:{text:"Date Range"},categories:[]},yAxis:{title:{text:"Weight (Kgs)"},plotLines:[{value:0,width:1,color:"#ff0066"}]},tooltip:{valueSuffix:"Kgs"},colors:["#ff0066"],legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0,x:80,y:0},series:[{name:"Weight",data:[]}],exporting:{enabled:!1},credits:{enabled:!1}});a.$watch("historygraph",function(a){d.series[0].setData(a,!0)},!0)}}}),userApp.directive("heightFoodBind",function(){return{link:function(a,b){a.$watch(function(){setTimeout(function(){var a=$(".food");b.height()>parseInt($(".food_scrollbar").css("height"))?a.css({paddingRight:"15px"}):a.css({paddingRight:"3px"})},500)})}}}),userApp.directive("heightExerciseBind",function(){return{link:function(a,b){a.$watch(function(){setTimeout(function(){var a=$(".exercise");b.height()>parseInt($(".exercise-height").css("height"))?a.css({paddingRight:"15px"}):a.css({paddingRight:"3px"})},500)})}}}),userApp.directive("shouldFocus",function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.shouldFocus,function(a,c){a&&b[0].scrollIntoView(!1)})}}});
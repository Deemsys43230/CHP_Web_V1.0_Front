var adminApp=angular.module("userDashboardServiceModule",["requestModule"]);adminApp.factory("UserDashboardService",["requestHandler",function(a){var b={};return b.doGetCategories=function(){return a.getRequest("admin/getFoodCategoryByStatus","").then(function(a){return a.data.Food_Category},function(a){console.log("Not able to pull Food Measure List")})},b.getFoodDiary=function(b){return a.postRequest("user/getFoodbyDate/",{addeddate:b}).then(function(a){return a.data.MyFoodData},function(){console.log("Please try again later!")})},b.searchFood=function(b,c){return a.postRequest("searchFoodListByUser/",{foodname:b,foodsession:c}).then(function(a){var b=a.data.Food_Data;return b.slice(0,50)},function(){console.log("Please try again later!")})},b.doGetSelectedFoodDetails=function(b){return a.postRequest("user/getFoodDetailByUser/",{foodid:b}).then(function(a){var b=a.data.Food_Data;return $.each(b,function(a,b){b.foodImagePath=b.foodImagePath+"50x50.jpg"}),b},function(){console.log("Please try again later!")})},b.doInsertUserFood=function(b){return a.postRequest("user/usersaveFoodtoDiary/",b).then(function(a){return a},function(){console.log("Please try again later!")})},b.doUpdateUserFood=function(b){return a.putRequest("user/editUserFood/",b).then(function(a){return a},function(){console.log("Please try again later!")})},b.doDeleteUserFood=function(b){return a.postRequest("user/deleteUserFood/",{userfoodid:b}).then(function(a){return a},function(){console.log("Please try again later!")})},b.doGetUserFoodDetails=function(b){return a.postRequest("user/getFoodDetails/",{userfoodid:b}).then(function(a){return a.data.FoodDetails},function(){console.log("Please try again later!")})},b.doGetUserDetails=function(){return a.getRequest("getUserId/","").then(function(a){userProfile=a.data.User_Profile;var b=new Date;if(null==userProfile.dob&&(userProfile.age="-"),null!=userProfile.dob){var c=userProfile.dob,d=c.split("/"),e=d[1]+"/"+d[0]+"/"+d[2];c=new Date(e);var f=b.getFullYear()-c.getFullYear(),g=b.getMonth()-c.getMonth();(0>g||0===g&&b.getDate()<c.getDate())&&f--,userProfile.age=f}return userProfile})},b.doGetDemographyDetails=function(){return a.getRequest("user/getDemography/","").then(function(a){return a.data.Demography_Data})},b.doGetFrequentlyAdded=function(){return a.getRequest("user/userFrequentlyaskedFoods/","").then(function(a){return a.data.FoodDataList})},b.doAddSuggestedFood=function(b){return a.postRequest("user/insertFoodSuggestion/",b).then(function(a){return a})},b.doAddSuggestedExercise=function(b){return a.postRequest("user/insertExerciseSuggestion/",b).then(function(a){return a})},b.searchExercise=function(b){return a.postRequest("user/searchExercisebyUser/",{exercisename:b}).then(function(a){var b=a.data.exercisesData;return b.slice(0,50)},function(){console.log("Please try again later!")})},b.doGetSelectedExerciseDetails=function(b){return a.postRequest("user/getExerciseDetailByuser/",{exerciseid:b}).then(function(a){var b=a.data.ExerciseDetail;return $.each(b,function(a,b){b.imageurl=b.imageurl+"/50x50.jpg"}),b},function(){console.log("Please try again later!")})},b.getExerciseDiary=function(b){return a.postRequest("user/getListOfExerciseByDate/",{date:b}).then(function(a){return a.data.ExerciseData},function(){console.log("Please try again later!")})},b.doInsertUserExercise=function(b){return a.postRequest("user/insertUserExercise/",b).then(function(a){return a},function(){console.log("Please try again later!")})},b.doDeleteUserExercise=function(b){return a.postRequest("user/deleteUserExercise/",{userexercisemapid:b}).then(function(a){return a},function(){console.log("Please try again later!")})},b.doGetUserExerciseDetails=function(b){return a.postRequest("user/getSavedExerciseDetailByUUID/",{userexercisemapid:b}).then(function(a){return a.data.ExerciseData},function(){console.log("Please try again later!")})},b.doUpdateUserExercise=function(b){return a.postRequest("user/updateUserExerciseByUUID/",b).then(function(a){return a},function(){console.log("Please try again later!")})},b.doGetFrequentlyUsedExercise=function(){return a.getRequest("user/userFrequentlyaskedExercise/","").then(function(a){return a.data.ExerciseDataList})},b.doGetWeightLogDetails=function(b){return a.postRequest("user/getWeightLogByDate/",{date:b}).then(function(a){return a.data})},b.getCoachIndividualDetail=function(b){var c=b;return $.each(c,function(b,c){a.getRequest("getCoachIndividualDetailbyUser/"+c.coachid,"").then(function(a){c.coachname=a.data.getCoachIndividualDetail.name,c.coachimage=a.data.getCoachIndividualDetail.imageurl})}),c},b.doGetAchievedWeight=function(a){var c=b.doGetWeightLogDetails(a);return c.then(function(c){if(0==c.Response_status){var d="",e=a.slice(0,2);if("01"==e){e="31";var f=a.slice(3,5);if("01"==f){f="12";var g=a.slice(6,10);g-=1,d=e+"/"+f+"/"+g}else f-=1,d=e+"/"+f+"/"+a.slice(6,10)}else e-=1,d=e+"/"+a.slice(3,5)+"/"+a.slice(6,10);return b.doGetAchievedWeight(d)}return c.Weight_logs.weight})},b}]);
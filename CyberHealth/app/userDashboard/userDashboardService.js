var adminApp=angular.module("userDashboardServiceModule",["requestModule"]);adminApp.factory("UserDashboardService",function(e){var t={};return t.doGetCategories=function(){return e.getRequest("admin/getFoodCategoryByStatus","").then(function(e){return e.data.Food_Category},function(){console.log("Not able to pull Food Measure List")})},t.getFoodDiary=function(t){return e.postRequest("user/getFoodbyDate/",{addeddate:t}).then(function(e){return e.data.MyFoodData},function(){console.log("Please try again later!")})},t.searchFood=function(t,n){return e.postRequest("searchFoodListByUser/",{foodname:t,foodsession:n}).then(function(e){var t=e.data.Food_Data;return t.slice(0,50)},function(){console.log("Please try again later!")})},t.doGetSelectedFoodDetails=function(t){return e.postRequest("user/getFoodDetailByUser/",{foodid:t}).then(function(e){var t=e.data.Food_Data;return $.each(t,function(e,t){t.foodImagePath=t.foodImagePath+"50x50.jpg"}),t},function(){console.log("Please try again later!")})},t.doInsertUserFood=function(t){return e.postRequest("user/usersaveFoodtoDiary/",t).then(function(e){return e},function(){console.log("Please try again later!")})},t.doUpdateUserFood=function(t){return e.putRequest("user/editUserFood/",t).then(function(e){return e},function(){console.log("Please try again later!")})},t.doDeleteUserFood=function(t){return e.postRequest("user/deleteUserFood/",{userfoodid:t}).then(function(e){return e},function(){console.log("Please try again later!")})},t.doGetUserFoodDetails=function(t){return e.postRequest("user/getFoodDetails/",{userfoodid:t}).then(function(e){return e.data.FoodDetails},function(){console.log("Please try again later!")})},t.doGetUserDetails=function(){return e.getRequest("getUserId/","").then(function(e){userProfile=e.data.User_Profile;var t=new Date;if(null==userProfile.dob&&(userProfile.age="-"),null!=userProfile.dob){var n=userProfile.dob,r=n.split("/"),o=r[1]+"/"+r[0]+"/"+r[2];n=new Date(o);var a=t.getFullYear()-n.getFullYear(),s=t.getMonth()-n.getMonth();(0>s||0===s&&t.getDate()<n.getDate())&&a--,userProfile.age=a}return userProfile})},t.doGetDemographyDetails=function(){return e.getRequest("user/getDemography/","").then(function(e){return e.data.Demography_Data})},t.doGetFrequentlyAdded=function(){return e.getRequest("user/userFrequentlyaskedFoods/","").then(function(e){return e.data.FoodDataList})},t.doAddSuggestedFood=function(t){return e.postRequest("user/insertFoodSuggestion/",t).then(function(e){return e})},t.doAddSuggestedExercise=function(t){return e.postRequest("user/insertExerciseSuggestion/",t).then(function(e){return e})},t.searchExercise=function(t){return e.postRequest("user/searchExercisebyUser/",{exercisename:t}).then(function(e){var t=e.data.exercisesData;return t.slice(0,50)},function(){console.log("Please try again later!")})},t.doGetSelectedExerciseDetails=function(t){return e.postRequest("user/getExerciseDetailByuser/",{exerciseid:t}).then(function(e){var t=e.data.ExerciseDetail;return $.each(t,function(e,t){t.imageurl=t.imageurl+"/50x50.jpg"}),t},function(){console.log("Please try again later!")})},t.getExerciseDiary=function(t){return e.postRequest("user/getListOfExerciseByDate/",{date:t}).then(function(e){return e.data.ExerciseData},function(){console.log("Please try again later!")})},t.doInsertUserExercise=function(t){return e.postRequest("user/insertUserExercise/",t).then(function(e){return e},function(){console.log("Please try again later!")})},t.doDeleteUserExercise=function(t){return e.postRequest("user/deleteUserExercise/",{userexercisemapid:t}).then(function(e){return e},function(){console.log("Please try again later!")})},t.doGetUserExerciseDetails=function(t){return e.postRequest("user/getSavedExerciseDetailByUUID/",{userexercisemapid:t}).then(function(e){return e.data.ExerciseData},function(){console.log("Please try again later!")})},t.doUpdateUserExercise=function(t){return e.postRequest("user/updateUserExerciseByUUID/",t).then(function(e){return e},function(){console.log("Please try again later!")})},t.doGetFrequentlyUsedExercise=function(){return e.getRequest("user/userFrequentlyaskedExercise/","").then(function(e){return e.data.ExerciseDataList})},t.doGetWeightLogDetails=function(t){return e.postRequest("user/getWeightLogByDate/",{date:t}).then(function(e){return e.data})},t.getCoachIndividualDetail=function(t){var n=t;return $.each(n,function(t,n){e.getRequest("getCoachIndividualDetailbyUser/"+n.coachid,"").then(function(e){n.coachname=e.data.getCoachIndividualDetail.name,n.coachimage=e.data.getCoachIndividualDetail.imageurl})}),n},t.doGetAchievedWeight=function(e){var n=t.doGetWeightLogDetails(e);return n.then(function(n){if(0==n.Response_status){var r="",o=e.slice(0,2);if("01"==o){o="31";var a=e.slice(3,5);if("01"==a){a="12";var s=e.slice(6,10);s-=1,r=o+"/"+a+"/"+s}else a-=1,r=o+"/"+a+"/"+e.slice(6,10)}else o-=1,r=o+"/"+e.slice(3,5)+"/"+e.slice(6,10);return t.doGetAchievedWeight(r)}return n.Weight_logs.weight})},t});
var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination"]);adminApp.controller("CoachController",["$scope","requestHandler","Flash",function(a,b,c){a.doGetCoachList=function(){a.loaded=!0,b.getRequest("admin/getallCoachListbyAdmin/","").then(function(b){a.coachList=b.data.getallCoachListbyAdmin,a.loaded=!1,a.paginationLoad=!0})},a.doEnableDisableCoach=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),b.postRequest("admin/enableordisableUser/",{userid:d}).then(function(b){a.doGetCoachList(),successMessage(c,"Successfully Updated")},function(){errorMessage(c,"Please Try Again Later")})},a.doAddCoach=function(){a.coach.role=2,console.log(a.coach),b.postRequest("admin/registerCoach/",a.coach).then(function(){successMessage(c,"Successfully Registered"),$(".common_model").hide(),$("#modal").hide(),$("#lean_overlay").hide(),a.doGetCoachList(),a.coach={},a.confirm_password="",a.coachRegisterForm=!1,a.coachRegisterForm=!1},function(){errorMessage(c,"Please Try Again Later")})},a.init=function(){a.paginationLoad=!1,a.doGetCoachList()},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()}),a.reset=function(){a.coach={},a.coach.name="",a.coach.emailid="",a.coach.password="",a.coach.confirm_password="",a.coachRegisterForm.$setPristine(),a.shouldBeOpen=!0,"none"!=$(".search-list-form").css("display")&&$(".search-list-form").hide()}}]),adminApp.controller("CoachViewController",["$scope","requestHandler","Flash","$routeParams",function(a,b,c,d){a.averageRate=.1,a.paginationLoad=!1,a.doGetCoachDetailsByUser=function(d){a.coach={status:"coach-view"},a.viewload=!0,b.getRequest("getCoachIndividualDetailbyAdmin/"+d,"").then(function(b){a.usercoachdetails=b.data.getCoachIndividualDetail,null==a.usercoachdetails.about&&(a.usercoachdetails.about="NA"),null==a.usercoachdetails.specialist&&(a.usercoachdetails.specialist="NA"),null==a.usercoachdetails.qualification&&(a.usercoachdetails.qualification="NA"),null==a.usercoachdetails.experience&&(a.usercoachdetails.experience="0"),null==a.usercoachdetails.specialist&&(a.usercoachdetails.specialist="NA"),null==a.usercoachdetails.phone&&(a.usercoachdetails.phone="NA"),null==a.usercoachdetails.dob&&(a.usercoachdetails.dob="NA"),null==a.usercoachdetails.country&&(a.usercoachdetails.country="NA"),null==a.usercoachdetails.state&&(a.usercoachdetails.state="NA"),null==a.usercoachdetails.city&&(a.usercoachdetails.city="NA"),null==a.usercoachdetails.zipcode&&(a.usercoachdetails.zipcode="NA")}),b.getRequest("getRatingsandReviews/"+d,"").then(function(b){a.coachReviews=b.data.Ratings_Reviews,a.viewload=!1,a.totalRatings=a.coachReviews.totalRatings,a.avgRatings=a.coachReviews.averageRatings,0==a.coachReviews.averageRatings?a.averageRate=.1:a.averageRate=a.coachReviews.averageRatings},function(){},function(){errorMessage(c,"Please try again later!")})},a.doGetCoachRatings=function(c){a.reviewload=!0,b.getRequest("getRatingsandReviews/"+c,"").then(function(b){a.coachReviews=b.data.Ratings_Reviews.Reviews,a.reviewload=!1})},a.coachReview=function(b){a.doGetCoachRatings(b),a.coachViewId=b,a.coach={status:"coach-reviews"}},a.userCoachViewInit=function(){a.doGetCoachDetailsByUser(d.id),a.coachView={status:"coach-reviews"},a.doGetCoachRatings(d.id)}}]),adminApp.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),adminApp.filter("startsWithLettercoach",function(){return function(a,b){var c=[],d=new RegExp(b,"i");if(a)for(var e=0;e<a.length;e++){var f=a[e];(d.test(f.emailid)||d.test(f.name))&&c.push(f)}else;return c}}),adminApp.directive("averageStarRating",function(){return{restrict:"EA",template:"<div class='average-rating-container'>  <ul class='rating background' class='readonly'>    <li ng-repeat='star in stars' class='star'>      <i class='fa fa-star'></i>    </li>  </ul>  <ul class='rating foreground' class='readonly' style='width:{{filledInStarsContainerWidth}}%'>    <li ng-repeat='star in stars' class='star filled'>      <i class='fa fa-star'></i>    </li>  </ul></div>",scope:{averageRatingValue:"=ngModel",max:"=?"},link:function(a,b,c){function d(){a.stars=[];for(var b=0;b<a.max;b++)a.stars.push({});var c=76;a.filledInStarsContainerWidth=a.averageRatingValue/a.max*c}void 0==a.max&&(a.max=5),a.$watch("averageRatingValue",function(a,b){b&&d()})}}});
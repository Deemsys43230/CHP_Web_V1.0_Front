var userApp=angular.module("userApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","friendsServiceModule","angular-nicescroll"]);userApp.controller("FriendsController",["$scope","requestHandler","Flash","FriendsService","$sce",function(a,b,c,d,e){a.viewDetails=0,a.friendsearch="",a.activeClass.friends="active",a.currentPage=0,a.pageSize=8,a.numberOfPages=function(){return Math.ceil(a.myFriendsList.length/a.pageSize)},a.currentPage1=0,a.pageSize1=8,a.numberOfPages1=function(){return Math.ceil(a.requestsent.length/a.pageSize1)},a.currentPage2=0,a.pageSize2=8,a.numberOfPages2=function(){return Math.ceil(a.requestreceived.length/a.pageSize2)},a.myFriends=function(){a.loaded=!0;var b=d.doGetMyFriends();b.then(function(b){a.myFriendsList=b,a.loaded=!1})},a.requestedFriends=function(){var b=d.doGetFriendRequest();b.then(function(b){a.requestedFriendsList=b,a.requestreceived=[],a.requestsent=[],$.each(a.requestedFriendsList,function(b,c){2==c.friendStatus?a.requestreceived.push(c):1==c.friendStatus&&a.requestsent.push(c)})})},a.searchFriends=function(){if(a.friendsearch.length>=3){a.loaded=!0;var b=d.doSearchFriends(a.friendsearch);b.then(function(b){a.searchFriendsList=b,a.loaded=!1})}if(""==a.friendsearch){var b=d.doSearchFriends(a.friendsearch);b.then(function(b){a.searchFriendsList=b})}},a.inviteFriends=function(b){var e=d.doInviteFriends(b);e.then(function(b){1==b.data.Response_status?(successMessage(c,"Request&nbsp;Sent"),a.searchFriends(""),a.initialLoad()):0==b.data.Response_status&&errorMessage(c,"Already Request Sent")})},a.acceptFriends=function(b){var e=d.doAcceptFriends(b);e.then(function(b){1==b.data.Response_status?(successMessage(c,"Request&nbsp;Accepted"),a.initialLoad()):0==b.data.Response_status&&errorMessage(c,"No Friends found")})},a.denyFriends=function(b){var e=d.doDenyFriends(b);e.then(function(b){1==b.data.Response_status?(successMessage(c,"Request&nbsp;Cancelled"),a.initialLoad()):0==b.data.Response_status&&errorMessage(c,"No friends found")})},a.doViewMembers=function(d){a.viewDetails=1,a.loaded=!0,b.getRequest("getUserIndividualDetail/"+d,"").then(function(b){a.myImgSrc=e.trustAsResourceUrl(b.data.getUserIndividualDetail.imageurl+"?decache="+Math.random()),a.viewMemberDetails=b.data.getUserIndividualDetail,null==a.viewMemberDetails.about&&(a.viewMemberDetails.about="N/A"),null==a.viewMemberDetails.dob&&(a.viewMemberDetails.dob="N/A"),null==a.viewMemberDetails.phone&&(a.viewMemberDetails.phone="N/A"),null==a.viewMemberDetails.country&&(a.viewMemberDetails.country="N/A"),null==a.viewMemberDetails.state&&(a.viewMemberDetails.state="N/A"),null==a.viewMemberDetails.city&&(a.viewMemberDetails.city="N/A"),null==a.viewMemberDetails.zipcode&&(a.viewMemberDetails.zipcode="N/A"),a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},a.initialLoad=function(){a.myFriends(),a.requestedFriends(),a.searchFriends(),a.viewDetails=0},a.initialLoad()}]),userApp.filter("startFrom",function(){return function(a,b){return b=+b,a?a.slice(b):void 0}}),userApp.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]);
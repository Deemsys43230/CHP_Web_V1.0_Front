var userApp=angular.module("userApp",["ngRoute","oc.lazyLoad","ngCookies","requestModule","flash"]);userApp.controller("CourseController",["$scope","requestHandler","Flash","$routeParams","$location",function(a,b,c,d,e){a.mycourselist=function(){b.getRequest("user/getMyCourseList/","").then(function(b){a.myCourseList=b.data.published_Course,console.log(a.myCourseList)},function(){errorMessage(c,"Please try again later!")})},a.courseDetails=function(){b.postRequest("courseDetail/",{courseid:d.id}).then(function(b){a.courseDetails=b.data.coursedetail,a.courseDetails.role="user"},function(){errorMessage(c,"Please try again later!")})},a.courseSectionList=function(){b.postRequest("getSectionList/",{courseid:d.id}).then(function(b){a.sectionList=b.data.course,console.log(a.sectionList)},function(){errorMessage(c,"Please try again later!")})},a.courseSectionDetails=function(){b.postRequest("user/sectionDetail/",{sectionid:d.id}).then(function(c){a.sectionDetail=c.data.sectiondetail,console.log(a.sectionDetail),b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(b){a.sectionList=b.data.course,$.each(a.sectionList,function(b,c){c.sectionid==d.id&&(a.currentIndex=b,a.sectionno=b+1),1===a.sectionList.length&&(a.nextdisable=!0)})})},function(){errorMessage(c,"Please try again later!")})},a.courseSectionDetailsbyId=function(d){b.postRequest("user/sectionDetail/",{sectionid:d}).then(function(b){a.sectionDetail=b.data.sectiondetail,$.each(a.sectionList,function(b,c){c.sectionid==d&&(a.currentIndex=b,a.sectionno=b+1)})},function(){errorMessage(c,"Please try again later!")})},a.courselist=function(){b.postRequest("getPublishedCourse/",{offset:0}).then(function(b){a.courseList=b.data.published_Course},function(){errorMessage(c,"Please try again later!")})},a.doEnrollCourse=function(a){b.postRequest("user/enrollCourse/",{courseid:a}).then(function(b){e.path("courseDetail/"+a),successMessage(c,"Successfully Enrolled")},function(){errorMessage(c,"Please try again later!")})},a.checkenroll=function(){alert("Please enroll the course to view details!!!")},a.nextdisable=!1,a.prevdisable=!0,a.getNextIndex=function(){b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(c){a.sectionList=c.data.course,console.log("length",a.sectionList.length),console.log("curr",a.currentIndex);var d=a.currentIndex+1;console.log("Index value",d),a.sectionno=d+1,d===a.sectionList.length-1&&(console.log("Entered If"),a.nextdisable=!0,console.log(a.nextdisable)),a.sectionList=c.data.course[d],b.postRequest("user/sectionDetail/",{sectionid:a.sectionList.sectionid}).then(function(c){a.sectionDetail=c.data.sectiondetail,console.log(a.sectionDetail),b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(b){a.sectionList=b.data.course})}),a.currentIndex=d,console.log("Newcurr",a.currentIndex),a.prevdisable=!1})},a.getPreviousIndex=function(){b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(c){a.sectionList=c.data.course,console.log("length",a.sectionList.length),console.log("curr",a.currentIndex);var d=a.currentIndex-1;a.sectionno=d+1,console.log("Index value",d),0===d&&(console.log("Entered If"),a.prevdisable=!0),a.sectionList=c.data.course[d],b.postRequest("user/sectionDetail/",{sectionid:a.sectionList.sectionid}).then(function(c){a.sectionDetail=c.data.sectiondetail,console.log(a.sectionDetail),b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(b){a.sectionList=b.data.course})}),a.currentIndex=d,console.log("Newcurr",a.currentIndex),a.nextdisable=!1})},a.courseinit=function(){a.courselist()},a.mycourselist(),a.viewinit=function(){a.courseDetails(),a.courseSectionList()}}]),userApp.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]);var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","ngCookies","requestModule","flash","angularUtils.directives.dirPagination"]);adminApp.controller("CourseAdminController",["$scope","requestHandler","Flash","$routeParams","$location",function(a,b,c,d,e){a.courselist=function(){b.postRequest("getPublishedCourse/",{offset:0}).then(function(b){a.courseList=b.data.published_Course,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},a.courseDetails=function(){b.postRequest("courseDetail/",{courseid:d.id}).then(function(b){a.courseDetails=b.data.coursedetail,a.courseDetails.role="admin"},function(){errorMessage(c,"Please try again later!")})},a.courseSectionList=function(){b.postRequest("getSectionList/",{courseid:d.id}).then(function(b){a.sectionList=b.data.course,console.log(a.sectionList)},function(){errorMessage(c,"Please try again later!")})},a.courseSectionDetails=function(){b.postRequest("admin/getSectionDetail/",{sectionid:d.id}).then(function(c){a.sectionDetail=c.data["Section Detail"],console.log(a.sectionDetail),a.sectionno=1,b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(b){a.sectionList=b.data.course,$.each(a.sectionList,function(b,c){c.sectionid==d.id&&(a.currentIndex=b,a.sectionno=b+1),1===a.sectionList.length&&(a.nextdisable=!0)})})},function(){errorMessage(c,"Please try again later!")})},a.courseSectionDetailsbyId=function(d){b.postRequest("admin/getSectionDetail/",{sectionid:d}).then(function(b){a.sectionDetail=b.data["Section Detail"],$.each(a.sectionList,function(b,c){c.sectionid==d&&(a.currentIndex=b,a.sectionno=b+1)})},function(){errorMessage(c,"Please try again later!")})};var f=0;a.nextdisable=!1,a.prevdisable=!0,a.getNextIndex=function(){b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(c){a.sectionList=c.data.course,console.log("length",a.sectionList.length),console.log("curr",f);var d=f+1;console.log("Index value",d),a.sectionno=d+1,d===a.sectionList.length-1&&(console.log("Entered If"),a.nextdisable=!0,console.log(a.nextdisable)),a.sectionList=c.data.course[d],b.postRequest("admin/getSectionDetail/",{sectionid:a.sectionList.sectionid}).then(function(c){a.sectionDetail=c.data["Section Detail"],console.log(a.sectionDetail),b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(b){a.sectionList=b.data.course})}),f=d,console.log("Newcurr",f),a.prevdisable=!1})},a.getPreviousIndex=function(){b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(c){a.sectionList=c.data.course,console.log("length",a.sectionList.length),console.log("curr",f);var d=f-1;console.log("Index value",d),a.sectionno=d+1,0===d&&(console.log("Entered If"),a.prevdisable=!0),a.sectionList=c.data.course[d],b.postRequest("admin/getSectionDetail/",{sectionid:a.sectionList.sectionid}).then(function(c){a.sectionDetail=c.data["Section Detail"],console.log(a.sectionDetail),b.postRequest("getSectionList/",{courseid:a.sectionDetail.courseid}).then(function(b){a.sectionList=b.data.course})}),f=d,console.log("Newcurr",f),a.nextdisable=!1})},a.pendingcourselist=function(){b.getRequest("admin/listOfPendingCourses/","").then(function(b){a.pendingCourseList=b.data.pendingcourses,a.page="pending",a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},a.doAcceptCourse=function(d){b.postRequest("admin/publishCourse/",{courseid:d}).then(function(b){"pending"==a.page?(a.pendingcourselist(),successMessage(c,"Successfully Published")):(e.path("courseDetail/"+d),successMessage(c,"Successfully Published"))},function(){errorMessage(c,"Please try again later!")})},a.doRejectCourse=function(d){b.postRequest("admin/rejectCourse/",{courseid:d}).then(function(b){"pending"==a.page?(a.pendingcourselist(),successMessage(c,"Successfully Rejected")):(e.path("courseDetail/"+d),successMessage(c,"Successfully Rejected"))},function(){errorMessage(c,"Please try again later!")})},a.viewinit=function(){a.courseDetails(),a.courseSectionList()},a.courselist(),$(".show-list-search").click(function(){$(".search-list-form").fadeIn(300),$(".search-list-form input").focus()}),$(".search-list-form input").focusout(function(){$(".search-list-form").fadeOut(300),a.coursesearch=""})}]),adminApp.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),adminApp.filter("startsWithLetter",function(){return alert("hi"),function(a,b){for(var c=[],d=new RegExp(b,"i"),e=0;e<a.length;e++){var f=a[e];d.test(f.coursename)&&c.push(f)}return c}});
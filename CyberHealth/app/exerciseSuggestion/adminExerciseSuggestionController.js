var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination","ui.bootstrap","userDashboardServiceModule"]);adminApp.controller("AdminExerciseSuggestionController",["$scope","requestHandler","Flash","UserDashboardService",function(a,b,c,d){a.activeClass={adminexercisesuggestion:"active"},a.exerciseSearchResult=[],a.userExercise={},a.inputChangedExercise=function(b){if(b.length>=3){a.loadingExercise=!0,0==a.exerciseSearchResult.length&&(a.loadingExercise=!0);var c=d.searchExerciseByAdmin(b);return c.then(function(b){return a.exerciseSearchResult=b,a.loadingExercise=!1,a.exerciseSearchResult})}},a.exerciseChoices={},a.exerciseSelected=function(){a.isAddExercise=!1,a.exerciseExists=!1},a.getSuggestedExercise=function(){delete a.exerciseChoices.exerciseid,a.exerciseChoices.activitytype=parseInt(a.exerciseChoices.activitytype),a.exerciseChoices.patienttype=parseInt(a.exerciseChoices.patienttype),b.postRequest("admin/getAdminExerciseSuggestions/",a.exerciseChoices).then(function(b){a.exerciseSuggestedList=b.data.exerciseSuggestion,a.exerciseChoices.activitytype=a.exerciseChoices.activitytype.toString(),a.exerciseChoices.patienttype=a.exerciseChoices.patienttype.toString()})},a.addSuggestExercise=function(){b.postRequest("admin/getAdminExerciseSuggestions/",a.exerciseChoices).then(function(d){a.exerciseSuggestedList=d.data.exerciseSuggestion,$.each(a.exerciseSuggestedList,function(b,c){c.exerciseId==a.selectedExercise.exerciseid?a.exerciseExists=!0:a.exerciseExists=!1}),a.exerciseExists?(errorMessage(c,"Exercise already exists!!"),a.selectedExercise="",a.isAddExercise=!0,a.getSuggestedExercise(),a.exerciseChoices.activitytype=a.exerciseChoices.activitytype.toString(),a.exerciseChoices.patienttype=a.exerciseChoices.patienttype.toString()):(a.exerciseChoices.exerciseid=a.selectedExercise.exerciseid,a.exerciseChoices.activitytype=parseInt(a.exerciseChoices.activitytype),a.exerciseChoices.patienttype=parseInt(a.exerciseChoices.patienttype),b.postRequest("admin/addAdminExerciseSuggestions/",a.exerciseChoices).then(function(b){successMessage(c,"Successfully Added!!"),a.selectedExercise="",a.isAddExercise=!0,a.getSuggestedExercise(),a.exerciseChoices.activitytype=a.exerciseChoices.activitytype.toString(),a.exerciseChoices.patienttype=a.exerciseChoices.patienttype.toString()}))})},a.removeSuggestExercise=function(d){a.exerciseChoices.activitytype=parseInt(a.exerciseChoices.activitytype),a.exerciseChoices.patienttype=parseInt(a.exerciseChoices.patienttype),a.exerciseChoices.exerciseid=d,b.postRequest("admin/deleteAdminExerciseSuggestions/",a.exerciseChoices).then(function(b){successMessage(c,"Successfully Removed!!"),a.getSuggestedExercise(),a.exerciseChoices.activitytype=a.exerciseChoices.activitytype.toString(),a.exerciseChoices.patienttype=a.exerciseChoices.patienttype.toString()})},a.init=function(){a.getSuggestedExercise(),a.isAddExercise=!0},a.init()}]);
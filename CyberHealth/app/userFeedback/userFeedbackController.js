var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination","ui.bootstrap"]);adminApp.controller("UserFeedbackController",["$scope","requestHandler","Flash","$routeParams",function(a,b,c,d){a.currentPage=1,a.getUserFeedBackDetails=function(){$("#checkAll").removeAttr("checked","checked"),a.loaded=!0,a.offset=(a.currentPage-1)*a.itemsPerPage,a.limit=a.currentPage*a.itemsPerPage,a.searchText||(a.searchText=""),a.params={limit:a.limit,offset:a.offset,search:a.searchText},b.postRequest("admin/getFeedback/",a.params).then(function(b){a.userFeedbackList=b.data.feedbackList,$.each(a.userFeedbackList,function(a,b){null==b.mobile&&(b.mobile="N/A")}),a.total_count=b.data.totalrecords,a.loaded=!1,a.isChecked()})},a.searchFeedbackDetails=function(){a.currentPage=1,a.getUserFeedBackDetails()},a.feedbackid=[],a.isChecked=function(){a.total_count>0&&$.each(a.userFeedbackList,function(b,c){1==document.getElementById("checkAll").checked?(a.feedbackid.push(c.feedbackid),$("#"+c.feedbackid).attr("checked","checked"),a.removeDisable=!1,a.selected=!0):0==document.getElementById("checkAll").checked&&(a.feedbackid=[],$("#"+c.feedbackid).prop("checked",!1),a.removeDisable=!0,a.selected=!1)})},a.selectedFeedback=function(b){var c=a.feedbackid.indexOf(b);c>-1?(document.getElementById("checkAll").checked=!1,a.feedbackid.splice(c,1),0==a.feedbackid.length&&(a.removeDisable=!0)):(a.removeDisable=!1,a.feedbackid.push(b))},a.removeFeedback=function(){document.getElementById("checkAll").checked=!1,"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),b.postRequest("admin/deleteFeedback/",{feedbackid:a.feedbackid}).then(function(b){a.getUserFeedBackDetails(),successMessage(c,"Successfully Removed"),a.removeDisable=!0})},a.removeFeedbackSingle=function(d){a.feedbackid=[],a.feedbackid.push(d),"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),b.postRequest("admin/deleteFeedback/",{feedbackid:a.feedbackid}).then(function(b){a.getUserFeedBackDetails(),successMessage(c,"Successfully Removed"),a.removeDisable=!0})},a.viewFeedback=function(c){$(function(){$("#lean_overlay").fadeTo(1e3),$("#category").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),b.postRequest("admin/getFeedbackDetail/",{feedbackid:c}).then(function(b){a.userFeedbackDetails=b.data.feedbackDetail,null==a.userFeedbackDetails.mobile&&(a.userFeedbackDetails.mobile="N/A")}),$(".modal_close").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()}),a.init=function(){a.itemsPerPage=10,a.searchText="",a.getUserFeedBackDetails(),a.removeDisable=!0},a.init()}]);
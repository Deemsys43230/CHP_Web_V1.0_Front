var coachApp=angular.module("coachApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate"]);coachApp.controller("CoachSubscriptionController",["$scope","requestHandler","Flash","$location",function(a,b,c,d){a.activeClass={subscriptionPanel:"active"};var e="";a.doGetCoachSubscriptionDetails=function(){b.getRequest("coachSubscriptionDetail/","").then(function(b){a.subscriptionDetail=b.data["Coach Subscription Detail"][0],0==a.subscriptionDetail.onemonth_amount&&(a.subscriptionDetail.onemonth_amount=""),a.subscriptionDetail.onemonth_amount=a.subscriptionDetail.onemonth_amount.toString(),null!=a.subscriptionDetail.threemonth_percentage&&(a.subscriptionDetail.threemonth_percentage=a.subscriptionDetail.threemonth_percentage.toString(),a.disablethreemonth=!0),null!=a.subscriptionDetail.sixmonth_percentage&&(a.subscriptionDetail.sixmonth_percentage=a.subscriptionDetail.sixmonth_percentage.toString(),a.disablesixmonth=!0),a.doCalculatesubscription(),e=angular.copy(a.subscriptionDetail)},function(a){errorMessage(c,"Please Try again later")})},a.doUpdateSubscriptionDetails=function(){b.putRequest("updateSubscriptionDetailByCoach/",a.subscriptionDetail).then(function(b){successMessage(c,"Successfully Updated!"),a.doGetCoachSubscriptionDetails()},function(){errorMessage(c,"Please try again later")})},a.doCalculatesubscription=function(){void 0===a.subscriptionDetail.onemonth_amount||void 0===a.subscriptionDetail.threemonth_percentage?(a.totalthreemonthamount=0,a.percentagethreemonthamount=0):(a.totalthreemonthamount=3*a.subscriptionDetail.onemonth_amount,a.totalthreemonthamount=a.totalthreemonthamount.toFixed(2),a.percentagethreemonthamount=3*a.subscriptionDetail.onemonth_amount-3*a.subscriptionDetail.onemonth_amount*a.subscriptionDetail.threemonth_percentage/100,a.percentagethreemonthamount=a.percentagethreemonthamount.toFixed(2)),void 0===a.subscriptionDetail.onemonth_amount||void 0===a.subscriptionDetail.sixmonth_percentage?(a.totalsixmonthamount=0,a.percentagesixmonthamount=0):(a.totalsixmonthamount=6*a.subscriptionDetail.onemonth_amount,a.totalsixmonthamount=a.totalsixmonthamount.toFixed(2),a.percentagesixmonthamount=6*a.subscriptionDetail.onemonth_amount-6*a.subscriptionDetail.onemonth_amount*a.subscriptionDetail.sixmonth_percentage/100,a.percentagesixmonthamount=a.percentagesixmonthamount.toFixed(2))},a.doClearValue=function(){0==a.disablethreemonth&&(a.subscriptionDetail.threemonth_percentage=null,a.percentagethreemonthamount=a.totalthreemonthamount),0==a.disablesixmonth&&(a.subscriptionDetail.sixmonth_percentage=null,a.percentagesixmonthamount=a.totalsixmonthamount)},a.isCleanSubscriptionDetails=function(){return angular.equals(e,a.subscriptionDetail)},a.doGetCoachSubscriptionDetails()}]);
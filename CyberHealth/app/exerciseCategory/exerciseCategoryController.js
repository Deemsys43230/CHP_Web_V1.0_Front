var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination"]);adminApp.controller("ExerciseCategoryController",["$scope","requestHandler","Flash","$location",function(a,b,c,d){a.activeClass={exercisecategory:"active"};var e="";a.doGetAllExerciseCategory=function(){a.loaded=!0,b.getRequest("admin/listofCategories/","").then(function(b){a.exerciseCategoryList=b.data.Category,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()}),a.doAddExerciseCategory=function(){a.loaded=!0,b.postRequest("admin/insertorupdateExerciseCategory/",a.exerciseCategory).then(function(b){0==b.data.Response_status?errorMessage(c,"Exercise&nbsp;Category&nbsp;already&nbsp;exists"):1==b.data.Response_status&&(a.doGetAllExerciseCategory(),successMessage(c,"Exercise Category Successfully Added"),a.loaded=!1,a.paginationLoad=!0)},function(){errorMessage(c,"Please try again later!")})},a.doViewExerciseCategory=function(d){a.title="View Exercise Category",$(function(){$("#lean_overlay").fadeTo(1e3),$("#exerciseCategoryView").fadeIn(600),$(".common_model").show()}),a.loaded=!0,b.postRequest("admin/getCategoryDetail/",{categoryid:d}).then(function(b){a.exerciseCategory=b.data.IndividualtypeData,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")}),$(".modal_close").click(function(){$(".common_model").hide(),$("#exerciseCategoryView").hide(),$("#lean_overlay").hide()}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#exerciseCategoryView").hide(),$("#lean_overlay").hide()})},a.doEditExerciseCategory=function(d){a.isNew=!1,a.title="Edit Exercise Category",a.exerciseCategoryAddForm.$setPristine(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#exerciseCategory").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),a.loaded=!0,b.postRequest("admin/getCategoryDetail/",{categoryid:d}).then(function(b){e=angular.copy(b.data.Category),a.exerciseCategory=b.data.Category,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")}),$(".modal_close").click(function(){$(".common_model").hide(),$("#exerciseCategory").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#exerciseCategory").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},a.doUpdateExerciseCategory=function(){a.loaded=!0,delete a.exerciseCategory.status,b.postRequest("admin/insertorupdateExerciseCategory/",a.exerciseCategory).then(function(b){a.loaded=!1,a.paginationLoad=!0,0==b.data.Response_status&&(a.doGetAllExerciseCategory(),errorMessage(c,"Exercise already used, can't updated!")),1==b.data.Response_status&&(a.doGetAllExerciseCategory(),successMessage(c,"Exercise Category Successfully Updated"))},function(){errorMessage(c,"Please try again later!")})},a.doEnableDisableExerciseCategory=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),a.loaded=!0,b.postRequest("admin/enableordisableCategory/",{categoryid:d}).then(function(b){a.loaded=!1,0==b.data.Response_status&&(a.doGetAllExerciseCategory(),errorMessage(c,"Exercise Category mapped, can't disable!")),1==b.data.Response_status&&(a.doGetAllExerciseCategory(),successMessage(c,"Exercise Category Successfully Updated"))},function(){errorMessage(c,"Please try again later!")})},a.doDeleteExerciseCategory=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),a.loaded=!0,b.postRequest("admin/deleteCategory/",{categoryid:d}).then(function(b){a.loaded=!1,0==b.data.Response_status&&(a.doGetAllExerciseCategory(),errorMessage(c,"Exercise category mapped, can't delete!")),1==b.data.Response_status&&(successMessage(c,"Exercise Category Successfully Deleted"),a.doGetAllExerciseCategory())},function(){errorMessage(c,"Please try again later!")})},a.reset=function(){a.exerciseCategory={},a.exerciseCategory.categoryname="",a.title="Add Exercise Category",a.isNew=!0,a.exerciseCategoryAddForm.$setPristine(),$(function(){$(".common_model").show(),a.shouldBeOpen=!0})},a.init=function(){a.paginationLoad=!1,a.doGetAllExerciseCategory()},a.init(),a.isClean=function(){return angular.equals(e,a.exerciseCategory)},a.verifyDuplicate=function(){var b,c;for(b=a.inputs.concat().sort(function(a,b){return a.levelname>b.levelname?1:a.levelname<b.levelname?-1:0}),c=0;c<a.inputs.length;c++)b[c].isDuplicate=b[c-1]&&b[c-1].levelname==b[c].levelname||b[c+1]&&b[c+1].levelname==b[c].levelname,a.error=b[c].isDuplicate}}]);
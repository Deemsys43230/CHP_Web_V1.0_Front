var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","summernote","angularUtils.directives.dirPagination"]);adminApp.controller("LatestNewsController",["$scope","requestHandler","Flash","$location","siteMenuService",function(a,b,c,d,e){a.isNew=!0,a.title="Add Latest News",a.siteMenuList=e,$.each(a.siteMenuList,function(a,b){2==b.id?b.active="active":b.active=""}),a.options={height:250},a.doGetLatestNews=function(){a.loaded=!0,b.getRequest("admin/getLatestNews/","").then(function(b){a.news=b.data.News,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},a.doAddLatestNews=function(){b.postRequest("admin/insertorupdateLatestNews/",a.latest).then(function(a){successMessage(c,"Successfully Added"),d.path("latest-news")},function(){errorMessage(c,"Please try again later!")})},a.doEnableDisableLatestNews=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),b.postRequest("admin/disableLatestNews/",{newsid:d}).then(function(b){a.doGetLatestNews(),successMessage(c,"Successfully Updated")},function(){errorMessage(c,"Please try again later!")})},a.init=function(){a.paginationLoad=!1,a.doGetLatestNews()},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()})}]),adminApp.controller("LatestNewsEditController",["$scope","requestHandler","Flash","$location","$routeParams","siteMenuService",function(a,b,c,d,e,f){a.siteMenuList=f,$.each(a.siteMenuList,function(a,b){2==b.id?b.active="active":b.active=""}),a.options={height:250};var g="";a.doGetLatestNewsByID=function(){a.isNew=!1,a.title="Edit Latest News",b.getRequest("admin/getLatestNewsById/"+e.id,"").then(function(b){g=angular.copy(b.data.News),a.latest=b.data.News},function(){errorMessage(c,"Please try again later!")})},a.doUpdateLatestNews=function(){b.putRequest("admin/insertorupdateLatestNews/",a.latest).then(function(a){successMessage(c,"Successfully Updated"),d.path("latest-news")},function(){errorMessage(c,"Please try again later!")})},a.isClean=function(){return angular.equals(g,a.latest)},a.doGetLatestNewsByID()}]),adminApp.filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),adminApp.filter("startsWithLetterNews",function(){return function(a,b){var c=[],d=new RegExp(b,"i");if(a)for(var e=0;e<a.length;e++){var f=a[e];(d.test(f.title)||d.test(f.datetime))&&c.push(f)}else;return c}});var commonApp=angular.module("commonApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate"]);commonApp.controller("NewsUserController",["$scope","requestHandler","Flash","$routeParams","$location",function(a,b,c,d,e){a.doGetNewsByUser=function(){b.getRequest("getLatestNewsByUser/","").then(function(b){a.usernewslist=b.data.News},function(){errorMessage(c,"Please try again later!")})},a.doGetNewsDetailsByUser=function(d){$("html, body").animate({scrollTop:0},600),b.getRequest("getLatestNewsDetail/"+d,"").then(function(b){a.usernewsdetails=b.data.News},function(){errorMessage(c,"Please try again later!")})},a.doGetNewsByUser(),a.doGetNewsDetailsByUser(d.id)}]),commonApp.filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),commonApp.filter("toSec",function(){return function(a){if(a){dateArgs=a.match(/\d{2,4}/g),year=dateArgs[2],month=parseInt(dateArgs[1])-1,day=dateArgs[0],hour=dateArgs[3],minutes=dateArgs[4];var b=new Date(year,month,day,hour,minutes).getTime();return b||""}return""}});
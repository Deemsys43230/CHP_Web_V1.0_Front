var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination","ui.bootstrap","userDashboardServiceModule"]);adminApp.controller("AdminFoodSuggestionController",["$scope","requestHandler","Flash","UserDashboardService",function(a,b,c,d){a.activeClass={adminfoodsuggestion:"active"},a.foodSearchResult=[],a.userFood={},a.userFood.sessionid=1,a.inputChanged=function(b){if(b.length>=3){a.loadingFoods=!0,0==a.foodSearchResult.length&&(a.loadingFoods=!0);var c=d.searchFoodByAdmin(b,a.userFood.sessionid);return c.then(function(b){return a.foodSearchResult=b,a.loadingFoods=!1,a.foodSearchResult})}return $(".dropdown-menu").animate({scrollTop:0},0),{}},a.foodChoices={},a.foodSelected=function(){a.isAddFood=!1},a.getSuggestedFood=function(){delete a.foodChoices.foodid,b.postRequest("admin/getAdminFoodSuggestions/",a.foodChoices).then(function(b){a.foodSuggestedList=b.data.foodSuggestion})},a.addSuggestFood=function(){a.foodExists=!1,$.each(a.foodSuggestedList,function(b,c){c.foodId===a.selectedFood.foodid&&(a.foodExists=!0)}),a.foodExists?(errorMessage(c,"Food already exists!!"),a.selectedFood="",a.isAddFood=!0,a.foodChoices.country=a.foodChoices.country.toString(),a.foodChoices.session=a.foodChoices.session.toString(),a.foodChoices.patienttype=a.foodChoices.patienttype.toString()):(a.foodChoices.foodid=a.selectedFood.foodid,a.foodChoices.country=parseInt(a.foodChoices.country),a.foodChoices.session=parseInt(a.foodChoices.session),a.foodChoices.patienttype=parseInt(a.foodChoices.patienttype),b.postRequest("admin/addAdminFoodSuggestions/",a.foodChoices).then(function(b){successMessage(c,"Successfully Added!!"),a.selectedFood="",a.isAddFood=!0,a.getSuggestedFood(),a.foodChoices.country=a.foodChoices.country.toString(),a.foodChoices.session=a.foodChoices.session.toString(),a.foodChoices.patienttype=a.foodChoices.patienttype.toString()}))},a.removeSuggestFood=function(d){a.foodChoices.country=parseInt(a.foodChoices.country),a.foodChoices.session=parseInt(a.foodChoices.session),a.foodChoices.patienttype=parseInt(a.foodChoices.patienttype),a.foodChoices.foodid=d,b.postRequest("admin/deleteAdminFoodSuggestions/",a.foodChoices).then(function(b){successMessage(c,"Successfully Removed!!"),a.getSuggestedFood(),a.foodChoices.country=a.foodChoices.country.toString(),a.foodChoices.session=a.foodChoices.session.toString(),a.foodChoices.patienttype=a.foodChoices.patienttype.toString()})},a.init=function(){a.getSuggestedFood(),a.isAddFood=!0},a.init()}]);
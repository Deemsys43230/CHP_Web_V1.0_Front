var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination"]);adminApp.controller("ExerciseLevelController",["$scope","requestHandler","Flash","$location",function(a,b,c,d){a.activeClass={exerciselevel:"active"};var e="";a.doGetAllExerciseLevel=function(){a.loaded=!0,b.getRequest("admin/listofLevels/","").then(function(b){a.exerciseLevelList=b.data.ExerciseLevel_Data,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()}),a.doAddExerciseLevel=function(){a.loaded=!0,b.postRequest("admin/insertorupdateExerciseLevel/",a.exerciseLevel).then(function(b){0==b.data.Response_status?errorMessage(c,"Exercise&nbsp;Level&nbsp;already&nbsp;exists"):1==b.data.Response_status&&(a.doGetAllExerciseLevel(),successMessage(c,"Exercise Level Successfully Added"),a.loaded=!1,a.paginationLoad=!0)},function(){errorMessage(c,"Please try again later!")})},a.doEditExerciseLevel=function(d){a.isNew=!1,a.title="Edit Exercise Level",a.exerciseLevelAddForm.$setPristine(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#exerciseLevel").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),a.loaded=!0,b.postRequest("admin/getLevelDetail/",{levelid:d}).then(function(b){e=angular.copy(b.data.ExerciseLevel_Data),a.exerciseLevel=b.data.ExerciseLevel_Data,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")}),$(".modal_close").click(function(){$(".common_model").hide(),$("#exerciseLevel").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#exerciseLevel").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},a.doUpdateExerciseCategory=function(){a.loaded=!0,delete a.exerciseLevel.status,b.postRequest("admin/insertorupdateExerciseLevel/",a.exerciseLevel).then(function(b){a.loaded=!1,a.paginationLoad=!0,0==b.data.Response_status&&(a.doGetAllExerciseLevel(),errorMessage(c,"Exercise already used, can't updated!")),1==b.data.Response_status&&(a.doGetAllExerciseLevel(),successMessage(c,"Exercise Level Successfully Updated"))},function(){errorMessage(c,"Please try again later!")})},a.doEnableDisableExerciseLevel=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),a.loaded=!0,b.postRequest("admin/enableordisableLevel/",{levelid:d}).then(function(b){a.loaded=!1,0==b.data.Response_status&&(a.doGetAllExerciseLevel(),errorMessage(c,"Exercise Level mapped, can't disable!")),1==b.data.Response_status&&(a.doGetAllExerciseLevel(),successMessage(c,"Exercise Level Successfully Updated"))},function(){errorMessage(c,"Please try again later!")})},a.doDeleteExerciseLevel=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),a.loaded=!0,b.postRequest("admin/deleteLevel/",{levelid:d}).then(function(b){a.loaded=!1,0==b.data.Response_status&&(a.doGetAllExerciseLevel(),errorMessage(c,"Exercise Level mapped, can't delete!")),1==b.data.Response_status&&(successMessage(c,"Exercise Level Successfully Deleted"),a.doGetAllExerciseLevel())},function(){errorMessage(c,"Please try again later!")})},a.reset=function(){a.exerciseLevel={},a.exerciseLevel.levelname="",a.title="Add Exercise Level",a.isNew=!0,a.exerciseLevelAddForm.$setPristine(),$(function(){$(".common_model").show(),a.shouldBeOpen=!0})},a.init=function(){a.paginationLoad=!1,a.doGetAllExerciseLevel()},a.init(),a.isClean=function(){return angular.equals(e,a.exerciseLevel)},a.verifyDuplicate=function(){var b,c;for(b=a.inputs.concat().sort(function(a,b){return a.levelname>b.levelname?1:a.levelname<b.levelname?-1:0}),c=0;c<a.inputs.length;c++)b[c].isDuplicate=b[c-1]&&b[c-1].levelname==b[c].levelname||b[c+1]&&b[c+1].levelname==b[c].levelname,a.error=b[c].isDuplicate}}]);
var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination"]);adminApp.controller("FoodCategoryController",function(e,o,a){e.activeClass={category:"active"},e.isNew=!0,e.title="Add Category";var t="";e.doGetAllFoodCategory=function(){e.loaded=!0,o.getRequest("admin/getFoodCategory/","").then(function(o){e.foodCategoryList=o.data.Food_Category,e.loaded=!1,e.paginationLoad=!0},function(){errorMessage(a,"Please try again later!")})},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()}),e.doAddFoodCategory=function(){e.loaded=!0,o.postRequest("admin/checkCategoryNameExists/",e.foodCategory).then(function(t){1==t.data.Response_status?(errorMessage(a,"Category&nbsp;already&nbsp;exists"),e.loaded=!1):0==t.data.Response_status&&o.postRequest("admin/insertFoodCategory/",e.foodCategory).then(function(){e.doGetAllFoodCategory(),successMessage(a,"Successfully Added"),e.loaded=!1,e.paginationLoad=!0},function(){errorMessage(a,"Please try again later!")})})},e.doEditFoodCategory=function(s){e.isNew=!1,e.title="Edit Category",e.foodCategoryAddForm.$setPristine(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#category").fadeIn(600),$(".common_model").show(),e.shouldBeOpen=!0}),e.loaded=!0,o.postRequest("admin/getfoodCategorybyId/",{categoryid:s}).then(function(o){t=angular.copy(o.data.Food_Category),e.foodCategory=o.data.Food_Category,e.loaded=!1,e.paginationLoad=!0},function(){errorMessage(a,"Please try again later!")}),$(".modal_close").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),e.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),e.shouldBeOpen=!1})},e.doUpdateFoodCategory=function(){e.loaded=!0,o.postRequest("admin/checkCategoryNameExists/",e.foodCategory).then(function(t){0==t.data.Response_status?o.putRequest("admin/editFoodCategory/",e.foodCategory).then(function(){e.doGetAllFoodCategory(),successMessage(a,"Successfully Updated"),e.loaded=!1,e.paginationLoad=!0},function(){errorMessage(a,"Please try again later!")}):1==t.data.Response_status&&(errorMessage(a,"Category&nbsp;already&nbsp;exists"),e.loaded=!1)})},e.doEnableDisableFoodCategory=function(t){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),e.loaded=!0,o.putRequest("admin/enableOrDisableCategoryStatus/",{categoryid:t}).then(function(o){e.loaded=!1,0==o.data.Response_status&&(e.doGetAllFoodCategory(),errorMessage(a,"Category&nbsp;Paired&nbsp;with&nbsp;other&nbsp;food")),1==o.data.Response_status&&(e.doGetAllFoodCategory(),successMessage(a,"Successfully Updated"))},function(){errorMessage(a,"Please try again later!")})},e.doDeleteFoodCategory=function(t){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),e.loaded=!0,o.deleteRequest("admin/deleteFoodCategory/",{categoryid:t}).then(function(o){e.loaded=!1,0==o.data.Response_status&&(e.doGetAllFoodCategory(),errorMessage(a,"Having&nbsp;foods&nbsp;can't&nbsp;delete")),1==o.data.Response_status&&(e.doGetAllFoodCategory(),successMessage(a,"Successfully Updated"))},function(){errorMessage(a,"Please try again later!")})},e.reset=function(){e.foodCategory={},e.foodCategoryAddForm.$setPristine(),e.foodCategory.categoryname="",e.title="Add Category",e.isNew=!0,"none"!=$(".search-list-form").css("display")&&$(".search-list-form").hide(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#category").fadeIn(600),$(".common_model").show(),e.shouldBeOpen=!0}),$(".modal_close").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),e.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),e.shouldBeOpen=!1})},e.init=function(){e.paginationLoad=!1,e.doGetAllFoodCategory()},e.isClean=function(){return angular.equals(t,e.foodCategory)}});
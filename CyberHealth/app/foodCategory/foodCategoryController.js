var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination"]);adminApp.controller("FoodCategoryController",["$scope","requestHandler","Flash",function(a,b,c){a.activeClass={category:"active"},a.isNew=!0,a.title="Add Category";var d="";a.doGetAllFoodCategory=function(){a.loaded=!0,b.getRequest("admin/getFoodCategory/","").then(function(b){a.foodCategoryList=b.data.Food_Category,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()}),a.doAddFoodCategory=function(){a.loaded=!0,b.postRequest("admin/checkCategoryNameExists/",a.foodCategory).then(function(d){1==d.data.Response_status?(errorMessage(c,"Category&nbsp;already&nbsp;exists"),a.loaded=!1):0==d.data.Response_status&&b.postRequest("admin/insertFoodCategory/",a.foodCategory).then(function(b){a.doGetAllFoodCategory(),successMessage(c,"Successfully Added"),a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})})},a.doEditFoodCategory=function(e){a.isNew=!1,a.title="Edit Category",a.foodCategoryAddForm.$setPristine(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#category").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),a.loaded=!0,b.postRequest("admin/getfoodCategorybyId/",{categoryid:e}).then(function(b){d=angular.copy(b.data.Food_Category),a.foodCategory=b.data.Food_Category,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")}),$(".modal_close").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},a.doUpdateFoodCategory=function(){a.loaded=!0,b.postRequest("admin/checkCategoryNameExists/",a.foodCategory).then(function(d){0==d.data.Response_status?b.putRequest("admin/editFoodCategory/",a.foodCategory).then(function(b){a.doGetAllFoodCategory(),successMessage(c,"Successfully Updated"),a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")}):1==d.data.Response_status&&(errorMessage(c,"Category&nbsp;already&nbsp;exists"),a.loaded=!1)})},a.doEnableDisableFoodCategory=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),a.loaded=!0,b.putRequest("admin/enableOrDisableCategoryStatus/",{categoryid:d}).then(function(b){a.loaded=!1,0==b.data.Response_status&&(a.doGetAllFoodCategory(),errorMessage(c,"Category&nbsp;Paired&nbsp;with&nbsp;other&nbsp;food")),1==b.data.Response_status&&(a.doGetAllFoodCategory(),successMessage(c,"Successfully Updated"))},function(){errorMessage(c,"Please try again later!")})},a.doDeleteFoodCategory=function(d){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),a.loaded=!0,b.deleteRequest("admin/deleteFoodCategory/",{categoryid:d}).then(function(b){a.loaded=!1,0==b.data.Response_status&&(a.doGetAllFoodCategory(),errorMessage(c,"Having&nbsp;foods&nbsp;can't&nbsp;delete")),1==b.data.Response_status&&(a.doGetAllFoodCategory(),successMessage(c,"Successfully Updated"))},function(){errorMessage(c,"Please try again later!")})},a.reset=function(){a.foodCategory={},a.foodCategoryAddForm.$setPristine(),a.foodCategory.categoryname="",a.title="Add Category",a.isNew=!0,"none"!=$(".search-list-form").css("display")&&$(".search-list-form").hide(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#category").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),$(".modal_close").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#category").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},a.init=function(){a.paginationLoad=!1,a.doGetAllFoodCategory()},a.isClean=function(){return angular.equals(d,a.foodCategory)}}]);
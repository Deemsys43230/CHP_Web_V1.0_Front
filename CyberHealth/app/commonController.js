var commonApp=angular.module("commonApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate"]);commonApp.controller("CommonController",["$scope","requestHandler","Flash","$routeParams","$sce","$rootScope","$timeout","$window",function(a,b,c,d,e,f,g,h){a.countFrom=0,h.emi=0,"password"==d.id&&($(function(){$(".popupContainer").addClass("left-36"),$("#lean_overlay").fadeTo(1e3),$("#modal").fadeIn(600),$(".reset_password").hide(),$(".user_register").hide(),$(".secret_question").hide(),$(".user_register1").hide(),$(".user_login").show(),$(".new_password_form").hide(),$(".header_title").text("Login")}),successMessage(c,"Reset Password Successfull! Please Login")),"logout"==d.id&&($(function(){$("#lean_overlay").fadeTo(1e3),$("#section-modal").fadeIn(600),$(".common_model").show()}),$(".modal_close").click(function(){$(".common_model").hide(),$("#section-modal").hide(),$("#lean_overlay").hide()}),$(".relogin").click(function(){$("#section-modal").hide()}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#section-modal").hide(),$("#lean_overlay").hide()})),a.doGetNewsByUser=function(){b.getRequest("getLatestNewsByUser/","").then(function(b){a.usernewslist=b.data.News,newscarousel()},function(){errorMessage(c,"Please try again later!")})},a.doGetTestimonialsByUser=function(){b.getRequest("getTestimonialListByUser/","").then(function(b){a.usertestimoniallist=b.data.Testimonials},function(){errorMessage(c,"Please try again later!")})},a.doGetDashboardCount=function(){b.getRequest("getStatistics/","").then(function(b){a.adminCountList=b.data.Stats,a.memberCount=a.adminCountList.membercount,a.exerciseCount=a.adminCountList.exercisecount,a.foodCount=a.adminCountList.foodcount,a.courseCount=a.adminCountList.publishedcourses})},a.units=1,a.test=function(b){"mUnit"==b?(a.units=1,a.height="",a.weight=""):b&&(a.units=2,a.feet="",a.inches="",a.weight="")},a.showForm=!0,a.calculateEMI=function(b){if(a.bmiUnder=!1,a.bmiHealthy=!1,a.bmiOver=!1,a.bmiObese=!1,a.minWeight=0,a.maxWeight=0,a.weightRange="",b){if(a.showForm=!1,1==a.units){a.weightCal=a.weight/.4536,a.heightCal=a.height/2.54,a.emiValue=(703*a.weightCal/(a.heightCal*a.heightCal)).toFixed(2);var c=a.height/100;a.minWeight=18.6*c*c,a.maxWeight=24.9*c*c,a.weightRange=""+Math.round(a.minWeight)+" and "+Math.round(a.maxWeight)+" kgs"}else if(2==a.units){var d=12*a.feet+1*a.inches;a.emiValue=(703*a.weight/(d*d)).toFixed(2),a.minWeight=18.6*d*d/703,a.maxWeight=24.9*d*d/703,a.weightRange=""+Math.round(a.minWeight)+" and "+Math.round(a.maxWeight)+" lbs"}h.emi=a.emiValue,callGraph(),a.emiValue<18.5?a.bmiUnder=!0:a.emiValue>18.5&&a.emiValue<25?a.bmiHealthy=!0:a.emiValue>25&&a.emiValue<30?a.bmiOver=!0:a.emiValue>30&&(a.bmiObese=!0)}},a.returnToCalculate=function(){a.showForm=!0},g(function(){a.doGetNewsByUser(),a.doGetTestimonialsByUser(),a.doGetDashboardCount()})}]),commonApp.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),commonApp.filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),commonApp.filter("toSec",function(){return function(a){dateArgs=a.match(/\d{2,4}/g),year=dateArgs[2],month=parseInt(dateArgs[1])-1,day=dateArgs[0],hour=dateArgs[3],minutes=dateArgs[4];var b=new Date(year,month,day,hour,minutes).getTime();return b||""}}),commonApp.directive("dateValidation",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){if(a){var b="/"==a.charAt(2)&&"/"==a.charAt(5)&&10==a.length&&checkDate(a);d.$setValidity("invalidDate",b)}return b?a:"undefined"}),checkDate=function(a){var b=parseInt(a.substr(0,2)),c=parseInt(a.substr(3,4))-1,d=parseInt(a.substr(6,9)),e=new Date,f=new Date(d,c,b),g=new Date(1800,0,0);return!(f>e||f<g||b>31||c>11)}}}});
var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","summernote","angularUtils.directives.dirPagination"]);adminApp.controller("DiseaseControlController",["$scope","requestHandler","Flash","$location","siteMenuService",function(a,b,c,d,e){a.isNew=!0,a.contentBtnTxt="Add CDC",a.title="Add CDC",a.siteMenuList=e,$.each(a.siteMenuList,function(a,b){b.href==d.path().substr(1)?b.active="active":b.active=""}),a.imageAdded=!1,a.fileNameChanged=function(b){a.imageAdded||(b.files.length>0?(a.inputContainsFile=!1,a.imageAdded=!0):(a.inputContainsFile=!0,a.imageAdded=!1))},a.imageUpload=!1,a.doUpdateImage=function(){a.imageUpload=!0},a.doGetHealthyListByAdmin=function(){a.loaded=!0,b.getRequest("admin/getHealthyLivingList/","").then(function(b){a.adminhealthytips=b.data.healthyliving,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},a.doEnableDisableHealthyTips=function(d){b.postRequest("admin/enableordisableHealthyLiving/",{syndicateid:d}).then(function(b){a.doGetHealthyListByAdmin(),successMessage(c,"Successfully Updated")},function(){errorMessage(c,"Please try again later!")})},a.doAddHealthyTips=function(){var e=document.getElementById("thumbnail_image_base64").value,f=document.getElementById("banner_image_base64").value;""==f?delete a.healthyliving.imageurl:a.healthyliving.imageurl=f,""==e?delete a.healthyliving.thumbnailurl:a.healthyliving.thumbnailurl=e,b.postRequest("admin/insertorupdateHealthyLiving/",a.healthyliving).then(function(a){successMessage(c,"Successfully Added"),d.path("cdc-list")},function(){errorMessage(c,"Please try again later!")}),a.contentBtnTxt="Submitting..."},a.deleteHealthyTips=function(d){var e=confirm("Are you sure you want to delete the Content?");1==e&&b.postRequest("admin/deleteHealthyLiving/",{syndicateid:d}).then(function(b){a.doGetHealthyListByAdmin(),successMessage(c,"Successfully Deleted")},function(){errorMessage(c,"Please try again later!")})},a.convertImgToBase64=function(a,b,c){var d=new Image;d.crossOrigin="Anonymous",d.onload=function(){var a=document.createElement("CANVAS"),d=a.getContext("2d");a.height=this.height,a.width=this.width,d.drawImage(this,0,0);var e=a.toDataURL(c||"image/jpg");b(e),a=null},d.src=a},a.init=function(){a.paginationLoad=!1,a.doGetHealthyListByAdmin()},$(".image-editor-banner").cropit(),$(".image-editor-thumbnail").cropit()}]),adminApp.controller("DiseaseControlEditController",["$scope","requestHandler","Flash","$location","$routeParams","$sce","siteMenuService",function(a,b,c,d,e,f,g){a.isNew=!1,a.contentBtnTxt="Save Changes",a.siteMenuList=g,$.each(a.siteMenuList,function(a,b){b.href==d.path().substr(1)?b.active="active":b.active=""}),a.title="Edit CDC";a.doGetHealthyTipsAdminByID=function(){b.getRequest("admin/getHealthyLivingListById/"+e.sid,"").then(function(b){a.myBannerImgSrc=f.trustAsResourceUrl(b.data.healthyliving.imageurl+"?decache="+Math.random()),a.myThumbnailImgSrc=f.trustAsResourceUrl(b.data.healthyliving.thumbnailurl+"?decache="+Math.random()),a.healthyliving=b.data.healthyliving,$(".image-editor-banner").cropit({imageState:{src:a.healthyliving.imageurl+"?decache="+Math.random()}}),$(".image-editor-thumbnail").cropit({imageState:{src:a.healthyliving.thumbnailurl+"?decache="+Math.random()}})},function(){errorMessage(c,"Please try again later!")})},a.imageAdded=!1,a.fileNameChanged=function(b){a.imageAdded||(b.files.length>0?(a.inputContainsFile=!1,a.imageAdded=!0):(a.inputContainsFile=!0,a.imageAdded=!1))},a.convertImgToBase64=function(a,b,c){var d=new Image;d.crossOrigin="Anonymous",d.onload=function(){var a=document.createElement("CANVAS"),d=a.getContext("2d");a.height=this.height,a.width=this.width,d.drawImage(this,0,0);var e=a.toDataURL(c||"image/jpg");b(e),a=null},d.src=a},a.imageUpload=!1,a.doUpdateImage=function(){a.imageUpload=!0},a.doUpdateHealthyTips=function(){var e=document.getElementById("thumbnail_image_base64").value,f=document.getElementById("banner_image_base64").value;""==f?delete a.healthyliving.imageurl:a.healthyliving.imageurl=f,""==e?delete a.healthyliving.thumbnailurl:a.healthyliving.thumbnailurl=e,b.putRequest("admin/insertorupdateHealthyLiving/",a.healthyliving).then(function(a){successMessage(c,"Successfully Updated"),d.path("cdc-list")},function(){errorMessage(c,"Please try again later!")}),a.contentBtnTxt="Submitting..."},a.doGetHealthyTipsAdminByID()}]),adminApp.filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),adminApp.directive("validFile",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("change",function(){a.$apply(function(){d.$setViewValue(b.val()),d.$render()})})}}}),adminApp.directive("ngModel",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("change",function(){a.$apply(function(){d.$setViewValue(b.val()),d.$render()})})}}}),adminApp.directive("calendar",function(){return{require:"ngModel",link:function(a,b,c,d){$(b).datepicker({dateFormat:"dd/mm/yy",maxDate:new Date,onSelect:function(b){a.$apply(function(){d.$setViewValue(b)})}})}}});
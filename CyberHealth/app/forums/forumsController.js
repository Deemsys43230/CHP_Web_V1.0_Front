var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","summernote","angularUtils.directives.dirPagination"]);adminApp.controller("ForumsController",["$scope","requestHandler","Flash","$location","siteMenuservice",function(e,t,s,o,r){e.isNew=!0,e.title="Add Forum",e.activeClass.forums="active",e.siteMenuList=r,$.each(e.siteMenuList,function(e,t){1==t.id?t.active="active":t.active=""}),e.doGetForums=function(){e.loaded=!0,t.getRequest("getListOfForumsByAdmin/","").then(function(t){e.forums=t.data["Forum details"],e.loaded=!1,e.paginationLoad=!0},function(){errorMessage(s,"Please try again later!")})},e.doAddForum=function(){t.postRequest("insertForum/",e.forumDetails).then(function(){successMessage(s,"Successfully Added"),o.path("forums")},function(){errorMessage(s,"Please try again later!")})},e.doBlockUnblockForum=function(o){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),t.putRequest("admin/blockorUnblockForum/",{postid:o}).then(function(){e.doGetForums(),successMessage(s,"Successfully Updated")},function(){errorMessage(s,"Please try again later!")})},e.init=function(){e.paginationLoad=!1,e.doGetForums()},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()})}]),adminApp.controller("ForumsEditController",["$scope","requestHandler","Flash","$routeParams","siteMenuService","$location",function(e,t,s,o,r,n){e.activeClass.forums="active",e.siteMenuList=r,$.each(e.siteMenuList,function(e,t){1==t.id?t.active="active":t.active=""});var u="";e.doGetForumsByID=function(){e.isNew=!1,e.title="Edit Forum",e.loaded=!0,t.postRequest("getForumDetailByAdmin/",{postid:o.id}).then(function(t){u=angular.copy(t.data["Forum details"]),console.log("ori",u),e.forumDetails=t.data["Forum details"],console.log("adsd",e.forumDetails),e.loaded=!1},function(){errorMessage(s,"Please try again later!")})},e.doGetForumAnswers=function(){t.postRequest("admin/listofAnswersbyAdmin/",{postid:o.id}).then(function(t){e.forumAnswers=t.data.ForumDiscussionData},function(){errorMessage(s,"Please try again later!")})},e.doBlockUnblockForumAnswer=function(o){t.postRequest("admin/blockorUnblock/",{ansid:o}).then(function(){successMessage(s,"Successfully Updated"),e.doGetForumAnswers()},function(){errorMessage(s,"Please try again later!")})},e.doPostForumAnswers=function(){t.postRequest("postAnswer/",{comments:e.comments,postid:o.id}).then(function(){successMessage(s,"Comment Posted Successfully!"),e.doGetForumAnswers(),e.comments="",e.userCommentForm.$setPristine()},function(){errorMessage(s,"Please try again later!")})},e.doUpdateForum=function(){"none"!=$(".search-list-form").css("display")&&($(".search-list-form").hide(),$(".search-list-form").show(2400)),t.putRequest("updateForum/",e.forumDetails).then(function(){successMessage(s,"Successfully Updated"),n.path("forums")},function(){errorMessage(s,"Please try again later!")})},e.isClean=function(){return console.log(angular.equals(u,e.forumDetails)),angular.equals(u,e.forumDetails)},e.viewInit=function(){e.doGetForumsByID(),e.doGetForumAnswers()},e.editForumInit=function(){e.doGetForumsByID()}}]),adminApp.filter("startsWithLetterForum",function(){return function(e,t){var s=[],o=new RegExp(t,"i");if(e)for(var r=0;r<e.length;r++){var n=e[r];(o.test(n.posttitle)||o.test(n.postdescription))&&s.push(n)}else;return s}}),adminApp.filter("html",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),adminApp.filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]);var userApp=angular.module("userApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination"]);userApp.controller("ForumsUserController",["$scope","requestHandler","Flash","$routeParams","$location",function(e,t,s,o,r){e.isNew=!0,e.title="Add Forum",e.activeClass.forums="active",e.options={height:250},e.abuseDisable=!1,e.doAddForum=function(){t.postRequest("insertForum/",e.forumDetails).then(function(t){e.postid=t.data["Forum details"].postid,successMessage(s,"Successfully Added"),r.path("forumDetails/"+e.postid)},function(){errorMessage(s,"Please try again later!")})},e.doGetForumsByUser=function(){e.loaded=!0,e.forum={status:"forum-view"},t.getRequest("getListOfForumsByUserAndCoach/","").then(function(s){e.userforumlist=s.data["Forum details"],$.each(e.userforumlist,function(e,s){t.postRequest("listofAnswers/",{postid:s.postid}).then(function(e){s.totalcomment=e.data.ForumDiscussionData.length})}),$("#showMostViewed").hide(),$("#showMostViewed").show(700),e.loaded=!1},function(){errorMessage(s,"Please try again later!")})},e.doGetForumDetailsByUser=function(){t.getRequest("getUserId/","").then(function(r){e.loginuserid=r.data.User_Profile.userid,t.postRequest("getForumDetailByUserAndCoach/",{postid:o.id}).then(function(t){e.userforumdetails=t.data["Forum details"],e.loginuserid===e.userforumdetails.userid?e.userCheck=!0:e.userCheck=!1},function(){errorMessage(s,"Please try again later!")})})},e.doGetForumAnswers=function(){t.postRequest("listofAnswers/",{postid:o.id}).then(function(t){e.forumAnswers=t.data.ForumDiscussionData},function(){errorMessage(s,"Please try again later!")})},e.doPostForumAnswers=function(){t.postRequest("postAnswer/",{comments:e.comments,postid:o.id}).then(function(){successMessage(s,"Your Comment Successfully Posted!"),e.doGetForumAnswers(),e.comments="",e.userCommentForm.$setPristine()},function(){errorMessage(s,"Please try again later!")})},e.doMarkPostAsAbuse=function(){t.postRequest("abuseCount/",{postid:o.id}).then(function(){successMessage(s,"Thanks for your evaluation!")},function(){errorMessage(s,"Please try again later!")})},e.doMarkCommentAsAbuse=function(e){t.postRequest("MarkasAbuse/",{ansid:e}).then(function(){successMessage(s,"Thanks for your evaluation!")},function(){errorMessage(s,"Please try again later!")})},e.doGetForumsByUser(),e.init=function(){e.doGetForumDetailsByUser(),e.doGetForumAnswers()}}]),userApp.controller("ForumsUserEditController",["$scope","requestHandler","Flash","$routeParams","$location",function(e,t,s,o,r){var n="";e.doGetForumDetailsByUserEdit=function(){e.isNew=!1,e.title="Edit Forum",t.postRequest("getForumDetailByUserAndCoach/",{postid:o.id}).then(function(t){n=angular.copy(t.data["Forum details"]),e.forumDetails=t.data["Forum details"]},function(){errorMessage(s,"Please try again later!")})},e.doGetForumAnswers=function(){t.postRequest("listofAnswers/",{postid:o.id}).then(function(t){e.forumAnswers=t.data.ForumDiscussionData},function(){errorMessage(s,"Please try again later!")})},e.doUpdateForum=function(){t.putRequest("updateForum/",e.forumDetails).then(function(t){e.postid=t.data["Forum details"].postid,successMessage(s,"Successfully Updated"),r.path("forumDetails/"+e.postid)},function(){errorMessage(s,"Please try again later!")})},e.doGetForumsByUser=function(){e.loaded=!0,e.forum={status:"forum-view"},t.getRequest("getListOfForumsByUserAndCoach/","").then(function(s){e.userforumlist=s.data["Forum details"],$.each(e.userforumlist,function(e,s){t.postRequest("listofAnswers/",{postid:s.postid}).then(function(e){s.totalcomment=e.data.ForumDiscussionData.length})}),e.loaded=!1,$("#showMostViewed").hide(),$("#showMostViewed").show(300)},function(){errorMessage(s,"Please try again later!")})},e.isClean=function(){return angular.equals(n,e.forumDetails)},e.doGetForumsByUser(),e.Editinit=function(){e.doGetForumDetailsByUserEdit(),e.doGetForumAnswers()},e.Editinit()}]),userApp.filter("html",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),userApp.filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),userApp.filter("startsWithLetterForum",function(){return function(e,t){var s=[],o=new RegExp(t,"i");if(e)for(var r=0;r<e.length;r++){var n=e[r];(o.test(n.username)||o.test(n.posttitle)||o.test(n.postdescription))&&s.push(n)}else;return s}});var coachApp=angular.module("coachApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate","angularUtils.directives.dirPagination"]);coachApp.controller("ForumsCoachController",["$scope","requestHandler","Flash","$routeParams","$location",function(e,t,s,o,r){e.isNew=!0,e.title="Add Forum",e.activeClass.forums="active",e.options={height:250},e.abuseDisable=!1,e.doAddForum=function(){t.postRequest("insertForum/",e.forumDetails).then(function(t){e.postid=t.data["Forum details"].postid,successMessage(s,"Successfully Added"),r.path("forumDetails/"+e.postid)},function(){errorMessage(s,"Please try again later!")})},e.doGetForumsByUser=function(){e.loaded=!0,e.forum={status:"forum-view"},t.getRequest("getListOfForumsByUserAndCoach/","").then(function(s){e.userforumlist=s.data["Forum details"],$.each(e.userforumlist,function(e,s){t.postRequest("listofAnswers/",{postid:s.postid}).then(function(e){s.totalcomment=e.data.ForumDiscussionData.length})}),$("#showMostViewed").hide(),$("#showMostViewed").show(300),e.loaded=!1},function(){errorMessage(s,"Please try again later!")})},e.doGetForumDetailsByUser=function(){t.getRequest("getUserId/","").then(function(r){e.loginuserid=r.data.User_Profile.userid,t.postRequest("getForumDetailByUserAndCoach/",{postid:o.id}).then(function(t){e.userforumdetails=t.data["Forum details"],e.loginuserid===e.userforumdetails.userid?e.userCheck=!0:e.userCheck=!1},function(){errorMessage(s,"Please try again later!")})})},e.doGetForumAnswers=function(){t.postRequest("listofAnswers/",{postid:o.id}).then(function(t){e.forumAnswers=t.data.ForumDiscussionData},function(){errorMessage(s,"Please try again later!")})},e.doPostForumAnswers=function(){t.postRequest("postAnswer/",{comments:e.comments,postid:o.id}).then(function(){successMessage(s,"Your Comment Successfully Posted!"),e.doGetForumAnswers(),e.comments="",e.userCommentForm.$setPristine()},function(){errorMessage(s,"Please try again later!")})},e.doMarkPostAsAbuse=function(){t.postRequest("abuseCount/",{postid:o.id}).then(function(){successMessage(s,"Thanks for your evaluation!"),e.abuseDisable=!0},function(){errorMessage(s,"Please try again later!")})},e.doMarkCommentAsAbuse=function(e){t.postRequest("MarkasAbuse/",{ansid:e}).then(function(){successMessage(s,"Thanks for your evaluation!")},function(){errorMessage(s,"Please try again later!")})},e.doGetForumsByUser(),e.init=function(){e.doGetForumDetailsByUser(),e.doGetForumAnswers()}}]),coachApp.controller("ForumsCoachEditController",["$scope","requestHandler","Flash","$routeParams","$location",function(e,t,s,o,r){e.activeClass.forums="active";var n="";e.doGetForumDetailsByUserEdit=function(){e.isNew=!1,e.title="Edit Forum",t.postRequest("getForumDetailByUserAndCoach/",{postid:o.id}).then(function(t){n=angular.copy(t.data["Forum details"]),e.forumDetails=t.data["Forum details"]},function(){errorMessage(s,"Please try again later!")})},e.doGetForumAnswers=function(){t.postRequest("listofAnswers/",{postid:o.id}).then(function(t){e.forumAnswers=t.data.ForumDiscussionData},function(){errorMessage(s,"Please try again later!")})},e.doUpdateForum=function(){t.putRequest("updateForum/",e.forumDetails).then(function(t){e.postid=t.data["Forum details"].postid,successMessage(s,"Successfully Updated"),r.path("forumDetails/"+e.postid)},function(){errorMessage(s,"Please try again later!")})},e.doGetForumsByUser=function(){e.loaded=!0,e.forum={status:"forum-view"},t.getRequest("getListOfForumsByUserAndCoach/","").then(function(s){e.userforumlist=s.data["Forum details"],$.each(e.userforumlist,function(e,s){t.postRequest("listofAnswers/",{postid:s.postid}).then(function(e){s.totalcomment=e.data.ForumDiscussionData.length})}),e.loaded=!1,$("#showMostViewed").hide(),$("#showMostViewed").show(300)},function(){errorMessage(s,"Please try again later!")})},e.isClean=function(){return angular.equals(n,e.forumDetails)},e.doGetForumsByUser(),e.Editinit=function(){e.doGetForumDetailsByUserEdit(),e.doGetForumAnswers()},e.Editinit()}]),coachApp.filter("html",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),coachApp.filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),coachApp.filter("startsWithLetterForum",function(){return function(e,t){var s=[],o=new RegExp(t,"i");if(e)for(var r=0;r<e.length;r++){var n=e[r];(o.test(n.username)||o.test(n.posttitle)||o.test(n.postdescription))&&s.push(n)}else;return s}});
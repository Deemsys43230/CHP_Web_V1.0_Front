var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate"]);adminApp.controller("FoodMeasureController",["$scope","requestHandler","Flash",function(a,b,c){a.activeClass={measure:"active"},a.isNew=!0,a.title="Add Measure";var d="";a.reset=function(){a.list={},a.measureForm.$setPristine(),a.list.measurename="",a.isNew=!0,a.title="Add Measure","none"!=$(".search-list-form").css("display")&&$(".search-list-form").hide(),$(function(){$("#lean_overlay").fadeTo(1e3),$("#measure").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),$(".modal_close").click(function(){$(".common_model").hide(),$("#measure").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#measure").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},a.doViewAllFoodMeasure=function(){a.loaded=!0,b.getRequest("admin/viewAllfoodMeasure/","").then(function(b){a.measureList=b.data.viewAllfoodMeasure,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")})},a.doAddMeasure=function(){b.postRequest("admin/insertfoodMeasure/",a.list).then(function(b){0==b.data.Response_status?errorMessage(c,"Measure&nbsp;already&nbsp;exists"):1==b.data.Response_status&&(a.doViewAllFoodMeasure(),successMessage(c,"Successfully Added"))})},a.doEditFoodMeasure=function(e){a.isNew=!1,a.title="Edit Measure",$(function(){$("#lean_overlay").fadeTo(1e3),$("#measure").fadeIn(600),$(".common_model").show(),a.shouldBeOpen=!0}),a.loaded=!0,b.postRequest("admin/getfoodMeasurebyId/",{measureid:e}).then(function(b){d=angular.copy(b.data.Food_Measure),a.list=b.data.Food_Measure,a.loaded=!1,a.paginationLoad=!0},function(){errorMessage(c,"Please try again later!")}),$(".modal_close").click(function(){$(".common_model").hide(),$("#measure").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1}),$("#lean_overlay").click(function(){$(".common_model").hide(),$("#measure").hide(),$("#lean_overlay").hide(),a.shouldBeOpen=!1})},a.doUpdateMeasure=function(){b.putRequest("admin/updatefoodMeasure/",a.list).then(function(b){0==b.data.Response_status&&(a.doViewAllFoodMeasure(),errorMessage(c,"Measure&nbsp;mapped&nbsp;with&nbsp;food")),1==b.data.Response_status&&(a.doViewAllFoodMeasure(),successMessage(c,"Successfully Added"))},function(){errorMessage(c,"Please try again later!")})},a.doEnableDisable=function(d){b.postRequest("admin/enableordisableFoodMeasure/",{measureid:d}).then(function(b){0==b.data.Response_status&&(a.doViewAllFoodMeasure(),errorMessage(c,"Measure&nbsp;used&nbsp;by&nbsp;food")),1==b.data.Response_status&&(a.doViewAllFoodMeasure(),successMessage(c,"Successfully Updated"))},function(){errorMessage(c,"Please try again later!")})},a.doDelete=function(d){b.postRequest("admin/deletefoodMeasure/",{measureid:d}).then(function(b){0==b.data.Response_status&&(a.doViewAllFoodMeasure(),errorMessage(c,"Measure&nbsp;used&nbsp;by&nbsp;food")),1==b.data.Response_status&&(a.doViewAllFoodMeasure(),successMessage(c,"Successfully Deleted"))},function(){errorMessage(c,"Please try again later!")})},a.init=function(){a.paginationLoad=!1,a.doViewAllFoodMeasure()},a.isClean=function(){return angular.equals(d,a.list)},$(".show-list-search").click(function(){$(".search-list-form").toggle(300),$(".search-list-form input").focus()})}]);
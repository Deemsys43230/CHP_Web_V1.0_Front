<div class="page-banner" ng-cloak class="ng-cloak">
    <div class="container">
        <div class="row">
             <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="display-style pull-right">
                    <a href="#dashboard" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back <span class="hidden-md hidden-sm">to Dashboard</span></a> 
                    <div flash-message="2000" class="col-lg-3 col-md-3 col-sm-3 pull-right"></div>                   
                </div>
                <h5 class="classic-title"><span><a href="#my-members"><i class="fa fa-money"></i>&nbsp;&nbsp;CLIENTS</a></span>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-invitations"><i class="fa fa-dollar"></i>&nbsp;&nbsp;INVITATIONS</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-compose-message"><i class="fa fa-dollar"></i>&nbsp;&nbsp;SEND MESSAGE</a></h5>
            </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="col-md-2 no-padding">
                      <h4 class="classic-title" style="margin-left:20px;"><span>Groups</span></h4>
                    <ul class="sidebar-menu remove-style">
                        <li ng-repeat="group in groupsList" ng-class="{'active':group.id==selectedGroupId}" ng-click="doFilterGroup(group.id)">
                            <a href=""><i class="fa fa-group"></i> &nbsp;{{group.groupname}}</a>
                        </li>
                    </ul>
                    </div>
                    <div class="col-md-10">   
                    <div class="display-style pull-right">
                        <a id="group-message" href="#groupMessage" class="btn-sm btn-success pull-right margin-right-20" ng-show="selectedGroupId!=-1"><i class="fa fa-envelope"></i> Send <span class="hidden-md hidden-sm">Message</span></a>                    
                    </div>
                    <h4 class="classic-title" style="margin-left:20px;"><span>Clients</h4>
                    
                    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4 margin-bottom-10" ng-repeat="client in filteredClients=(myClients|complexFilter:{'groupid':selectedGroupId})" ng-init="$last ? doIntializeLeanModal() : null">
                      <a href="#member-view/{{client.userid}}" >
                            <div class="client-card" ng-class="{'badge1':client.unreadmessagecount>0}" data-badge="{{client.unreadmessagecount}}">
                            <img class="client-card-img" src="{{client.imageurl}}"/>
                            <div class="client-card-details">
                                <h5><strong>{{client.name}}</strong></h5>
                                <hr/>
                                <p>{{client.emailid}}</p>
                                <p>{{client.phone}}</p>
                                <a href="#confirmDelete" class="confirm-delete-modal remove-text-color" ng-click="setRemovingUserId(client.userid)"><i class="fa fa-trash"></i>&nbsp;Remove Client</a>
                            </div>
                            </div>    
                        </a>                         
                    </div>
                     <div ng-show="myClients.length==0||!filteredClients.length" class="text-center margin-top-50">
                        <img src="../../images/no-coach-small.png" width="120" height="120"/>
                        <h3 class="text-gray">NO CLIENTS FOUND!!!</h3><br/><br/><br/>
                    </div>
                     </div>
                    </div>
           
        </div>
</div>


<!-- For send group message popup -->

<!-- coach group Popup-->
<div id="groupMessage" class="popupContainer width-40" style="display:none;left:37%!important;">
    <header class="popupHeader width-100">
        <span class="header_title">Send Group Message</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- measure Form -->
        <div class="common_model">
            <form name="groupMessageForm">
                <p class="pull-right" ng-show="showCount && myadvice.description.length"><span class="text-bold text-red">{{ (350-myadvice.description.length) }}</span> Characters left&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                <p class="pull-right" ng-hide="showCount && myadvice.description.length">&nbsp;</p>
                <h5 class="text-muted">Compose Your Message :</h5>
                <textarea class="height-150 forum-textarea" name="description" ng-model="myadvice.description" maxlength="350" ng-blur="showCount=0" ng-focus="showCount=1" required></textarea>
                 <span ng-show="adviceForm.description.$dirty&&adviceForm.description.$invalid">
                                  <span class="error-message textarea-errormessage40" ng-show="adviceForm.description.$error.required"><span>Required.</span></span>
                             </span>

                <div class="action_btns margin-top-20">
                   <a ng-class="{modal_close:groupMessageForm.$invalid}" class="btn btn_red" ng-disabled="groupMessageForm.$invalid || isClean()" ng-click="doSendGroupMessage()">Send Message </a></div>
                </div>
            </form>
        </div>
    </section>
</div>

<!-- delete section popup-->
<div id="confirmDelete" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Confirmation</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png"/></div><br/>
            <h5 class="text-center">Are you sure want to remove this client?</h5>{{removingUser}}
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_red modal_close" ng-click="removeClientFromList()">Yes</a></div>
                <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">No</a></div>
            </div>
        </div>
    </section>
</div>


<script type="text/javascript" src="../../js/script.js"></script>
<script type="text/javascript">
    $("#group-message").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(".confirm-delete-modal").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(function(){
        $(".common_model").show();
    })
</script>
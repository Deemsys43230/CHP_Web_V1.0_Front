<div class="page-banner" ng-cloak class="ng-cloak">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="display-style pull-right">
                    <a href="#dashboard" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back <span class="hidden-md hidden-sm">to Dashboard</span></a> 
                    <div flash-message="2000" class="pull-right"></div>                   
                </div>
                <h5 class="classic-title"><span><a href="#my-members"><i class="fa fa-money"></i>&nbsp;&nbsp;CLIENTS</a></span>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-invitations"><i class="fa fa-dollar"></i>&nbsp;&nbsp;INVITATIONS</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-compose-message"><i class="fa fa-dollar"></i>&nbsp;&nbsp;SEND MESSAGE</a></h5>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                <div class="col-md-2 no-padding">
                    <h4 class="classic-title" style="margin-left:20px;"><span>Groups</span></h4>
                    <ul class="sidebar-menu remove-style">
                        <li ng-repeat="group in groupsList" ng-class="{'active':group.id==selectedGroupId}" ng-click="doFilterGroup(group.id)">
                            <a href=""><i class="fa fa-group"></i> &nbsp;{{group.groupname}}</a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-10">   
                    <h4 class="classic-title" style="margin-left:20px;"><span>Clients</h4>
                    
                    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4 margin-bottom-10" ng-repeat="client in filteredClients=(myClients|complexFilter:{'groupid':selectedGroupId})" ng-init="$last ? doIntializeLeanModal() : null">
                        <a href="#member-view/{{client.userid}}">
                            <div class="client-card" ng-class="{'badge1':client.unreadmessagecount>0}" data-badge="{{client.unreadmessagecount}}">
                                <img class="client-card-img" src="{{client.imageurl}}"/>
                                <div class="client-card-details">
                                    <h5><strong>{{client.name}}</strong></h5>
                                    <hr/>
                                    <p>{{client.emailid}}</p>
                                    <p>{{client.phone}}</p>
                                    <hr/>
                                    <a href="#assignModel" class="assign-modal assign-text-color" ng-show="client.groupid==null" ng-click="setAssignUserId(client.userid)"><i class="fa fa-users"></i>&nbsp;&nbsp;Assign Group</a><a href="#reassignModel" class="re-assign-modal assign-text-color" ng-hide="client.groupid==null" ng-click="setReassignUserId(client.userid,client.groupid)"><i class="fa fa-users"></i>&nbsp;&nbsp;Reassign Group</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#confirmDelete" class="confirm-delete-modal remove-text-color" ng-click="setRemovingUserId(client.userid)"><i class="fa fa-trash"></i>&nbsp;Remove Client</a>
                                </div>
                            </div>    
                        </a>                         
                    </div>
                    <div ng-show="myClients.length==0||!filteredClients.length" class="text-center margin-top-50">
                        <img src="../../images/no-coach-small.png" width="120" height="120"/>
                        <h3 class="text-gray">NO CLIENTS FOUND!!!</h3><br/><br/><br/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Remove user section popup-->
<div id="confirmDelete" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Confirmation</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png"/></div><br/>
            <h5 class="text-center">Are you sure want to remove this client?</h5>{{removingUser}}
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_red modal_close" ng-click="removeClientFromList()">Yes</a></div>
                <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">No</a></div>
            </div>
        </div>
    </section>
</div>

<!-- user Assign to group section popup-->
<div id="assignModel" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Assign to Group</span>
        <span class="modal_close" ng-click="doGetGroupList()"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <div class="common_model1">
            <form name="assigngroupForm" novalidate>
                <div class="col-md-12 col-lg-12 col-sm-12 margin-bottom-10 font-weight">From:</div>
                <div class="col-md-12 col-lg-12 col-sm-12 margin-bottom-10">{{assignGroupName}}</div>
                <div class="col-md-12 col-lg-12 col-sm-12 margin-bottom-10 font-weight">To:</div>
                <div class="row padding-right-0">
                    <select class="assign-control" ng-model="assignGroup" required>
                        <option value="">--Select--</option>
                        <option value="{{group.id}}" ng-repeat="group in groupList">{{group.groupname}}</option>
                    </select>   
                </div>
                <div class="action_btns margin-top-20">
                    <div class="one_half"><a href="" class="btn btn_blue modal_close" ng-click="doAssignGroup()" ng-disabled="!assignGroup || assignGroup.length == 0">Assign</a></div>
                    <div class="one_half last modal_close"><a href="" class="btn btn_red modal_close" onclick="return false;" ng-click="doGetGroupList()">Cancel</a></div>
                </div>
            </form>
        </div>
    </section>
</div>

<!-- user reassign to group section popup-->
<div id="reassignModel" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Reassign to Group</span>
        <span class="modal_close" ng-click="doGetGroupList()"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <div class="common_model2">
            <div class="col-md-12 col-lg-12 col-sm-12 margin-bottom-10 font-weight">From:</div>
            <div class="col-md-12 col-lg-12 col-sm-12 margin-bottom-10">{{reAssigngroupName}}</div>
            <div class="col-md-12 col-lg-12 col-sm-12 margin-bottom-10 font-weight">To:</div>
            <div class="row margin-top-20">
                <select class="assign-control" ng-model="assignGroup" required>
                    <option value="">--Select--</option>
                    <option value="{{group.id}}" ng-repeat="group in groupList" ng-hide="(group.id == assignGroupId)">{{group.groupname}}</option>
                </select>
            </div>
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_blue modal_close" ng-click="doAssignGroup()" ng-disabled="!assignGroup || assignGroup.length == 0">Reassign</a></div>
                <div class="one_half last modal_close"><a href="" class="btn btn_red modal_close" onclick="return false;" ng-click="doGetGroupList()">Cancel</a></div>
            </div>
        </div>
    </section>
</div>

<script type="text/javascript" src="../../js/script.js"></script>
<script type="text/javascript">
   // $("#assignModel").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    //$("#group-message").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(".confirm-delete-modal").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(function(){
        $(".common_model").show();
    })


    /*$(".assign-modal").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(function(){
        alert("when");
        $(".common_model1").show();
    })*/
</script>
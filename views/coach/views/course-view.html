<style>
    table.sorting-table {cursor: move;}
    table tr.sorting-row td {background-color: #fff; box-shadow: 0 0 2px #ccc;padding: 3px 5px 0 5px;}
    table tr.sorting-row td.sorter {background-color: transparent !important;box-shadow:none!important;}
    table td.sorter {color: #f80; width: 25px; cursor: move;}
</style>

<!-- Start Page Banner -->

<div class="page-banner">
    <div class="container">
        <div class="row">
            <div class="col-md-12 min-height-450">
                <a href="#course" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back</a>
                <span ng-show="courseDetails.canedit==1 && courseSections.length!=0">
                    <a href="#courseSectionAdd/{{courseDetails.courseid}}" class="back-button pull-right margin-left-5"><i class="fa fa-plus-circle"></i> Add Section</a>
                    <a ng-click="reviewModel()" id="modal_trigger1" href="" class="back-button pull-right margin-left-5"><i class="fa fa-paper-plane"></i> Send to Review</a>
                </span>
                <div flash-message="2000" class="col-md-3 pull-right no-padding"></div>
                <h4 class="classic-title">
                    <span ng-show="courseDetails.canedit==0">Course View</span>
                    <span ng-show="courseDetails.canedit==1">Edit Course</span>&nbsp;
                </h4>
                <div class="row margin-top-10 margin-bottom-10">
                    <div class="col-md-3">
                        <div class="height-190"><img class="max-height-180" ng-src="{{courseDetails.promoimage | trusted}}"></div>
                        <h5 class="row text-muted">
                            <span class="col-md-5">Category</span>
                            <span class="col-md-7">: {{courseDetails.categoryname}}</span>
                            <span class="col-md-5">Price</span>
                            <span class="col-md-7">
                                : <span ng-show="courseDetails.price==0" class="text-green text-bold">Free</span>
                                <span ng-hide="courseDetails.price==0" class="text-red text-bold">{{courseDetails.price}} $</span>
                            </span>
                            <span class="col-md-5">Created On</span>
                            <span class="col-md-7">: {{courseDetails.createdon}}</span>
                            <span class="col-md-5">Students</span>
                            <span class="col-md-7">
                                : <span ng-show="courseDetails.enrollcount==0">----</span>
                                <span ng-hide="courseDetails.enrollcount==0">{{courseDetails.enrollcount}}</span>
                            </span>
                            <span class="col-md-5">Reviewed On</span>
                            <span class="col-md-7">
                                : <span ng-show="!courseDetails.reviewdate">----</span>
                                <span ng-hide="!courseDetails.reviewdate">{{courseDetails.reviewdate}}</span>
                            </span>
                            <span class="col-md-5">Published On</span>
                            <span class="col-md-7">
                                : <span ng-show="!courseDetails.publishedon">----</span>
                                <span ng-hide="!courseDetails.publishedon">{{courseDetails.publishedon}}</span>
                            </span>
                        </h5>
                        <span ng-show="courseDetails.canedit==1"><a href="#courseEdit/{{courseDetails.courseid}}" class="main-button green_back margin-top-10">Edit Basic Info</a></span>
                        <span ng-show="courseDetails.canedit==1"><a ng-click="deleteModel()" id="modal_trigger" href="" class="main-button red_back margin-top-10">Delete course</a></span>
                    </div>
                    <div class="col-md-9 no-padding">
                        <h2>{{courseDetails.coursename}}</h2>
                        <div ng-if="loaded">
                            <div class="loader-style">
                                <div class="loader"></div>
                            </div>
                        </div>
                        <h5 class="margin-top-5 text-muted">{{courseDetails.coursesubtitle}}</h5>
                        <p class="margin-top-10 margin-right-20" ng-bind-html="courseDetails.coursedescription | html"></p>
                        <div class="margin-top-15">
                            <div ng-show="courseSections.length==0 && courseDetails.canedit==1" class="margin-top-20">
                                <div class="col-md-5">
                                    <img class="pull-right" src="../../images/no-section.png"/>
                                </div>
                                <div class="col-md-7 margin-top-10">
                                    <h2 class="text-gray">no section added</h2>
                                    <a href="#courseSectionAdd/{{courseDetails.courseid}}" class="main-button margin-top-10">Add Section</a>
                                </div>
                            </div>
                            <div ng-show="courseDetails.canedit==0">
                                <h5 ng-repeat="section in courseSections" class="margin-bottom-5">Section {{section.sequenceno}} : <a href="#courseSection/{{section.sectionid}}">{{section.sectiontitle}}</a>&nbsp;&nbsp;&nbsp;<span ng-show="courseDetails.canedit==1"><a href="#courseSectionEdit/{{section.sectionid}}" class="fa fa-pencil"></a></span></h5>
                            </div>
                        </div>

                        <table attr-sample="thetable" ng-show="courseDetails.canedit==1">
                        <tbody>
                        <tr ng-repeat="section in courseSections">
                            <td class="sorter fa fa-arrows"></td>
                            <td>
                                <h5 class="margin-bottom-5">&nbsp;&nbsp;Section {{section.sequenceno}} :
                                    <a href="#courseSection/{{section.sectionid}}">{{section.sectiontitle}}</a>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <span ng-show="courseDetails.canedit==1">
                                            <a href="#courseSectionEdit/{{section.sectionid}}" title="Edit Section" class="fa fa-pencil"></a>&nbsp;&nbsp;
                                            <a href="" ng-click="sectionDeleteModel(section.sectionid)" title="Delete Section" class="fa fa-trash"></a>
                                        </span>
                                </h5>
                            </td>
                        </tr>
                        </tbody>
                        <tfoot hidden>
                        <tr>
                            <td colspan="4" id="logarea">&nbsp;</td>
                        </tr>
                        </tfoot>
                    </table>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- delete confirmation popup-->
<div id="modal" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Confirmation</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png"/></div><br/>
            <h5 class="text-center">It will delete entire data of this course<br/>Are you sure want to delete this course?</h5>
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_red modal_close" ng-click="doDeleteCourse()">Yes</a></div>
                <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">No</a></div>
            </div>
        </div>
    </section>
</div>


<!-- delete section popup-->
<div id="section-modal" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Confirmation</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png"/></div><br/>
            <h5 class="text-center">It will delete entire data of this section<br/>Are you sure want to delete this section?</h5>
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_red modal_close" ng-click="deleteSection()">Yes</a></div>
                <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">No</a></div>
            </div>
        </div>
    </section>
</div>

<!-- send for review course popup-->
<div id="review-modal" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Send Confirmation</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png"/></div><br/>
            <h5 class="text-center">You can't edit this course after<br/> sent to the review<br/><br/>Are you sure want to send this<br/> course for review?</h5>
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_red modal_close" ng-click="sendCourseToReview(courseDetails.courseid)">Yes</a></div>
                <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">No</a></div>
            </div>
        </div>
    </section>
</div>


<!-- End Page Banner -->

<script type="text/javascript" src="../../js/script.js"></script>
<script type="text/javascript" src="../../js/RowSorter.js"></script>

<script type="text/javascript">
    $("#modal_trigger").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $("#modal_trigger1").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
</script>

<script type="text/javascript">
    var logarea = document.getElementById("logarea");
    function log(text)
    {
        logarea.innerHTML = text;
    }
</script>



<div class="page-banner1" ng-cloak class="ng-cloak">
    <div id="w" class="clearfix">
        <div id="demography-content">
            <div class="col-lg-12 col-md-12 col-sm-12">

                <div flash-message="2000" class="col-lg-4 col-md-4 col-sm-4 pull-right no-padding"></div>

            <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#group-goal" aria-controls="home" role="tab" data-toggle="tab"><i class="fa fa-users"></i>&nbsp;GROUP GOAL</a></li>
                    <li role="presentation"><a href="#individualGoal" aria-controls="profile" role="tab" data-toggle="tab"><i class="fa fa-flash"></i>&nbsp;&nbsp;INDIVIDUAL GOAL</a></li>
                </ul>
                <div class="tab-content" style="padding: 10px;!important">
                    <a href="" class="back-button pull-right margin-left-5 modal-createGoal" ng-click="checkUserWeightEntry()"><i class="fa fa-plus-circle"></i> Create Goal</a>
                    <div role="tabpanel" class="tab-pane active" id="home">
                        <h5 class="classic-title"><span><a href="#group-goal"><i class="fa fa-bullseye"></i>&nbsp;&nbsp;MY GOALS</a></span>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#group-goal-request"><i class="fa fa-paper-plane"></i>&nbsp;&nbsp;GOAL REQUEST&nbsp;&nbsp;</a></h5>
                    </div>

            <div ng-if="loaded">
                <div class="loader-style">
                    <br/><br/><br/><br/>
                    <br/><br/><br/><br/><br/>
                    <div class="loader"></div>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12" ng-show="myGoalList.length>0">
              <table class="table table-striped table-bordered">
                    <thead>
                    <tr class="warning">
                        <th class="col-lg-2 col-md-2 col-sm-2">Title</th>
                        <th class="col-lg-2 col-md-2 col-sm-2">Description</th>
                        <th class="col-lg-2 col-md-2 col-sm-2">Duration</th>
                        <th class="col-lg-1 col-md-1 col-sm-1">Goal Type</th>
                        <th class="col-lg-1 col-md-1 col-sm-1">Status</th>
                        <th class="col-lg-1 col-md-1 col-sm-1">Participants</th>
                        <th class="col-lg-2 col-md-2 col-sm-2">Options</th>
                    </tr>
                    </thead>
                    <tbody >
                    <tr dir-paginate="goalList in myGoalList | orderBy:['goalstatus','-isowner','-goalid'] | itemsPerPage:8">
                        <td><span class="line-clamp-xxs" title="{{goalList.title}}">{{goalList.title}}</span></td>
                        <td><span class="line-clamp-xxs" title="{{goalList.description}}">{{goalList.description}}</span></td>
                        <td>{{goalList.startdate}} - {{goalList.enddate}}</td>
                        <td>
                            <span ng-show="goalList.goaltype==1">Weight Loss</span>
                            <span ng-show="goalList.goaltype==2">Weight Gain</span>
                        </td>
                        <td>
                            <span ng-show="goalList.goalstatus==1 && goalList.isExpired==0" class="text-orange">Active</span>
                            <span ng-show="goalList.goalstatus==1 && goalList.isExpired==1" class="text-red">Expired</span>
                            <span ng-show="goalList.goalstatus==2 && goalList.isExpired==1" class="text-green">Completed</span>
                            <span ng-show="goalList.goalstatus==2 && goalList.isExpired==0" class="text-green">Completed</span>
                        </td>
                        <td>{{goalList.goalMemberCount}}</td>
                        <td>
                            <a href="#group-goal-view/{{goalList.goalid}}" class="btn-xs btn-primary">View Details</a>
                            <a href="" ng-show="goalList.isowner==1 && goalList.goalMemberCount== 1" class="btn-xs btn-danger" ng-click="doConfirmation(goalList.goalid)">Delete</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <!-- Start Pagination -->
                <dir-pagination-controls ng-show="paginationLoad" direction-links="true"
                                         boundary-links="true"> </dir-pagination-controls>

                <!-- End Pagination -->
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 margin-top-50" ng-hide="myGoalList.length>0">
                <div class="col-lg-5 col-md-5 col-sm-5">
                    <img class="pull-right" src="../../images/no-goal.png" width="120" height="177">
                </div>
                <div class="col-lg-7 col-md-7 col-sm-7 margin-top-40">
                    <h1 class="text-gray margin-top-40">NO GOAL CREATED</h1>
                    <a href="" ng-click="doAddGoalPopup()" class="modal-createGoal main-button margin-top-20">Create Goal</a>
                </div>
            </div>
                    </div>
                </div>
        </div><!-- @end #content -->
    </div><!-- @end #w -->
</div>

<!-- create Goal popup-->
<div id="createGoal" class="popupContainer" style="display:none;left:37%!important;">
    <header class="popupHeader">
        <span class="header_title">Create Goal</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <form name="createGoalForm" novalidate>
                <p>Goal Title</p>
                <input type="text" name="title" ng-model="createGoal.title" maxlength="50" required focus-me="shouldBeOpen"/>
                <span ng-show="createGoalForm.title.$dirty&&createGoalForm.title.$invalid && !createGoalForm.title.$pristine">
                    <span class="error-message" ng-show="createGoalForm.title.$error.required"><span>Required.</span></span>
                </span>
                <div class="one_half">
                <p>Goal End Date</p>
                <input type="text" id="set-goal-date"  required/></div>
                <div class="one_half last margin-bottom-10">
                <p class="row" style="margin-left: -9px;margin-left: 0">Goal Target Weight&nbsp;<small>(<span ng-show="userProfile.unitPreference==1">Kgs</span><span ng-show="userProfile.unitPreference==2">lbs</span>)</small></p>
                   <span ng-show="userProfile.unitPreference==1">
                      <input type="text"  name="weightkgs" ng-model="createGoal.targetweight" ng-change="maxWeightCheck(createGoal.targetweight)" maxlength="5" required  validate-zero/>
                               <span class="error-message" ng-show="!createGoalForm.weightkgs.$error.required&&maxweight"><span>Please&nbsp;Enter&nbsp;Valid&nbsp;Weight.</span></span>
                               <span ng-show="createGoalForm.weightkgs.$dirty&&createGoalForm.weightkgs.$invalid">
                                    <span class="error-message" ng-show="createGoalForm.weightkgs.$error.required"><span>Required.</span></span>
                                    <span class="error-message" ng-show="!createGoalForm.weightkgs.$error.required&&createGoalForm.weightkgs.$error.validateZero"><span>Invalid&nbsp;Data.</span></span>
                               </span>
                   </span>
                   <span ng-show="userProfile.unitPreference==2">
                      <input type="text"  name="weightlbs" ng-model="createGoal.targetweight" required ng-change="maxCheck(createGoal.targetweight)" maxlength="6" validate-zero/>
                             <span class="error-message" ng-show="!createGoalForm.weightlbs.$error.required&&maxweight"><span>Please&nbsp;Enter&nbsp;Valid&nbsp;Weight.</span></span>
                             <span ng-show="createGoalForm.weightlbs.$dirty&&createGoalForm.weightlbs.$invalid">
                                  <span class="error-message" ng-show="createGoalForm.weightlbs.$error.required"><span>Required.</span></span>
                                  <span class="error-message" ng-show="!createGoalForm.weightlbs.$error.required&&createGoalForm.weightlbs.$error.validateZero"><span>Invalid&nbsp;Data.</span></span>
                             </span>
                   </span>
           <!-- <input type="text"  name="weight" ng-model="createGoal.targetweight" maxlength="5" required/>
                <span ng-show="createGoalForm.weight.$dirty&&createGoalForm.weight.$invalid">
                    <span class="error-message" ng-show="createGoalForm.weight.$error.required"><span>Required.</span></span>
                    <span class="error-message" ng-show="!createGoalForm.weight.$error.required&&createGoalForm.weight.$error.validateFloat1"><span>Invalid&nbsp;Data.</span></span>
                </span>-->
                </div>
                <p>Goal Type</p>
                <div class="row margin-bottom-5 margin-top-3">
                    <div class="col-lg-6 col-md-6 col-sm-6">
                        <input type="radio" id="1" class="height" name="sex" value="1" ng-model="createGoal.goaltype" required/>
                        <label for="1">&nbsp;&nbsp;&nbsp;&nbsp;Weight Loss</label>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6">
                        <input type="radio" id="2" class="height" name="sex" value="2" ng-model="createGoal.goaltype" required/>
                        <label for="2">&nbsp;&nbsp;&nbsp;&nbsp;Weight Gain</label>
                    </div>
                </div>
                <p>Goal Description</p>
                <span ng-show="createGoalForm.description.$dirty&&createGoalForm.description.$invalid&& !createGoalForm.description.$pristine">
                    <span class="error-message textarea-errormessage40" ng-show="createGoalForm.description.$error.required"><span>Required.</span></span>
                </span>
                <textarea type="text"class="height-100" name="description" ng-model="createGoal.description" required maxlength="230"></textarea>
                <div class="action_btns margin-top-20">
                    <div class="one_half"><a class="btn btn_red modal_close" onclick="return false" ng-disabled="createGoalForm.$invalid" ng-click="doCreateGoal()">Create Goal</a></div>
                    <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">Cancel</a></div>
                </div>
            </form>
        </div>
    </section>
</div>
<!-- Update Weight popup -->
<div id="updateWeight" class="popupContainer" style="display:none;left:37%!important;">
    <header class="popupHeader">
        <span class="header_title">Update Weight</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <form name="updateWeightForm" novalidate>
                <p>Current Weight <small>(<span ng-show="userProfile.unitPreference==1">Kgs</span><span ng-show="userProfile.unitPreference==2">lbs</span>)</small></p>
                <span ng-show="userProfile.unitPreference==1">
                  <input type="text"  name="weightkgs" ng-model="weightlog" maxlength="5" required validate-zero ng-change="maxWeightCheck(weightlog)"/>
                      <span class="error-message" ng-show="!updateWeightForm.weightkgs.$error.required&&maxweight"><span>Please&nbsp;Enter&nbsp;Valid&nbsp;Weight.</span></span>
                        <span ng-show="updateWeightForm.weightkgs.$dirty&&updateWeightForm.weightkgs.$invalid">
                            <span class="error-message" ng-show="updateWeightForm.weightkgs.$error.required"><span>Required.</span></span>
                            <span class="error-message" ng-show="!updateWeightForm.weightkgs.$error.required&&updateWeightForm.weightkgs.$error.validateZero"><span>Invalid&nbsp;Data.</span></span>
                        </span>
                </span>
                  <span ng-show="userProfile.unitPreference==2">
                      <input type="text"  name="weightlbs" ng-model="weightlog" required ng-change="maxCheck(weightlog)"  validate-zero maxlength="6"/>
                         <span class="error-message" ng-show="!updateWeightForm.weightlbs.$error.required&&maxweight"><span>Please&nbsp;Enter&nbsp;Valid&nbsp;Weight.</span></span>
                             <span ng-show="updateWeightForm.weightlbs.$dirty&&updateWeightForm.weightlbs.$invalid">
                                 <span class="error-message" ng-show="updateWeightForm.weightlbs.$error.required"><span>Required.</span></span>
                                 <span class="error-message" ng-show="!updateWeightForm.weightlbs.$error.required&&updateWeightForm.weightlbs.$error.validateZero"><span>Invalid&nbsp;Data.</span></span>
                         </span>
                  </span>
            <!--   <input type="text"  name="weight" ng-model="weightlog" maxlength="5" required valid-decimalnumber />
                <span ng-show="updateWeightForm.weight.$dirty&&updateWeightForm.weight.$invalid">
                    <span class="error-message" ng-show="updateWeightForm.weight.$error.required"><span>Required.</span></span>
                  &lt;!&ndash;  <span class="error-message" ng-show="!updateWeightForm.weight.$error.required&&updateWeightForm.weight.$error.validateFloat1"><span>Invalid&nbsp;Data.</span></span>&ndash;&gt;
                </span>-->
                <div class="action_btns margin-top-20">
                    <div class="one_half"><a class="btn btn_red" onclick="return false" ng-disabled="updateWeightForm.$invalid" ng-click="updateWeightLog(1)">Proceed</a></div>
                    <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">Cancel</a></div>
                </div>
            </form>
        </div>
    </section>
</div>
<!-- create coach popup-->
<div id="confirmation" class="popupContainer" style="display:none;left:37%!important;">
    <header class="popupHeader">
        <span class="header_title">Confirmation</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center">
                <img src="../../images/alert-ring.png" width="118" height="100"><br/><br/>
                <h5 class="text-muted">It will delete entire Goal..!<br/>Are you sure want to delete this Goal?</h5>
            </div>
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_red modal_close" ng-click="doDeleteGroup(deleteId)">Yes</a></div>
                <div class="one_half last modal_close"><a onclick="return false;" class="btn btn_blue">No</a></div>
            </div>
        </div>
    </section>
</div>

<input id="start" hidden/>
<input id="end" hidden/>

<script type="text/javascript" src="../../js/script.js"></script>

<script type="text/javascript">
    $(".modal-createGoal").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });

   /* setTimeout(function(){
        var options = {
            minDate : new Date,
            startDate : new Date,
            endDate : new Date,
            singleDatePicker:true
        };

        $('#set-goal-date').daterangepicker(options, function(start, end, label) {
            document.getElementById("start").value = start.format('DD/MM/YYYY');
            document.getElementById("end").value = end.format('DD/MM/YYYY');
        });
    },1000);*/
</script>
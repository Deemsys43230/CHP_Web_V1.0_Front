

<!-- Start Page Banner -->
<div class="page-banner1" ng-cloak class="ng-cloak">
    <div id="w" class="clearfix">
        <div id="demography-content" class="height-auto" ng-init="viewinit()">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="margin-rl">

                   <span ng-hide="courseDetails.enrollmentStatus==0" ng-if="courseDetails.role=='user'"> <a href="#my-courses" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back</a></span>
                   <span ng-show="courseDetails.enrollmentStatus==0" ng-if="courseDetails.role=='user'"><a href="#courses" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back</a></span>
                    <span ng-hide="courseDetails.publishedon==null" ng-if="courseDetails.role=='admin'"><a href="#course" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back</a></span>
                    <span ng-show="courseDetails.publishedon==null" ng-if="courseDetails.role=='admin'"><a href="#course-pending" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back</a></span>                    
                    <div flash-message="2000" class="col-md-4 pull-right"></div>
                    <h4 class="classic-title"><span>Course Details</span></h4>
                    <div ng-if="loaded">
                        <div class="loader-style">
                            <div class="loader"></div>
                        </div>
                    </div>
                    <div class="row margin-top-10 margin-bottom-10">
                        <div class="col-lg-3 col-md-4 col-sm-4">
                            <img class="margin-bottom-15" src="{{courseDetails.promoimage | trusted}}">
                            <div class="col-lg-2 col-md-2 col-sm-2 no-padding margin-top-5"><img class="course-author-img" src="{{courseDetails.imageurl | trusted}}"></div>
                            <div class="col-lg-10 col-md-10 col-sm-10"><h5>{{courseDetails.ownername}}<br><small>{{courseDetails.specialistin}}</small></h5></div>
                            <div class="col-lg-12 col-md-12 col-sm-12 margin-top-10 no-padding">

                                <h5 class="row text-muted font-resize">
                                    <span class="col-lg-6 col-md-6 col-sm-6">Category<span class="pull-right">:</span></span>
                                    <span class="col-lg-6 col-md-6 col-sm-6 no-padding">{{courseDetails.categoryname}}</span>
                                    <span class="col-lg-6 col-md-6 col-sm-6">Price<span class="pull-right">:</span></span>
                                    <span class="col-lg-6 col-md-6 col-sm-6 no-padding">
                                        <span ng-show="courseDetails.price==0" class="text-green text-bold">Free</span>
                                        <span ng-hide="courseDetails.price==0" class="text-red text-bold">{{courseDetails.price}} $</span>
                                    </span>
                                    <span class="col-lg-6 col-md-6 col-sm-6">No. of Sections <span class="pull-right">:</span></span>
                                    <span class="col-lg-6 col-md-6 col-sm-6 no-padding">{{sectionList.length}}</span>
                                    <span class="col-lg-6 col-md-6 col-sm-6">Users Enrolled<span class="pull-right">:</span></span>
                                    <span class="col-lg-6 col-md-6 col-sm-6 no-padding">
                                        <span ng-show="courseDetails.enrollcount==0">----</span>
                                        <span ng-hide="courseDetails.enrollcount==0">{{courseDetails.enrollcount}}</span>
                                    </span>
                                    <span class="col-lg-6 col-md-6 col-sm-6" ng-if="courseDetails.role=='admin'">Created On<span class="pull-right">:</span></span>
                                    <span class="col-lg-6 col-md-6 col-sm-6 no-padding" ng-if="courseDetails.role=='admin'">{{courseDetails.createdon}}</span>
                                    <span class="col-lg-6 col-md-6 col-sm-6" ng-if="courseDetails.role=='admin'">Reviewed On<span class="pull-right">:</span></span>
                                    <span class="col-lg-6 col-md-6 col-sm-6 no-padding" ng-if="courseDetails.role=='admin'">
                                        <span ng-show="!courseDetails.reviewdate" ng-if="courseDetails.role=='admin'">----</span>
                                        <span ng-hide="!courseDetails.reviewdate"  ng-if="courseDetails.role=='admin'">{{courseDetails.reviewdate}}</span>
                                    </span>
                                    <span class="col-lg-6 col-md-6 col-sm-6" >Published On<span class="pull-right">:</span></span>
                                    <span class="col-lg-6 col-md-6 col-sm-6 no-padding" >
                                        <span ng-show="!courseDetails.publishedon" >----</span>
                                        <span ng-hide="!courseDetails.publishedon">{{courseDetails.publishedon}}</span>
                                    </span>
                                     <span class="col-lg-6 col-md-6 col-sm-6" >Average Rating<span class="pull-right">:</span></span>
                                     <span class="col-lg-6 col-md-6 col-sm-6 no-padding" >
                                        <average-star-rating ng-model="averageRate" max="5"></average-star-rating> ( {{totalRatings}} Reviews )
                                    </span>
                                    
                                </h5>
                                <!--<h5 class="margin-top-10" ng-show="courseDetails.enrollmentStatus==0"><i class="fa fa-users text-gray"></i> - {{courseDetails.enrollcount}} Students</h5>
                                <h5 class="margin-top-10"><i class="fa fa-book text-gray"></i> - {{sectionList.length}} Sections</h5>-->
                            </div>
                            <span ng-show="courseDetails.enrollmentStatus==0" ng-if="courseDetails.role=='user'"><a href="" class="col-lg-12 col-md-12 col-sm-12 suggest_button margin-top-10 btn" ng-disabled="enrollButtonStatus" ng-click="doEnrollCourse(courseDetails.courseid)"><span ng-show="enrollButtonStatus==true"><span class="three-quarters-loader">Loadingâ€¦</span></span>&nbsp;{{entrolling}}</a></span>
                            <span ng-show="courseDetails.publishedon==null" ng-if="courseDetails.role=='admin'" ><a href="" class="col-lg-12 col-md-12 col-sm-12 suggest_button margin-top-10 accept_modal_trigger btn" ng-click="acceptModal(courseDetails.courseid)">Accept this course</a></span>
                            <span ng-show="courseDetails.publishedon==null" ng-if="courseDetails.role=='admin'"><a href="" class="col-lg-12 col-md-12 col-sm-12 suggest_button red_button modal_trigger btn" ng-click="modal(courseDetails.courseid)">Reject this course</a></span>
                        </div>
                        <div class="col-lg-9 col-md-8 col-sm-8">
                            <h2 class="wrap">{{courseDetails.coursename}}</h2>
                            <h4 class="text-muted margin-tb-10 wrap">{{courseDetails.coursesubtitle}}</h4>
                            <p class="margin-tb-10 wrap"  ng-bind-html="courseDetails.coursedescription | html"></p>

                            <h5 class="margin-bottom-10 wrap" ng-repeat="sections in sectionList" ng-hide="courseDetails.enrollmentStatus==0" ng-if="courseDetails.role=='user'">Section {{$index+1}} : <a href="#course-view/{{sections.sectionid}}" class="wrap">{{sections.sectiontitle}}</a></h5>
                            <h5 class="margin-bottom-10 wrap" ng-repeat="sections in sectionList" ng-show="courseDetails.enrollmentStatus==0" ng-if="courseDetails.role=='user'">Section {{$index+1}} : <a href="" ng-click="checkenroll()" class="wrap">{{sections.sectiontitle}}</a></h5>
                            <h5 class="margin-bottom-10 wrap" ng-repeat="sections in sectionList" ng-hide="courseDetails.publishedon==null" ng-if="courseDetails.role=='admin'">Section {{$index+1}} : <a href="#course-view/{{sections.sectionid}}" class="wrap">{{sections.sectiontitle}}</a></h5>
                            <h5 class="margin-bottom-10 wrap" ng-repeat="sections in sectionList" ng-show="courseDetails.publishedon==null" ng-if="courseDetails.role=='admin'">Section {{$index+1}} : <a href="#course-view/{{sections.sectionid}}" class="wrap">{{sections.sectiontitle}}</a></h5>
                        </div>
                        <br/><br/>
                    <div class="col-lg-9 col-md-8 col-sm-8">                
                     <span><a ng-show="courseReviews.canreview==1" id="modal_review" ng-click="reset(reviewForm)" href="#review"  class="btn-sm btn-success pull-right margin-left-5 pull-right"><i class="fa fa-plus-circle"></i> Add Review</a></span>
                    <h4 class="classic-title"><span>Reviews</span></h4>
                    <div ng-show="totalRatings!=0">
                        <div class="col-lg-12 col-md-12 col-sm-12 no-padding">
                            <div ng-if="reviewload">
                                <div class="loader-style">
                                    <div class="loader"></div>
                                </div>
                            </div>
                            <div class="friends-scroll-responsive" ng-nicescroll nice-option="{cursorcolor: '#666',autohidemode:false,cursorborder:'none',cursorwidth: '6px',background:'#eee'}">
                                <div ng-repeat="reviews in courseReviews.reviews" class="margin-right-10">
                                    <div class="col-lg-1 col-md-1 col-sm-1 no-padding">
                                        <img class="img-circle" ng-src="{{reviews.review_imageurl | trusted}}">
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <strong class="wrap">{{reviews.review_username}}</strong><br/>
                                        <span class="small-font text-gray">{{reviews.reviewddatetime}}</span>
                                    </div>
                                    <div class="col-lg-5 col-md-4 col-sm-4">
                                        <strong class="wrap">{{reviews.reviewtitle}}</strong><br/>
                                        <span class="small-font text-gray wrap">{{reviews.reviewdescription}}</span>
                                    </div>

                                    <div class="col-lg-2 col-md-3 col-sm-3 no-padding">
                                        Ratings : {{reviews.ratinglevel}}<br/>
                                        <average-star-rating ng-model="reviews.ratinglevel" max="5"></average-star-rating>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 no-padding margin-tb-5"><hr/></div>
                                </div>
                            </div>
                        </div>
                     </div>
                        <div ng-show="totalRatings==0">
                        <div class="row">
                            <div class="panel no-margin no-box-shadow">
                                <div class="panel-body"><div class="text-center margin-top-40">
                                      <img src="../../images/no-reviews.png" width="176" height="120"/>
                                        <h1 class="text-gray">NO REVIEWS</h1><br/><br/><br/>
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>                 
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- create reject reason popup-->
<div class="popupContainer modalRejectCourse" style="display:none;left:39% !important;">
    <header class="popupHeader">
        <span class="header_title">Reject Course</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <form name="courseRejectForm" novalidate>
                <p>Reason for course rejection:</p>
                <textarea type="text" class="height-150" name="comments"  maxlength="300" ng-model="comments" required></textarea>
                <span ng-show="courseRejectForm.comments.$dirty&&courseRejectForm.comments.$invalid">
                       <span class="error-message textarea-errormessage-110" ng-show="courseRejectForm.comments.$error.required"><span>Required.</span></span>
                    </span>
                <div class="action_btns margin-top-20">
                    <div class="one_half"><a class="btn btn_red modal_close" onclick="return false" ng-disabled="courseRejectForm.$invalid" ng-click="doRejectCourse(courseid)">Reject</a></div>
                    <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">Cancel</a></div>
                </div>
            </form>
        </div>
    </section>
</div>


<!-- create accept popup-->
<div class="popupContainer modalAcceptCourse" style="display:none;left: 39%!important;">
    <header class="popupHeader">
        <span class="header_title">Confirmation</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>
    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png" width="118" height="100"/></div><br/>
            <h5 class="text-center">Are you sure want to publish this course?</h5>
            <div class="action_btns margin-top-20">
                <div class="one_half"><a href="" class="btn btn_red modal_close" ng-click="doAcceptCourse(courseid)">Yes</a></div>
                <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">No</a></div>
            </div>
        </div>
    </section>
</div>


<!-- create enroll popup-->
<div id="enrollmodal" class="popupContainer" style="display:none;left: 37%!important;">
    <header class="popupHeader">
        <span class="header_title">Alert</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>
    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png"/></div><br/>
            <h5 class="text-center">Please Enroll the Course to View Sections</h5>
            <div class="action_btns margin-top-20">
                <div class="last modal_close"><a onclick="return false;" class="btn btn_red">OK</a></div>
            </div>
        </div>
    </section>
</div>


<div id="review" class="popupContainer" style="display:none;">
    <header class="popupHeader">
        <span class="header_title">Add Reviews</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <form name="reviewForm">
                <p>Rate the coach</p>
                <div><star-rating ng-model="coursereview" ></star-rating></div>
                <p>Review Summary</p>
                <input type="text" name="reviewtitle" ng-model="coursereview.reviewtitle"  maxlength="100"  required/>
                <span ng-show="reviewForm.reviewtitle.$dirty&&reviewForm.reviewtitle.$invalid">
                                <span class="error-message" ng-show="reviewForm.reviewtitle.$error.required"><span>Required.</span></span>
                         </span>
                <p>Review:</p>
                <textarea type="text" class="height-150" name="reviewdescription" ng-model="coursereview.reviewdescription"maxlength="300"  required></textarea>
             <span ng-show="reviewForm.reviewdescription.$dirty&&reviewForm.reviewdescription.$invalid">
                    <span class="error-message textarea-errormessage-110" ng-show="reviewForm.reviewdescription.$error.required"><span>Required.</span></span>
                 </span>
                <div class="action_btn margin-top-20 text-center">
                    <div><a href="" class="btn btn_red" ng-class="{modal_close:reviewForm.$invalid}" ng-disabled="reviewForm.$invalid"  ng-click="doInsertRatingAndReviews()">Add Review </a></div>
                </div>
            </form>
        </div>
    </section>
</div>

<!-- Email Id Verification Alert-->
<div id="email-verification" class="popupContainer" style="display:none;">
    <header class="popupHeader">
        <span class="header_title">Email Verification</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>
    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <div class="text-center"><img src="../../images/alert-ring.png"/></div><br/>
            <h5 class="text-center">Your Email ID has not been validated.You should be receiving a validation link in your email.Don't have the link?</h5>
          <a href="" ng-click="emailVerificationRequest()" class="forgot_password text-center reset_link">Click Here Resend Link</a>
            <div class="action_btns margin-top-20">
                <div class="modal_close"><a href="" class="btn btn_red" >OK</a></div>
            </div>
        </div>
    </section>
</div>
<!-- End Page Banner -->

<script type="text/javascript" src="../../js/script.js"></script>

<script>
    $(".accept_modal_trigger").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(".modal_trigger").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
      $("#modal_review").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(function(){
        $(".common_model").show();
    })
</script>
<!-- Start Page Banner -->
<div class="page-banner" ng-cloak class="ng-cloak">
    <div class="container">
        <div class="row min-height-450" ng-init="init()">
            <div class="col-md-12 col-md-12 col-sm-12">
                <a id="modal_user_meal_plan" href="#usermealPlan" class="back-button pull-right margin-left-5" ng-click="userAssignMealPlan()"><i class="fa fa-plus-circle"></i> Add Meal Plan</a>
                <div flash-message="2000" class="col-lg-3 col-md-3 col-sm-3 pull-right no-padding"></div>
                <h5 class="classic-title"><span><a href="#meal-plans"><i class="fa fa-th-large"></i>&nbsp;&nbsp; My Meal Plans</a></span>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#assigned-plans-view"><i class="fa fa-check-square-o"></i>&nbsp;&nbsp;Assigned Meal Plans</a></h5>
            </div>

            <div class="col-md-12 col-md-12 col-sm-12">
                <div ng-if="loaded">
                    <div class="loader-style">
                        <div class="loader"></div>
                    </div>
                </div>
                <table class="table table-bordered table-striped">
                    <thead>
                    <tr class="warning">
                        <th class="col-md-3">Plan Name</th>
                        <th class="col-md-4">Plan Description</th>
                        <th class="col-md-2">Plan Duration</th>
                        <th class="col-md-3">Options</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr dir-paginate="plan in userMealPlanList.plans | itemsPerPage:mealPagination.itemsPerPage" ng-show="userMealPlanList.plans.length!=0" current-page="mealPagination.pageNumber" total-items="userMealPlanList.totalrecords">
                        <td class="wrap-all">{{plan.planname}}</td>
                        <td class="wrap-all">{{plan.description}}</td>
                        <td>{{plan.plandays>1?plan.plandays+"&nbsp;Days":plan.plandays+"&nbsp;Day"}}</td>
                        <td>
                            <a href="#meal-plans-view/{{plan.id}}" class="btn-xs btn-primary">Plan</a>
                            <a href="" class="btn-xs btn-warning" ng-click="doEditUserMealPlan(plan.id)">Edit</a>
                            <a href="" class="btn-xs btn-danger" ng-click="doDeleteUserMealPlan(plan.id)">Delete</a>
                            <a href="" class="btn-xs btn-success" ng-click="doAssignedMealPlanToHimself(plan.id,plan.userid)">Assign Plan</a>
                        </td>
                    </tr>
                    <tr ng-show="userMealPlanList.plans.length==0"><td colspan="4" class="text-center">No Records Found !!!</td></tr>
                    </tbody>
                </table>
                <!-- Start Pagination -->
                <dir-pagination-controls ng-show="paginationLoad" boundary-links="true"> </dir-pagination-controls>
                <!-- End Pagination -->
            </div>
        </div>
    </div>
</div>

<!-- End Page Banner -->
<!-- User Add  meal plan Popup-->
<div id="usermealPlan" class="popupContainer width-40" style="display:none;left:30%;">
    <header class="popupHeader width-100">
        <span class="header_title">{{title}}</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- measure Form -->
        <div class="common_model">
            <form name="userMealPlanForm" novalidate>
                <div class="row">
                    <div class="col-md-6 no-padding">
                        <div class="col-md-12">
                            <p>Plan Name</p>
                            <input type="text" name="mealPlan" data-userMealPlan.id="userMealPlan.id"  validate-all-characters ng-model="userMealPlan.planname" maxlength="200" required focus-me="shouldBeOpen">
                            <span ng-show="userMealPlanForm.mealPlan.$dirty&&userMealPlanForm.mealPlan.$invalid">
                                 <span class="error-message" ng-show="userMealPlanForm.mealPlan.$error.required"><span>Required.</span></span>
                                 <span class="error-message" ng-show="userMealPlanForm.mealPlan.$error.validateAllCharacters"><span>Please&nbsp;Enter&nbsp;Valid&nbsp;Name.</span></span>
                             </span>
                        </div>
                    </div>
                    <div class="col-md-6 no-padding">
                        <div class="col-md-12">
                            <p>Plan Days</p>
                            <select name="plandays" class="full-width main" ng-class="{'disabled-class':changeDays}" ng-model="userMealPlan.plandays" ng-init="userMealPlan.plandays='0'" required focus-me="shouldBeOpen" style="height: 42px !important" ng-disabled="changeDays">
                                <option value="">-- Select Plan Days --</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                            </select>

                            <span ng-show="userMealPlanForm.plandays.$dirty&&userMealPlanForm.plandays.$invalid">
                             <span class="error-message" ng-show="userMealPlanForm.plandays.$error.required"><span>Required.</span></span>
                        </span>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <p style="margin-bottom: -13px">Description</p>
                        <span ng-show="userMealPlanForm.description.$dirty&&userMealPlanForm.description.$invalid">
                         <span class="error-message textarea-errormessage40" ng-show="userMealPlanForm.description.$error.required"><span>Required.</span></span>
                    </span>
                        <textarea class="forum-textarea" name="description" ng-model="userMealPlan.description" maxlength="250"  required></textarea>
                    </div>
                </div>
                <div class="action_btns margin-top-20">
                    <div class="one_half" ng-show="isNew"><a ng-class="{modal_close:userMealPlanForm.$invalid}" class="btn btn_red" ng-disabled="userMealPlanForm.$invalid" ng-click="doAddMealPlanByUser()">Add Meal</a></div>
                    <div class="one_half" ng-hide="isNew"><a ng-class="{modal_close:userMealPlanForm.$invalid}" class="btn btn_red" ng-disabled="userMealPlanForm.$invalid || isClean()" ng-click="doAddMealPlanByUser()">Save Changes </a></div>
                    <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">Cancel</a></div>
                </div>

            </form>
        </div>
    </section>
</div>

<script type="text/javascript">
    $("#modal_user_meal_plan").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(document).ready(function () {
        $('#top-bar-menu').click(function(e) {
            $('.nav li').removeClass('drop');
            $(this).siblings().addClass('active');
        });
        $('.navbar').click(function(e) {
            $('.nav li').removeClass('drop');
            $(this).siblings().addClass('active');
        });

    });
</script>



<div class="page-banner1" ng-cloak class="ng-cloak">
    <div id="w" class="clearfix">
        <div id="demography-content" ng-init="userCoachViewInit()">
            <form name="userCoachForm">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <!--<a href="#dashboard" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back to Dashboard</a>-->
                      <a href="#coach" class="btn-sm btn-warning pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i>&nbsp;Back to My Coaches</a>
                    <div flash-message="2000" class="col-md-4 no-padding pull-right"></div>
                    <h5 class="classic-title"><span><a href="#coach"><i class="fa fa-male"></i>&nbsp;&nbsp;MY COACH</a></span>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-search"><i class="fa fa-search"></i>&nbsp;&nbsp;COACH SEARCH</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-invitations"><i class="fa fa-envelope"></i>&nbsp;&nbsp;COACH INVITATION</a></h5>
                </div>                
                <div class="col-lg-12 col-md-12 col-sm-12">
              
                <div class="col-lg-2 col-md-2 col-sm-12 no-padding">
                    <img class="coach_image" ng-src="{{usercoachdetails.imageurl | trusted}}"/>
                    <h3 class="text-orange margin-bottom-5 wrap">{{usercoachdetails.name}}&nbsp;&nbsp;</h3>
                    <div class="wrap" style="font-size: 13px;"><i class="fa fa-inbox"></i>&nbsp;&nbsp;{{usercoachdetails.emailid}}&nbsp;&nbsp;&nbsp;</div>
                    <div class="margin-bottom-10 wrap"><i class="fa fa-phone"></i>&nbsp;&nbsp;{{usercoachdetails.phone}}&nbsp;&nbsp;&nbsp;&nbsp;</div>
                    <h5 class="margin-tb-10">Average Ratings : {{avgRatings}}</h5>
                    <div><average-star-rating ng-model="averageRate" max="5"></average-star-rating></div>
                    <div>( {{totalRatings}} Reviews )</div><hr/>
                    <div><strong>About Me :</strong></div>
                    <div class="wrap-all">{{usercoachdetails.about}}</div>
                </div>    

                <div class="col-lg-10 col-md-10 col-sm-12">  
                  <h5 class="classic-title" style="margin-left:20px;margin-bottom:20px;"><a class="active-tab profile-details" href=""><i class="fa fa-user"></i>&nbsp;&nbsp;Profile</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="event-details" href=""><i class="fa fa-calendar"></i>&nbsp;&nbsp;Events&nbsp;<small class="badge">{{coachEvent.length}}</small></a>|&nbsp;&nbsp;<a class="mealplan-details" href=""><i class="fa fa-th-large"></i>&nbsp;&nbsp;Meal Plan</a>|&nbsp;&nbsp;<a class="workoutplan-details" href=""><i class="fa fa-list"></i>&nbsp;&nbsp;Workout Plan</a></h5> 
                  <div class="profile-details-div">
                    <div class="col-lg-6 col-md-6 col-sm-112">
                  <div class="talk-bubble tri-right left-in talktext wrap" ng-show="!noAdvices">
                      <p style="font-weight: normal"><span style="font-size:28px;color:  #e60000">❝</span>&nbsp;{{coachAdvice.description}}&nbsp;&nbsp;&nbsp;<span style="font-size:28px;color:  #e60000">❞</span></p>
                  </div>

                  <table class="table table-bordered table-striped" style="padding: 0px;table-layout:fixed;">
                                <tr>
                                    <td class="col-md-4">Business Name</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.businessname}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Business Address</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.businessaddress}}</td>
                                </tr> 
                                <tr>
                                    <td class="col-md-4">Specialist</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.specialist}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Qualification</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.qualification}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Experience</td>
                                    <td class="col-md-8 wrap-all"><span ng-show="years==undefined"> NA </span><span ng-show="years>0"> {{years}} <span ng-show="years==1">Year&nbsp;</span><span ng-show="years>1">Years&nbsp;</span></span><span ng-show="months>0"> {{months}} <span ng-show="months==1">Month</span><span ng-show="months>1"> Months</span></span></td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Date of Birth</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.dob}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">City</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.city}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">State</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.state}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Country</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.country}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Zip</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.zipcode}}</td>
                                </tr>
                            </table>  

                        
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12"> 
                            
                          <span ng-hide="disablereview"><a id="modal_review" ng-click="reset(reviewForm)" href="#review"  class="btn-sm btn-success pull-right margin-left-5"><i class="fa fa-plus-circle"></i> Add Reviews</a></span>
                        <h4 class="classic-title"><span>Reviews</span></h4>
                        <div ng-show="totalRatings!=0">
                                <div ng-if="reviewload">
                                    <div class="loader-style">
                                        <div class="loader"></div>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 friends-scroll-responsive no-padding" style="min-height:500px;" ng-nicescroll nice-option="{cursorcolor: '#666',autohidemode:false,cursorborder:'none',cursorwidth: '6px',background:'#eee'}">
                                    <div ng-repeat="reviews in coachReviews" class="margin-right-10">
                                        <div class="col-lg-1 col-md-1 col-sm-1 no-padding">
                                            <img class="img-circle" ng-src="{{reviews.review_imageurl | trusted}}">
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <strong>{{reviews.review_username}}</strong><br/>
                                            <span class="small-font text-gray">{{reviews.reviewddatetime}}</span>
                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-8 wrap-all">
                                            <average-star-rating ng-model="reviews.ratinglevel" max="5"></average-star-rating>
                                            <strong>{{reviews.reviewtitle}}</strong><br/>
                                            <span class="small-font text-gray">{{reviews.reviewdescription}}</span>
                                        </div>
                                        
                                        <div class="col-lg-12 col-md-12 col-sm-12 no-padding margin-tb-5"><hr/></div>
                                    </div>
                                </div>
                         </div>
                        <div ng-show="totalRatings==0">
                            <div class="row">
                                <div class="panel no-margin no-box-shadow">
                                    <div class="panel-body"><div class="text-center margin-top-40">
                                          <img src="../../images/no-reviews.png" width="176" height="120"/>
                                            <h1 class="text-gray">NO REVIEWS</h1><br/><br/><br/>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </div>                             
                            <!--Tablet responsibility-->

                       <!--  <div class="col-lg-12 col-md-12 col-sm-12 text-center">
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==null"><i class="fa fa-user-o" aria-hidden="true">&nbsp;&nbsp;Unknown User</i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==1"><i class="fa fa-check-circle" aria-hidden="true">&nbsp;&nbsp;Interest Sent by User to Coach </i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==2"><i class="fa fa-envelope" aria-hidden="true">&nbsp;&nbsp;Coach Sent Invitation to User </i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==3"><i class="fa fa-group" aria-hidden="true">&nbsp;&nbsp;Connected</i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==4"><i class="fa fa-group" aria-hidden="true">&nbsp;&nbsp;Connected</i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==5"><i class="fa fa-sign-out" aria-hidden="true">&nbsp;&nbsp;Disconnected </i></h3>
                        </div> -->
                        <!--Tablet responsibility-->

                    </div>

                </div>
                    <div class="event-details-div col-lg-12 col-md-12 col-sm-12 margin-bottom-10">

                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr class="warning">
                                    <th class="col-md-2">Event Name</th>
                                    <th class="col-md-4">Event Description</th>
                                    <th class="col-md-2">Event Date</th>
                                    <th class="col-md-2">Event Duration</th>
                                    <th class="col-md-2">Options</th>
                                </tr>
                            </thead>

                            <tbody >
                                <tr dir-paginate="event in eventfilter = (coachEvent | itemsPerPage: 9)" ng-show="coachEvent.length!=0">
                                    <td><span>{{event.eventname}}</span></td>
                                    <td><span>{{event.description}}</span></td>
                                    <td><span>{{event.datetime}}</span></td>
                                    <td>{{event.duration}}</td>
                                    <td>
                                        <a href="" ng-show="event.isuserattend==0" class="btn-xs btn-primary" ng-click="userSetAttendence(event.id)">Join Event</a>
                                        <a href="" ng-show="event.isuserattend==1" class="btn-xs btn-success" ng-disabled="event.isuserattend==1">Joined</a>
                                    </td>
                                </tr>
                                <tr ng-show="coachEvent.length==0 || !eventfilter.length "><td colspan="5" class="text-center">No Records Found !!!</td></tr>
                            </tbody>
                        </table>  
                        <!-- Start Pagination -->
                        <dir-pagination-controls class="text-center" ng-show="paginationLoad" boundary-links="true"> </dir-pagination-controls>
                        <!-- End Pagination -->    
                    </div>

                    <div class="mealplan-details-div col-lg-12 col-md-12 col-sm-12 margin-bottom-10">
                         <a href="" ng-show="mealplan.planDetailView" class="btn-sm btn-warning pull-right margin-left-5 margin-bottom-10"  ng-click="mealplan.planDetailView=false"><i class="fa fa-arrow-circle-o-left"></i>&nbsp;Back to Plans</a>
                         <div class="col-md-8 pull-right margin-top-3" ng-show="mealplan.planDetailView">
                            <div class="col-md-3 no-padding pull-right">
                            <span class="green plan-point"></span><div class="margin-left-20">-&nbsp;Mandatory&nbsp;Food</div>
                            </div>
                            <div class="col-md-3 no-padding pull-right">
                            <span class="orange plan-point"></span><div class="margin-left-20">-&nbsp;Optional&nbsp;Food</div>
                            </div>
                         </div>
                        <table class="table table-bordered table-striped" ng-hide="mealplan.planDetailView">
                            <thead>
                                <tr class="warning">
                                    <th class="col-md-2">Plan Name</th>
                                    <th class="col-md-3">Description</th>
                                    <th class="col-md-1">Duration</th>
                                    <th class="col-md-1">Start Date</th>
                                    <th class="col-md-1">End Date</th>
                                    <th class="col-md-1">Status</th>
                                    <th class="col-md-1">Options</th>   
                                </tr> 
                            </thead>
                            <tbody>
                                <tr dir-paginate="plan in myMealPlanList.plans | itemsPerPage:pagination.itemsPerPage" ng-show="myMealPlanList.plans.length!=0" total-items="myMealPlanList.totalrecords" current-page="pagination.pageNumber">
                                    <td class="wrap-all">{{plan.planname}}</td>
                                    <td class="wrap-all">{{plan.description}}</td>
                                    <td>{{plan.plandays>1?plan.plandays+"&nbsp;Days":plan.plandays+"&nbsp;Day"}}</td>
                                    <td>{{plan.startdate}}</td>
                                    <td>{{plan.enddate}}</td>
                                    <td>{{plan.userplanstatus==1?'Expired':plan.userplanstatus==2?'Discontinued':'Active'}}</td>
                                    <td>
                                        <a href="" ng-click="doLoadMealPlanDetails(plan.mapid)" class="btn-xs btn-primary">View Plan</a>
                                    </td>
                                </tr>    
                                <tr ng-show="myMealPlanList.plans.length==0"><td colspan="7" class="text-center">No Records Found !!!</td></tr>
                            </tbody>    
                        </table>
                        <!-- Start Pagination -->
                <dir-pagination-controls ng-show="paginationLoad" boundary-links="true"> </dir-pagination-controls>
                <!-- End Pagination -->
             <table class="table table-bordered table-striped" ng-show="mealplan.planDetailView">
                    <thead>
                        <tr class="warning">
                            <th colspan="6"><h2 class="text-center"><strong>{{plandetail.planname}}</strong></h2></th>
                        </tr>
                    </thead>
                <tr>
                    <th class="col-md-2 text-center"><strong>Plans</strong></th>
                    <th class="col-md-2 text-center"><strong>Breakfast</strong></th>
                    <th class="col-md-2 text-center"><strong>Brunch</strong></th>
                    <th class="col-md-2 text-center"><strong>Lunch</strong></th>
                    <th class="col-md-2 text-center"><strong>Snacks</strong></th>
                    <th class="col-md-2 text-center"><strong>Dinner</strong></th>
                </tr>
                <tr ng-repeat="mealPlanDetail in mealPlanDetailList">
                    <td class="col-md-2 food-plans text-center align-bottom">
                        {{mealPlanDetail.day}}
                        <div class="text-red"><small>({{mealPlanDetail.date}})</small></div>
                        <div class="caloriediv">
                            <div class="calorieunit">KCals</div>
                            <div class="foodcalorie">{{mealPlanDetail.consumedCalories}}
                        <small style="color:#666;">consumed out of</small>
                        {{mealPlanDetail.totalCalories}}</div>
                        <div>
                    </td>
                    <td class="food-plans">                           
                        <!--Breakfast-->
                        <div ng-repeat="foodItem in mealPlanDetail.foods[0].foodItems">
                            <a href="" ng-click="doViewFoodItemFromMealPlan(foodItem.id,mealPlanDetail.date)">
                                <div class="food">
                                    <span ng-show="foodItem.isoptional==1" class="orange">&nbsp;</span>
                                    <span ng-show="foodItem.isoptional==0" class="green">&nbsp;</span>
                                    {{foodItem.foodname}}&nbsp;<span ng-show="foodItem.isDone==1"><i class="fa fa-check-circle text-green pull-right"></i></span>&nbsp;&nbsp;&nbsp;
                                    <div class="foodvalues">
                                        {{foodItem.measurecount}}&nbsp;{{foodItem.foodmeasurename}}&nbsp;&nbsp;|&nbsp;&nbsp;{{foodItem.calorieintake}}&nbsp;KCals
                                    </div>
                                </div>
                            </a>
                        </div>
                    </td>
                    <td class="food-plans">                           
                         <!--Brunch-->
                         <div ng-repeat="foodItem in mealPlanDetail.foods[1].foodItems">
                             <a href="" ng-click="doViewFoodItemFromMealPlan(foodItem.id,mealPlanDetail.date)">
                                 <div class="food">
                                    <span ng-show="foodItem.isoptional==1" class="orange">&nbsp;</span>
                                    <span ng-show="foodItem.isoptional==0" class="green">&nbsp;</span>
                                    {{foodItem.foodname}}&nbsp;<span ng-show="foodItem.isDone==1"><i class="fa fa-check-circle text-green"></i></span>&nbsp;&nbsp;&nbsp;
                                    <div class="foodvalues">
                                        {{foodItem.measurecount}}&nbsp;{{foodItem.foodmeasurename}}&nbsp;&nbsp;|&nbsp;&nbsp;{{foodItem.calorieintake}}&nbsp;KCals
                                    </div>
                                </div>
                            </a>
                        </div>
                    <td class="food-plans">                           
                        <!--Lunch-->
                        <div ng-repeat="foodItem in mealPlanDetail.foods[2].foodItems">
                            <a href="" ng-click="doViewFoodItemFromMealPlan(foodItem.id,mealPlanDetail.date)">
                                <div class="food"> 
                                    <span ng-show="foodItem.isoptional==1" class="orange">&nbsp;</span>
                                    <span ng-show="foodItem.isoptional==0" class="green">&nbsp;</span>
                                    {{foodItem.foodname}}&nbsp;<span ng-show="foodItem.isDone==1"><i class="fa fa-check-circle text-green"></i></span>&nbsp;&nbsp;&nbsp;
                                    <div class="foodvalues">
                                        {{foodItem.measurecount}}&nbsp;{{foodItem.foodmeasurename}}&nbsp;&nbsp;|&nbsp;&nbsp;{{foodItem.calorieintake}}&nbsp;KCals
                                    </div>
                                </div>
                            </a>
                        </div>
                    </td>
                    <td class="food-plans">                            
                        <!--Snacks-->
                        <div ng-repeat="foodItem in mealPlanDetail.foods[3].foodItems"> 
                            <a href="" ng-click="doViewFoodItemFromMealPlan(foodItem.id,mealPlanDetail.date)">
                                <div class="food"> 
                                    <span ng-show="foodItem.isoptional==1" class="orange">&nbsp;</span>
                                    <span ng-show="foodItem.isoptional==0" class="green">&nbsp;</span>
                                    {{foodItem.foodname}}&nbsp;<span ng-show="foodItem.isDone==1"><i class="fa fa-check-circle text-green"></i></span>&nbsp;&nbsp;&nbsp;
                                    <div class="foodvalues">
                                        {{foodItem.measurecount}}&nbsp;{{foodItem.foodmeasurename}}&nbsp;&nbsp;|&nbsp;&nbsp;{{foodItem.calorieintake}}&nbsp;KCals
                                    </div>
                                </div>
                            </a>
                        </div>
                    </td>
                    <td class="food-plans">                            
                         <!--Dinner-->
                         <div ng-repeat="foodItem in mealPlanDetail.foods[4].foodItems">
                             <a href="" ng-click="doViewFoodItemFromMealPlan(foodItem.id,mealPlanDetail.date)">
                                 <div class="food">
                                    <span ng-show="foodItem.isoptional==1" class="orange">&nbsp;</span>
                                    <span ng-show="foodItem.isoptional==0" class="green">&nbsp;</span>
                                    {{foodItem.foodname}}&nbsp;<span ng-show="foodItem.isDone==1"><i class="fa fa-check-circle text-green"></i></span>&nbsp;&nbsp;&nbsp;
                                    <div class="foodvalues">
                                        {{foodItem.measurecount}}&nbsp;{{foodItem.foodmeasurename}}&nbsp;&nbsp;|&nbsp;&nbsp;{{foodItem.calorieintake}}&nbsp;KCals
                                    </div>
                                </div>
                            </a>
                        </div>
                    </td>
                </tr>
             </table>
                 </div>
                    

            <div class="workoutplan-details-div col-lg-12 col-md-12 col-sm-12 margin-bottom-10">
                <a href="" ng-show="workoutplan.workPlanDetailView" class="btn-sm btn-warning pull-right margin-left-5 margin-bottom-10"  ng-click="workoutplan.workPlanDetailView=false"><i class="fa fa-arrow-circle-o-left"></i>&nbsp;Back to Plans</a>
                <div class="col-md-8 pull-right margin-top-3" ng-show="workoutplan.workPlanDetailView">
                            <div class="col-md-3 no-padding pull-right">
                            <span class="green plan-point"></span><div class="margin-left-20">-&nbsp;Mandatory&nbsp;Exercise</div>
                            </div>
                            <div class="col-md-3 no-padding pull-right">
                            <span class="orange plan-point"></span><div class="margin-left-20">-&nbsp;Optional&nbsp;Exercise</div>
                            </div>
                         </div>
                 <table class="table table-bordered table-striped" ng-hide="workoutplan.workPlanDetailView">
                    <thead>
                        <tr class="warning">
                            <th class="col-md-2">Plan Name</th>
                            <th class="col-md-3">Description</th>
                            <th class="col-md-1">Duration</th>
                            <th class="col-md-1">Start Date</th>
                            <th class="col-md-1">End Date</th>
                            <th class="col-md-1">Status</th>
                            <th class="col-md-1">Options</th>   
                        </tr>   
                    </thead>
                    <tbody>
                        <tr dir-paginate="plan in myworkoutPlanList.plans | itemsPerPage:pagination.itemsPerPage" ng-show="myworkoutPlanList.plans.length!=0" total-items="myworkoutPlanList.totalrecords" current-page="pagination.pageNumber">
                            <td class="wrap-all">{{plan.planname}}</td>
                            <td class="wrap-all">{{plan.description}}</td>
                            <td>{{plan.plandays>1?plan.plandays+"&nbsp;Days":plan.plandays+"&nbsp;Day"}}</td>
                            <td>{{plan.startdate}}</td>
                            <td>{{plan.enddate}}</td>
                            <td>{{plan.userplanstatus==1?'Expired':plan.userplanstatus==2?'Discontinued':'Active'}}</td>
                            <td>
                                <a href="" ng-click="doLoadWorkoutPlanDetails(plan.mapid)" class="btn-xs btn-primary">View Plan</a>
                            </td>
                        </tr>{{myworkoutPlanList.plans.plantype}}   
                        <tr ng-show="myworkoutPlanList.plans.length==0"><td colspan="7" class="text-center">No Records Found !!!</td></tr>
                    </tbody>    
                </table>
       <!-- Start Pagination -->
        <dir-pagination-controls ng-show="paginationLoad" boundary-links="true"> </dir-pagination-controls>
        <!-- End Pagination -->
                <table class="table table-bordered table-striped" ng-show="workoutplan.workPlanDetailView">
                    <thead>
                        <tr class="warning">
                            <th colspan="6"><h2 class="text-center"><strong>{{plandetail.planname}}</strong></h2></th>
                        </tr>
                    </thead>
                <tr>
                    <th class="col-md-3 text-center" style="margin-top:15px"><strong>Plans</strong></th>
                    <th class="col-md-9 text-center"><strong>Exercise Name</strong></th>
                </tr>
                <tr ng-repeat="workoutPlanDetail in workoutPlanDetailList">
                    <td class="col-md-1 food-plans text-center align-bottom">
                        {{workoutPlanDetail.day}}
                        <div class="text-green"><small>({{workoutPlanDetail.date}})</small></div>
                        <div class="caloriediv">
                            <div class="calorieunit">KCals</div>
                            <div class="workoutcalorie">{{workoutPlanDetail.burntCalories}}
                        <small style="color:#666;">burnt out of</small>
                        {{workoutPlanDetail.totalCalories}}</div>
                        <div>
                    </td>
                    <td class="exercise-plans">
                        <div class="col-md-4" ng-repeat="workoutItem in workoutPlanDetail.workouts">
                            <a href="" ng-click="doViewExerciseItemFromWorkoutPlan(workoutItem.id, workoutPlanDetail.date)">
                                <div class="exercise">
                                    <span ng-show="workoutItem.isoptional==1" class="orange">&nbsp;</span>
                                    <span ng-show="workoutItem.isoptional==0" class="green">&nbsp;</span>
                                    <span class="name_values no-padding">{{workoutItem.exercisename}}</span>&nbsp;<span ng-show="workoutItem.isDone==1"><i class="fa fa-check-circle text-green pull-right"></i></span>&nbsp;&nbsp;&nbsp;
                                    <div class="time">
                                        {{workoutItem.minutes}}&nbsp;Minutes&nbsp;&nbsp;({{workoutItem.calorieburn}}&nbsp;KCals)
                                    </div>
                                    <div class="name_values no-padding">
                                        {{workoutItem.categoryname}}&nbsp;&nbsp;|&nbsp;&nbsp;{{workoutItem.typename}}
                                    </div>
                                </div>
                            </a>   
                        </div>
                    </div>
                    </td>
                </tr>
                </table>
                </div>
                </div>
                </form>

                <div class="chat-window col-xs-5 col-md-3" id="chat_window_1">
                    <div class="col-xs-12 col-md-12">
                        <div class="panel panel-default" style="margin-bottom:0px;">
                            <div class="panel-heading chat-top-bar">
                                <div class="col-md-8 col-xs-8">
                                    <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span> Chat - {{usercoachdetails.firstname}}</h3>
                                    <span class="nav-item__badge" style="position: absolute; margin-left: 20px; margin-top: -9px;" ng-show="showMessageCount">
                                    <span aria-hidden="true" class="nav-item__badge-count ng-binding">{{unreadChatMessageCount}}</span>
                                    </span>
                                </div>
                                <div class="col-md-4 col-xs-4" style="text-align: right;">
                                     <a href="" ng-click="doDeleteChatMessage()" ng-show="deletingChatCount>0"><i class="fa fa-trash"></i></a>
                                    <a href=""><span id="minim_chat_window" class="glyphicon glyphicon-plus icon_minim panel-collapsed" onclick="chatMinMax()" ng-click="doReadChatMessage();"></span></a>
                                </div>
                            </div>
                            <div id="chat_container" class="panel-body msg_container_base" style="display:none;">
                                <div  ng-repeat="chatMessage in chatMessages" ng-click="doSelectChat(chatMessage);">
                                <div class="row" ng-show="chatMessage.firstNewMessage==1"><span class="label label-default">New Messages</span></div>
                                <div class="row msg_container">
                                    <div class="col-md-10 col-xs-10" ng-if="chatMessage.sentby==3">
                                        <div class="messages msg_sent">
                                            <p>{{chatMessage.message}}</p><i ng-show="chatMessage.status==1" class="fa fa-check message-read" aria-hidden="true"></i>
                                            <time datetime="2009-11-13T20:00">{{chatMessage.datetime}}</time>
                                        </div>
                                    </div>
                                    <div class="col-md-2 col-xs-2 avatar no-padding" ng-if="chatMessage.sentby==3">
                                        <img ng-src="{{userImageUrl}}" class=" img-responsive ">
                                    </div>

                                    <div class="col-md-2 col-xs-2 avatar no-padding" ng-if="chatMessage.sentby==2">
                                        <img ng-src="{{usercoachdetails.imageurl}}" class=" img-responsive ">
                                    </div>
                                    <div class="col-md-10 col-xs-10"  ng-if="chatMessage.sentby==2">
                                        <div class="messages msg_receive">
                                            <p>{{chatMessage.message}}</p>
                                            <time datetime="2009-11-13T20:00">{{chatMessage.datetime}}</time>
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <div class="input-group">
                                    <input id="btn-input" type="text" ng-model="chat.message" class="form-control input-sm chat_input" placeholder="Write your message here..." />
                                    <span class="input-group-btn">
                                    <button class="btn btn-sm btn-warning" id="btn-chat" ng-click="doSendChatMessage();">Send</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
        </div><!-- @end #content -->
    </div><!-- @end #w -->
</div>

<div id="review" class="popupContainer" style="display:none;">
    <header class="popupHeader">
        <span class="header_title">Add Reviews</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <form name="reviewForm">
                <p>Rate the coach</p>
                <div><star-rating ng-model="coachreview" ></star-rating></div>
                <p>Review Summary</p>
                <input type="text" name="reviewtitle" ng-model="coachreview.reviewtitle"  maxlength="100"  required/>
                <span ng-show="reviewForm.reviewtitle.$dirty&&reviewForm.reviewtitle.$invalid">
                                <span class="error-message" ng-show="reviewForm.reviewtitle.$error.required"><span>Required.</span></span>
                         </span>
                <p>Review:</p>
                <textarea type="text" class="height-150" name="reviewdescription" ng-model="coachreview.reviewdescription"maxlength="300"  required></textarea>
             <span ng-show="reviewForm.reviewdescription.$dirty&&reviewForm.reviewdescription.$invalid">
                    <span class="error-message textarea-errormessage-110" ng-show="reviewForm.reviewdescription.$error.required"><span>Required.</span></span>
                 </span>
                <div class="action_btn margin-top-20 text-center">
                    <div><a href="" class="btn btn_red" ng-class="{modal_close:reviewForm.$invalid}" ng-disabled="reviewForm.$invalid"  ng-click="doAddReview()">Add Review </a></div>
                </div>
            </form>
        </div>
    </section>
</div>

<!--View Food Item form Meal Plan Popup -->
<div id="view-meal-item" class="popupContainer-width-big" style="display:none;">
    <div class="center-block">
    <header class="popupHeader width-100">
        <span class="header_title">Meal Item</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <table class="table table-bordered table-striped">
                <tr>
                    <td class="col-md-6">Day</td>
                    <td class="col-md-6 wrap">Day&nbsp;{{foodPlanItemDetails.day}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Food Name</td>
                    <td class="col-md-6 wrap">{{foodPlanItemDetails.foodname}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Food Session</td>
                    <td class="col-md-6 wrap">{{foodPlanItemDetails.foodsessioname}}</td>
                </tr>
                <tr class="wrap">
                    <td class="col-md-6">Food Measure</td>
                    <td class="col-md-6 wrap">{{foodPlanItemDetails.measurecount}}&nbsp;{{foodPlanItemDetails.foodmeasurename}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Calories Intake</td>
                    <td class="col-md-6">{{foodPlanItemDetails.calorieintake}}&nbsp;KCals</td>
                </tr>
                <tr>
                    <td class="col-md-6">Is Optional&nbsp;?</td>
                    <td class="col-md-6">{{foodPlanItemDetails.isoptional==1?"Yes":"No"}}</td>
                </tr>
            </table>
            <div class="col-lg-12 col-md-12 col-sm-12 text-center food-consumed-btn">
                <a href="" class="btn register_button text-center" ng-click="doSetUnsetFoodItemConsumed(foodPlanItemDetails.id,foodPlanItemDetails.date)" ng-show="foodPlanItemDetails.isDone==0">I Ate</a>
                <a href="" class="btn register_button request_sent text-center" ng-click="doSetUnsetFoodItemConsumed(foodPlanItemDetails.id,foodPlanItemDetails.date)" ng-hide="foodPlanItemDetails.isDone==0">I Didn't Ate</a>
            </div>
        </div>
    </section>
    </div>
</div>

<!-- View Exercise Item from Workout Plan Popup -->
<div id="view-workout-item" class="popupContainer-width-big" style="display:none;">
    <div class="center-block">
    <header class="popupHeader width-100">
        <span class="header_title">Workout Item</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <table class="table table-bordered table-striped">
                <tr>
                    <td class="col-md-6">Day</td>
                    <td class="col-md-6 wrap">Day&nbsp;{{workoutPlanItemDetails.day}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Exercise Name</td>
                    <td class="col-md-6 wrap">{{workoutPlanItemDetails.exercisename}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Category Name</td>
                    <td class="col-md-6 wrap">{{workoutPlanItemDetails.categoryname}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Type Name</td>
                    <td class="col-md-6 wrap">{{workoutPlanItemDetails.typename}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Time</td>
                    <td class="col-md-6 wrap">{{workoutPlanItemDetails.minutes}}&nbsp;Minutes</td>
                </tr>
                <tr>
                    <td class="col-md-6">Calories Intake</td>
                    <td class="col-md-6">{{workoutPlanItemDetails.calorieburn}}&nbsp;KCals</td>
                </tr>
                <tr>
                    <td class="col-md-6">Intensity</td>
                    <td class="col-md-6">{{workoutPlanItemDetails.intensity}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Level</td>
                    <td class="col-md-6">{{workoutPlanItemDetails.level}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Good For</td>
                    <td class="col-md-6">{{workoutPlanItemDetails.goodfor}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Equipments</td>
                    <td class="col-md-6">{{workoutPlanItemDetails.equipments}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Is Optional&nbsp;?</td>
                    <td class="col-md-6">{{workoutPlanItemDetails.isoptional==1?"Yes":"No"}}</td>
                </tr>
            </table>
            <div class="col-lg-12 col-md-12 col-sm-12 text-center exercise-btn">
                <a href="" class="btn register_button text-center" ng-click="doSetUnsetExerciseItem(workoutPlanItemDetails.id,workoutPlanItemDetails.date)" ng-show="workoutPlanItemDetails.isDone==0">Done</a>
                <a href="" class="btn register_button request_sent text-center" ng-click="doSetUnsetExerciseItem(workoutPlanItemDetails.id,workoutPlanItemDetails.date)" ng-hide="workoutPlanItemDetails.isDone==0">Not&nbsp;Done</a>
            </div>
        </div>
    </section>
    </div>
</div>

<script type="text/javascript" src="../../js/script.js"></script>

<script type="text/javascript">
    $("#modal_review").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(function(){
        $(".common_model").show();
    })
</script>
<script type="text/javascript">
      $(document).ready(function() {
            $("#chat_container").niceScroll({cursorcolor: '#666',autohidemode:false,cursorborder:'none',cursorwidth: '6px',background:'#eee'});
             return false;
      });

    $(document).on('click','.msg_container',function(e){
     var $this = $(this);
        if (!$this.hasClass('chat-selected')) {
            $this.addClass('chat-selected');
        }else {
            $this.removeClass('chat-selected');
        }
    });


    function chatMinMax(){
        var $this = $(".panel-heading span.icon_minim");
            if (!$this.hasClass('panel-collapsed')) {
                $this.parents('.panel').find('.panel-body').slideUp();
                $this.addClass('panel-collapsed');
                $this.removeClass('glyphicon-minus').addClass('glyphicon-plus');
            } else {
                 $this.parents('.panel').find('.panel-body').slideDown();
                $this.removeClass('panel-collapsed');
                $this.removeClass('glyphicon-plus').addClass('glyphicon-minus');
            }
    }
    var newScrollDone=false;
    function scrollToNewMessageSpan(){
        if(document.getElementById('new_message_span')==null){
            newScrollDone=true;
        }
       if(!newScrollDone){  
            newScrollDone=true;  
            var topPos = document.getElementById('new_message_span').offsetTop;
            var divTop = document.getElementById('chat_container').offsetTop;
            $('#chat_container').getNiceScroll(0).doScrollPos(0,topPos-divTop-20);
       }else{
            $('#chat_container').getNiceScroll(0).doScrollPos(0,800);
       }
    }         
    $(document).on('click', '#btn-input', function (e) {
 var myDiv=$("#chat_container");
   myDiv.animate({ scrollTop: myDiv.prop("scrollHeight")- myDiv.height() }, 1000);
});
     $(document).on('keypress', '#btn-input', function (e) {

    if (e.which == 13) {
        var scope = $('#btn-input').scope();
        scope.doSendChatMessage();
    return false; 
    }   
   });

    $(document).on('focus', '.panel-footer input.chat_input', function (e) {
        var $this = $(this);
        if ($('#minim_chat_window').hasClass('panel-collapsed')) {
            $this.parents('.panel').find('.panel-body').slideDown();
            $('#minim_chat_window').removeClass('panel-collapsed');
            $('#minim_chat_window').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        }
    });
    $(document).on('click', '#new_chat', function (e) {
        var size = $( ".chat-window:last-child" ).css("margin-left");
         size_total = parseInt(size) + 400;
        alert(size_total);
        var clone = $( "#chat_window_1" ).clone().appendTo( ".container" );
        clone.css("margin-left", size_total);
    });
    $(document).on('click', '.icon_close', function (e) {
        //$(this).parent().parent().parent().parent().remove();
        $( "#chat_window_1" ).remove();
    });
    
   $(window).scroll(function() {
        setChatMargin();
    });
    function setChatMargin(){
        var scrollBottom=$(document).height() - $(window).scrollTop() - $(window).height();
        var chat_margin_bottom=0+"px";
        if(scrollBottom<291){
            chat_margin_bottom=(291-scrollBottom)+"px";
        }
        $("#chat_window_1").animate({
                        'margin-bottom':chat_margin_bottom
                },0);
    }

    document.querySelectorAll('body')[0].style.backgroundColor = 'whiteSmoke';
</script>

<script type="text/javascript">
$(document).ready(function(){
//For event details  div hide
    $(".event-details-div").hide();
    $(".mealplan-details-div").hide();
    $(".workoutplan-details-div").hide();

       $(".profile-details").click(function(){
           $(".profile-details").addClass("active-tab");
           $(".event-details").removeClass("active-tab");
           $(".workoutplan-details").removeClass("active-tab");
           $(".mealplan-details").removeClass("active-tab");
           $(".event-details-div").hide();
           $(".mealplan-details-div").hide();
           $(".workoutplan-details-div").hide();
           $(".profile-details-div").show();
       });
       $(".event-details").click(function(){
           $(".profile-details").removeClass("active-tab");
           $(".event-details").addClass("active-tab");
           $(".workoutplan-details").removeClass("active-tab");
           $(".mealplan-details").removeClass("active-tab");
           $(".profile-details-div").hide();
           $(".mealplan-details-div").hide();
           $(".workoutplan-details-div").hide();
           $(".event-details-div").show();
      });
       $(".mealplan-details").click(function(){
           $(".profile-details").removeClass("active-tab");
           $(".event-details").removeClass("active-tab");
           $(".workoutplan-details").removeClass("active-tab");
           $(".mealplan-details").addClass("active-tab");
           $(".event-details-div").hide();
           $(".mealplan-details-div").show();
           $(".workoutplan-details-div").hide();
           $(".profile-details-div").hide();
       });
       $(".workoutplan-details").click(function(){
           $(".profile-details").removeClass("active-tab");
           $(".event-details").removeClass("active-tab");
           $(".workoutplan-details").addClass("active-tab");
           $(".mealplan-details").removeClass("active-tab");
           $(".event-details-div").hide();
           $(".mealplan-details-div").hide();
           $(".workoutplan-details-div").show();
           $(".profile-details-div").hide();
       });
   });
</script>
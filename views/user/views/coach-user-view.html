
<div class="page-banner1" ng-cloak class="ng-cloak">
    <div id="w" class="clearfix">
        <div id="demography-content" ng-init="userCoachViewInit()">
            <form name="userCoachForm">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <!--<a href="#dashboard" class="back-button pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i> Back to Dashboard</a>-->
                    <a href="#coach" class="btn-sm btn-warning pull-right margin-left-5"><i class="fa fa-arrow-circle-o-left"></i>&nbsp;Back</a>
                    <div flash-message="2000" class="col-md-3 no-padding pull-right"></div>
                    <h5 class="classic-title"><span><a href="#coach"><i class="fa fa-male"></i>&nbsp;&nbsp;MY COACH</a></span>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-search"><i class="fa fa-search"></i>&nbsp;&nbsp;COACH SEARCH</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#coach-invitations"><i class="fa fa-envelope"></i>&nbsp;&nbsp;COACH INVITATION</a></h5>
                </div>
                <div class="col-lg-12 col-md-12 colsm-12">
                <h5 class="classic-title"><a class="active-tab profile-details" href=""><i class="fa fa-male"></i>&nbsp;&nbsp;Profile</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="event-details" href=""><i class="fa fa-list"></i>&nbsp;&nbsp;Events</a></h5>
                <div class="profile-details-div col-lg-12 col-md-12 col-sm-12">
                    
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="col-lg-4 col-md-3 col-sm-2 no-padding">
                            <img class="coach_image" ng-src="{{usercoachdetails.imageurl | trusted}}"/>
                            <h5 class="margin-tb-10">Average Ratings : {{avgRatings}}</h5>
                            <div><average-star-rating ng-model="averageRate" max="5"></average-star-rating></div>
                            <div>( {{totalRatings}} Reviews )</div><hr/>
                            <div><strong>About Me :</strong></div>
                            <div class="wrap-all">{{usercoachdetails.about}}</div>
                        </div>
                        <div class="col-lg-8 col-md-9 col-sm-10">
                            <h3 class="text-orange margin-bottom-5 wrap">{{usercoachdetails.name}}&nbsp;&nbsp;</h3>
                            <div class="wrap"><i class="fa fa-inbox"></i>&nbsp;&nbsp;{{usercoachdetails.emailid}}&nbsp;&nbsp;&nbsp;</div>
                            <div class="margin-bottom-10 wrap"><i class="fa fa-phone"></i>&nbsp;&nbsp;{{usercoachdetails.phone}}&nbsp;&nbsp;&nbsp;&nbsp;</div>
                            <table class="table table-bordered table-striped" style="padding: 0px;table-layout:fixed;">
                                <tr>
                                    <td class="col-md-4">Business Name</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.businessname}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Business Address</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.businessaddress}}</td>
                                </tr> 
                                <tr>
                                    <td class="col-md-4">Specialist</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.specialist}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Qualification</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.qualification}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Experience</td>
                                    <td class="col-md-8 wrap-all"><span ng-show="years==undefined"> NA </span><span ng-show="years>0"> {{years}} <span ng-show="years==1">Year&nbsp;</span><span ng-show="years>1">Years&nbsp;</span></span><span ng-show="months>0"> {{months}} <span ng-show="months==1">Month</span><span ng-show="months>1"> Months</span></span></td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Date of Birth</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.dob}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">City</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.city}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">State</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.state}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Country</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.country}}</td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">Zip</td>
                                    <td class="col-md-8 wrap-all">{{usercoachdetails.zipcode}}</td>
                                </tr>
                            </table>    
                         
                            <!--Tablet responsibility-->
                        </div>

                        <div class="col-lg-12 col-md-12 col-sm-12 text-center">
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==null"><i class="fa fa-user-o" aria-hidden="true">&nbsp;&nbsp;Unknown User</i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==1"><i class="fa fa-check-circle" aria-hidden="true">&nbsp;&nbsp;Interest Sent by User to Coach </i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==2"><i class="fa fa-envelope" aria-hidden="true">&nbsp;&nbsp;Coach Sent Invitation to User </i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==3"><i class="fa fa-group" aria-hidden="true">&nbsp;&nbsp;Connected</i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==4"><i class="fa fa-group" aria-hidden="true">&nbsp;&nbsp;Connected</i></h3>
                            <h3  class="relationship-text" ng-show="usercoachdetails.relationship==5"><i class="fa fa-sign-out" aria-hidden="true">&nbsp;&nbsp;Disconnected </i></h3>
                        </div>
                        <!--Tablet responsibility-->
                       
                        <!--Tablet responsibility-->
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                      <div class="talk-bubble tri-right left-in">
                         <div class="talktext wrap-all">
                             <p>{{coachAdvice.description}}</p>
                         </div>
                      </div>
                        <span ng-hide="disablereview"><a id="modal_review" ng-click="reset(reviewForm)" href="#review"  class="btn-sm btn-success pull-right margin-left-5"><i class="fa fa-plus-circle"></i> Add Reviews</a></span>
                        <h4 class="classic-title"><span>Reviews</span></h4>
                        <div ng-show="totalRatings!=0">
                            <div class="col-lg-12 col-md-12 col-sm-12 no-padding">
                                <div ng-if="reviewload">
                                    <div class="loader-style">
                                        <div class="loader"></div>
                                    </div>
                                </div>
                                <div class="friends-scroll-responsive" ng-nicescroll nice-option="{cursorcolor: '#666',autohidemode:false,cursorborder:'none',cursorwidth: '6px',background:'#eee'}">
                                    <div ng-repeat="reviews in coachReviews" class="margin-right-10">
                                        <div class="col-lg-1 col-md-1 col-sm-1 no-padding">
                                            <img class="img-circle" ng-src="{{reviews.review_imageurl | trusted}}">
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                            <strong class="wrap-all">{{reviews.review_username}}</strong><br/>
                                            <span class="small-font text-gray">{{reviews.reviewddatetime}}</span>
                                        </div>
                                        <div class="col-lg-5 col-md-4 col-sm-4 wrap-all">
                                            <strong>{{reviews.reviewtitle}}</strong><br/>
                                            <span class="small-font text-gray">{{reviews.reviewdescription}}</span>
                                        </div>

                                        <div class="col-lg-2 col-md-3 col-sm-3 no-padding">
                                            Ratings : {{reviews.ratinglevel}}<br/>
                                            <average-star-rating ng-model="reviews.ratinglevel" max="5"></average-star-rating>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 no-padding margin-tb-5"><hr/></div>
                                    </div>
                                </div>
                            </div>
                         </div>
                        </div>
                        <div ng-show="totalRatings==0">
                            <div class="row">
                                <div class="panel no-margin no-box-shadow">
                                    <div class="panel-body"><div class="text-center margin-top-40">
                                          <img src="../../images/no-reviews.png" width="176" height="120"/>
                                            <h1 class="text-gray">NO REVIEWS</h1><br/><br/><br/>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="event-details-div col-lg-12 col-md-12 col-sm-12 margin-bottom-10">

                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr class="warning">
                                    <th class="col-md-2">Event Name</th>
                                    <th class="col-md-4">Event Description</th>
                                    <th class="col-md-2">Event Date</th>
                                    <th class="col-md-2">Event Duration</th>
                                    <th class="col-md-2">Options</th>
                                </tr>
                            </thead>

                            <tbody >
                                <tr dir-paginate="event in eventfilter = (coachEvent | itemsPerPage: 9)" ng-show="coachEvent.length!=0">
                                    <td><span class="line-clamp-md">{{event.eventname}}</span></td>
                                    <td><span class="line-clamp-md">{{event.description}}</span></td>
                                    <td><span class="line-clamp-md">{{event.datetime}}</span></td>
                                    <td>{{event.duration}}</td>
                                    <td>
                                        <a href="" class="btn-xs btn-primary" ng-click="userSetAttendence(event.id)">Join Event</a>
                                        <!-- <a href="" class="btn-xs btn-primary" ng-click="userSetAttendence(event.id)">Joined</a> -->
                                    </td>
                                </tr>
                                <tr ng-show="coachEvent.length==0 || !eventfilter.length "><td colspan="5" class="text-center">No Records Found !!!</td></tr>
                            </tbody>
                        </table>  
                        <!-- Start Pagination -->
                        <dir-pagination-controls class="text-center" ng-show="paginationLoad" boundary-links="true"> </dir-pagination-controls>
                        <!-- End Pagination -->    
                    </div>
                </div>
                </form>

                <div class="chat-window col-xs-5 col-md-3" id="chat_window_1">
                    <div class="col-xs-12 col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading chat-top-bar">
                                <div class="col-md-8 col-xs-8">
                                    <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span> Chat - {{usercoachdetails.firstname}}</h3>
                                    <span class="nav-item__badge" style="position: absolute; margin-left: 20px; margin-top: -9px;" ng-show="showMessageCount">
                                    <span aria-hidden="true" class="nav-item__badge-count ng-binding">{{unreadChatMessageCount}}</span>
                                    </span>
                                </div>
                                <div class="col-md-4 col-xs-4" style="text-align: right;">
                                    <a href=""><span id="minim_chat_window" class="glyphicon glyphicon-plus icon_minim panel-collapsed" ng-click="doReadChatMessage();"></span></a>
                                </div>
                            </div>
                            <div class="panel-body msg_container_base" style="display:none;">
                                <div class="row msg_container" ng-repeat="chatMessage in chatMessages">
                                    <div class="col-md-10 col-xs-10" ng-if="chatMessage.sentby==3">
                                        <div class="messages msg_sent">
                                            <p>{{chatMessage.message}}</p><i ng-show="chatMessage.status==1" class="fa fa-check message-read" aria-hidden="true"></i>
                                            <time datetime="2009-11-13T20:00">{{chatMessage.datetime}}</time>
                                        </div>
                                    </div>
                                    <div class="col-md-2 col-xs-2 avatar no-padding" ng-if="chatMessage.sentby==3">
                                        <img ng-src="{{userImageUrl}}" class=" img-responsive ">
                                    </div>

                                    <div class="col-md-2 col-xs-2 avatar no-padding" ng-if="chatMessage.sentby==2">
                                        <img ng-src="{{usercoachdetails.imageurl}}" class=" img-responsive ">
                                    </div>
                                    <div class="col-md-10 col-xs-10"  ng-if="chatMessage.sentby==2">
                                        <div class="messages msg_receive">
                                            <p>{{chatMessage.message}}</p>
                                            <time datetime="2009-11-13T20:00">{{chatMessage.datetime}}</time>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <div class="input-group">
                                    <input id="btn-input" type="text" ng-model="chat.message" class="form-control input-sm chat_input" placeholder="Write your message here..." />
                                    <span class="input-group-btn">
                                    <button class="btn btn-sm btn-warning" id="btn-chat" ng-click="doSendChatMessage();">Send</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
        </div><!-- @end #content -->
    </div><!-- @end #w -->
</div>

<div id="review" class="popupContainer" style="display:none;">
    <header class="popupHeader">
        <span class="header_title">Add Reviews</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <form name="reviewForm">
                <p>Rate the coach</p>
                <div><star-rating ng-model="coachreview" ></star-rating></div>
                <p>Review Summary</p>
                <input type="text" name="reviewtitle" ng-model="coachreview.reviewtitle"  maxlength="100"  required/>
                <span ng-show="reviewForm.reviewtitle.$dirty&&reviewForm.reviewtitle.$invalid">
                                <span class="error-message" ng-show="reviewForm.reviewtitle.$error.required"><span>Required.</span></span>
                         </span>
                <p>Review:</p>
                <textarea type="text" class="height-150" name="reviewdescription" ng-model="coachreview.reviewdescription"maxlength="300"  required></textarea>
             <span ng-show="reviewForm.reviewdescription.$dirty&&reviewForm.reviewdescription.$invalid">
                    <span class="error-message textarea-errormessage-110" ng-show="reviewForm.reviewdescription.$error.required"><span>Required.</span></span>
                 </span>
                <div class="action_btn margin-top-20 text-center">
                    <div><a href="" class="btn btn_red" ng-class="{modal_close:reviewForm.$invalid}" ng-disabled="reviewForm.$invalid"  ng-click="doAddReview()">Add Review </a></div>
                </div>
            </form>
        </div>
    </section>
</div>


<script type="text/javascript" src="../../js/script.js"></script>

<script type="text/javascript">
    $("#modal_review").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
    $(function(){
        $(".common_model").show();
    })
</script>
<script type="text/javascript">
    $(document).on('click', '.panel-heading span.icon_minim', function (e) {
        var $this = $(this);
        if (!$this.hasClass('panel-collapsed')) {
            $this.parents('.panel').find('.panel-body').slideUp();
            $this.addClass('panel-collapsed');
            $this.removeClass('glyphicon-minus').addClass('glyphicon-plus');
        } else {
             $this.parents('.panel').find('.panel-body').slideDown();
            $this.removeClass('panel-collapsed');
            $this.removeClass('glyphicon-plus').addClass('glyphicon-minus');
        }
    });
    $(document).on('focus', '.panel-footer input.chat_input', function (e) {
        var $this = $(this);
        if ($('#minim_chat_window').hasClass('panel-collapsed')) {
            $this.parents('.panel').find('.panel-body').slideDown();
            $('#minim_chat_window').removeClass('panel-collapsed');
            $('#minim_chat_window').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        }
    });
    $(document).on('click', '#new_chat', function (e) {
        var size = $( ".chat-window:last-child" ).css("margin-left");
         size_total = parseInt(size) + 400;
        alert(size_total);
        var clone = $( "#chat_window_1" ).clone().appendTo( ".container" );
        clone.css("margin-left", size_total);
    });
    $(document).on('click', '.icon_close', function (e) {
        //$(this).parent().parent().parent().parent().remove();
        $( "#chat_window_1" ).remove();
    });
    
    $(window).scroll(function(){
      if($(window).scrollTop() + $(window).height() > ($(document).height()-185)) {
      $("#chat_window_1").animate({
                 
                'margin-bottom':'275px'
            },10);
       }else{

        $("#chat_window_1").animate({
                    
                    'margin-bottom':'0px'
                },10);
       }
      
    });

    document.querySelectorAll('body')[0].style.backgroundColor = 'whiteSmoke';
</script>

<script type="text/javascript">
$(document).ready(function(){

       $(".profile-details").click(function(){
            $(".profile-details").addClass("active-tab");
           $(".event-details").removeClass("active-tab");
           $(".event-details-div").hide();
           $(".profile-details-div").show();
       });
       $(".event-details").click(function(){
            $(".profile-details").removeClass("active-tab");
           $(".event-details").addClass("active-tab");
           $(".profile-details-div").hide();
           $(".event-details-div").show();
       });
   });
</script>
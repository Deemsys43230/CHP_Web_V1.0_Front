<!-- Start Page Banner -->
<div class="page-banner1" ng-cloak class="ng-cloak">
    <div id="w" class="clearfix">
        <div id="demography-content" ng-init="userMedicationInit()">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <a id="modal_medication" href="#medication" class="back-button pull-right margin-left-5" ng-click="reset()"><i class="fa fa-plus-circle"></i> Add Medication</a>
            <!-- Stat Search -->
                <div ng-show="userMedicationList.length!=0">
                    <div class="pull-right" id="hidden-search">
                        <a href="" onclick="return false;" class="show-list-search search_button margin-left-5"><i class="fa fa-search"></i></a>
                        <div class="search-list-form override">
                            <form autocomplete="off" class="searchform" novalidate>
                                <input type="text" ng-model="medicationsearch" placeholder="Search here...">
                            </form>
                        </div>
                    </div>
                </div>
                <!-- End Search -->
                
                <div flash-message="2000" class="col-lg-3 col-md-3 col-sm-3 no-padding pull-right"></div>
                <h5 class="classic-title"><span><a href="#medications"><i class="fa fa-medkit"></i>&nbsp;&nbsp;MY MEDICATIONS</a></span></h5>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 margin-bottom-10">
                <div ng-if="loaded">
                    <div class="loader-style">
                        <div class="loader"></div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr class="warning">
                                <th class="col-lg-2 col-md-2 col-sm-2">Medicine Name</th>
                                <th class="col-lg-2 col-md-2 col-sm-2">Dosage</th>
                                <th class="col-lg-2 col-md-2 col-sm-2">Notes</th>
                                <th class="col-lg-2 col-md-2 col-sm-2">Is Sharable?</th>
                                <th class="col-lg-2 col-md-2 col-sm-2">Options</th>
                            </tr>    
                        </thead>
                        <tbody>
                            <tr dir-paginate="mymedication in mymedicationfilter = (userMedicationList | filter : medicationsearch | itemsPerPage: 8)" ng-show="userMedicationList.length!=0">
                                <td title="{{mymedication.medicinename}}" class="wrap-all">{{mymedication.medicinename}}</td>
                                <td title="{{mymedication.dosage}}">{{mymedication.dosage}}</td>
                                <td title="{{mymedication.notes}}" class="wrap-all">{{mymedication.notes}}</td>
                                <td>{{mymedication.issharable==1?'Yes':'No'}}</td>
                                <td>
                                 <a href="" class="btn-xs btn-primary" ng-click="viewUserMedication(mymedication.id)">View Details</a>
                                 <a href="" class="btn-xs btn-warning" ng-click="doEditUserMedication(mymedication.id)">Edit</a>
                                 <span><a href="" class="btn-xs btn-danger" ng-click="deleteUserMedication(mymedication.id)">Remove</a></span>
                                </td>
                            </tr>   
                            <tr ng-show="!mymedicationfilter.length"><td colspan="6" class="text-center">No Records Found !!!</td></tr> 
                        </tbody> 
                    </table>    
                </div>    
                <!-- Start Pagination -->
                <dir-pagination-controls ng-show="paginationLoad" boundary-links="true"> </dir-pagination-controls>
                <!-- End Pagination -->
            </div>

        </div>
    </div>
</div>
<!-- End Page Banner -->
<!-- coach group Popup-->
<div id="medication" class="popupContainer width-40" style="display:none;left:30%!important;">
    <header class="popupHeader width-100">
        <span class="header_title">{{title}}</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- measure Form -->
        <div class="common_model">
            <form name="medicationForm" novalidate>
                <div class="row">
                <div class="col-md-6 no-padding">
                    <div class="col-md-12">
                        <p>Medicine Name</p>
                        <input type="text" name="medication" data-medicationid="medication.id"  validate-all-characters ng-model="medication.medicinename" maxlength="200" required focus-me="shouldBeOpen">
                             <span ng-show="medicationForm.medication.$dirty&&medicationForm.medication.$invalid">
                                 <span class="error-message" ng-show="medicationForm.medication.$error.required"><span>Required.</span></span>
                                 <span class="error-message" ng-show="medicationForm.medication.$error.validateAllCharacters"><span>Please&nbsp;Enter&nbsp;Valid&nbsp;Name.</span></span>
                             </span>
                    </div>             
                </div>         
                <div class="col-md-6 no-padding">
                    <div class="col-md-12">
                        <p>Dosage</p>
                        <input type="text" name="dosage" ng-model="medication.dosage" max-length="200" required focus-me="shouldBeOpen">
                            <span ng-show="medicationForm.dosage.$dirty&&medicationForm.dosage.$invalid">
                                 <span class="error-message" ng-show="medicationForm.dosage.$error.required"><span>Required.</span></span>
                            </span>
                    </div>            
                </div>
                <div class="col-md-12">
                    <p style="margin-bottom: -13px">Notes</p>
                    <span ng-show="medicationForm.notes.$dirty&&medicationForm.notes.$invalid">
                         <span class="error-message textarea-errormessage40" ng-show="medicationForm.notes.$error.required"><span>Required.</span></span>
                    </span>
                    <textarea class="forum-textarea" name="notes" ng-model="medication.notes" maxlength="250" required></textarea>
                </div>      
                <div class="col-lg-8 col-md-8 col-sm-8">  
                    <div class="col-md-2 no-padding"><p class="padding-top-4" style="margin-top:0;">Is&nbsp;Sharable?</p></div> 
                    <div class="col-lg-3 col-md-3 col-sm-3 col-md-offset-1 text-center no-padding">
                        <input id="yes" type="radio" ng-model="medication.issharable" value="1">
                          <label for="yes">Yes</label>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 no-padding margin-left-5 text-center">
                        <input id="no" type="radio" ng-model="medication.issharable" value="0">
                          <label for="no">No</label>
                    </div> 
                    </div>
               </div> 
                 <div class="action_btns margin-top-20">
                    <div class="one_half" ng-show="isNew"><a ng-class="{modal_close:medicationForm.$invalid}" class="btn btn_red" ng-disabled="medicationForm.$invalid" ng-click="doAddUserMedication()">Add Medication</a></div>
                    <div class="one_half" ng-hide="isNew"><a ng-class="{modal_close:medicationForm.$invalid}" class="btn btn_red" ng-disabled="medicationForm.$invalid || isClean()" ng-click="doUpdateUserMedication()">Save Changes </a></div>
                    <div class="one_half last modal_close"><a onclick="return false;" class="btn back_btn">Cancel</a></div>
                </div>

            </form>
        </div>
    </section>
</div>

<!-- View Medication Popup -->
<div id="viewMedication" class="popupContainer-width-big" style="display:none;">
    <div class="center-block">
    <header class="popupHeader width-100">
        <span class="header_title">Medication</span>
        <span class="modal_close"><i class="fa fa-times"></i></span>
    </header>

    <section class="popupBody">
        <!-- Register Form -->
        <div class="common_model">
            <table class="table table-bordered table-striped">
              <tr>
                  <td class="col-md-6">Medicine Name</td>
                  <td class="col-md-6 wrap">{{userMedicationDetails.medicinename}}</td>
              </tr>
                <tr>
                    <td class="col-md-6">Dosage</td>
                    <td class="col-md-6 wrap">{{userMedicationDetails.dosage}}</td>
                </tr>
                <tr class="wrap">
                    <td class="col-md-6">Notes</td>
                    <td class="col-md-6 wrap">{{userMedicationDetails.notes}}</td>
                </tr>
                <tr>
                    <td class="col-md-6">Is Sharable?</td>
                    <td class="col-md-6">{{userMedicationDetails.issharable==1?'Yes':'No'}}</td>
                </tr>
            </table>
        </div>
    </section>
    </div>
</div>

<script type="text/javascript">
    $("#modal_medication").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
</script>


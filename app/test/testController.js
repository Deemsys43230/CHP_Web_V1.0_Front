var userApp=angular.module("userApp",["ngRoute","oc.lazyLoad","ngCookies","requestModule","flash"]);userApp.controller("CourseController",["$scope","requestHandler","Flash","$routeParams","$location",function(e,t,s,o,n){e.mycourselist=function(){t.getRequest("user/getMyCourseList/","").then(function(t){e.myCourseList=t.data.published_Course,console.log(e.myCourseList)},function(){errorMessage(s,"Please try again later!")})},e.courseDetails=function(){t.postRequest("courseDetail/",{courseid:o.id}).then(function(t){e.courseDetails=t.data.coursedetail,e.courseDetails.role="user"},function(){errorMessage(s,"Please try again later!")})},e.courseSectionList=function(){t.postRequest("getSectionList/",{courseid:o.id}).then(function(t){e.sectionList=t.data.course,console.log(e.sectionList)},function(){errorMessage(s,"Please try again later!")})},e.courseSectionDetails=function(){t.postRequest("user/sectionDetail/",{sectionid:o.id}).then(function(s){e.sectionDetail=s.data.sectiondetail,console.log(e.sectionDetail),t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(t){e.sectionList=t.data.course,$.each(e.sectionList,function(t,s){s.sectionid==o.id&&(e.currentIndex=t,e.sectionno=t+1),1===e.sectionList.length&&(e.nextdisable=!0)})})},function(){errorMessage(s,"Please try again later!")})},e.courseSectionDetailsbyId=function(o){t.postRequest("user/sectionDetail/",{sectionid:o}).then(function(t){e.sectionDetail=t.data.sectiondetail,$.each(e.sectionList,function(t,s){s.sectionid==o&&(e.currentIndex=t,e.sectionno=t+1)})},function(){errorMessage(s,"Please try again later!")})},e.courselist=function(){t.postRequest("getPublishedCourse/",{offset:0}).then(function(t){e.courseList=t.data.published_Course},function(){errorMessage(s,"Please try again later!")})},e.doEnrollCourse=function(e){t.postRequest("user/enrollCourse/",{courseid:e}).then(function(){n.path("courseDetail/"+e),successMessage(s,"Successfully Enrolled")},function(){errorMessage(s,"Please try again later!")})},e.checkenroll=function(){alert("Please enroll the course to view details!!!")},e.nextdisable=!1,e.prevdisable=!0,e.getNextIndex=function(){t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(s){e.sectionList=s.data.course,console.log("length",e.sectionList.length),console.log("curr",e.currentIndex);var o=e.currentIndex+1;console.log("Index value",o),e.sectionno=o+1,o===e.sectionList.length-1&&(console.log("Entered If"),e.nextdisable=!0,console.log(e.nextdisable)),e.sectionList=s.data.course[o],t.postRequest("user/sectionDetail/",{sectionid:e.sectionList.sectionid}).then(function(s){e.sectionDetail=s.data.sectiondetail,console.log(e.sectionDetail),t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(t){e.sectionList=t.data.course})}),e.currentIndex=o,console.log("Newcurr",e.currentIndex),e.prevdisable=!1})},e.getPreviousIndex=function(){t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(s){e.sectionList=s.data.course,console.log("length",e.sectionList.length),console.log("curr",e.currentIndex);var o=e.currentIndex-1;e.sectionno=o+1,console.log("Index value",o),0===o&&(console.log("Entered If"),e.prevdisable=!0),e.sectionList=s.data.course[o],t.postRequest("user/sectionDetail/",{sectionid:e.sectionList.sectionid}).then(function(s){e.sectionDetail=s.data.sectiondetail,console.log(e.sectionDetail),t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(t){e.sectionList=t.data.course})}),e.currentIndex=o,console.log("Newcurr",e.currentIndex),e.nextdisable=!1})},e.courseinit=function(){e.courselist()},e.mycourselist(),e.viewinit=function(){e.courseDetails(),e.courseSectionList()}}]),userApp.filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]);var adminApp=angular.module("adminApp",["ngRoute","oc.lazyLoad","ngCookies","requestModule","flash","angularUtils.directives.dirPagination"]);adminApp.controller("CourseAdminController",["$scope","requestHandler","Flash","$routeParams","$location",function(e,t,s,o,n){e.courselist=function(){t.postRequest("getPublishedCourse/",{offset:0}).then(function(t){e.courseList=t.data.published_Course,e.paginationLoad=!0},function(){errorMessage(s,"Please try again later!")})},e.courseDetails=function(){t.postRequest("courseDetail/",{courseid:o.id}).then(function(t){e.courseDetails=t.data.coursedetail,e.courseDetails.role="admin"},function(){errorMessage(s,"Please try again later!")})},e.courseSectionList=function(){t.postRequest("getSectionList/",{courseid:o.id}).then(function(t){e.sectionList=t.data.course,console.log(e.sectionList)},function(){errorMessage(s,"Please try again later!")})},e.courseSectionDetails=function(){t.postRequest("admin/getSectionDetail/",{sectionid:o.id}).then(function(s){e.sectionDetail=s.data["Section Detail"],console.log(e.sectionDetail),e.sectionno=1,t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(t){e.sectionList=t.data.course,$.each(e.sectionList,function(t,s){s.sectionid==o.id&&(e.currentIndex=t,e.sectionno=t+1),1===e.sectionList.length&&(e.nextdisable=!0)})})},function(){errorMessage(s,"Please try again later!")})},e.courseSectionDetailsbyId=function(o){t.postRequest("admin/getSectionDetail/",{sectionid:o}).then(function(t){e.sectionDetail=t.data["Section Detail"],$.each(e.sectionList,function(t,s){s.sectionid==o&&(e.currentIndex=t,e.sectionno=t+1)})},function(){errorMessage(s,"Please try again later!")})};var i=0;e.nextdisable=!1,e.prevdisable=!0,e.getNextIndex=function(){t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(s){e.sectionList=s.data.course,console.log("length",e.sectionList.length),console.log("curr",i);var o=i+1;console.log("Index value",o),e.sectionno=o+1,o===e.sectionList.length-1&&(console.log("Entered If"),e.nextdisable=!0,console.log(e.nextdisable)),e.sectionList=s.data.course[o],t.postRequest("admin/getSectionDetail/",{sectionid:e.sectionList.sectionid}).then(function(s){e.sectionDetail=s.data["Section Detail"],console.log(e.sectionDetail),t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(t){e.sectionList=t.data.course})}),i=o,console.log("Newcurr",i),e.prevdisable=!1})},e.getPreviousIndex=function(){t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(s){e.sectionList=s.data.course,console.log("length",e.sectionList.length),console.log("curr",i);var o=i-1;console.log("Index value",o),e.sectionno=o+1,0===o&&(console.log("Entered If"),e.prevdisable=!0),e.sectionList=s.data.course[o],t.postRequest("admin/getSectionDetail/",{sectionid:e.sectionList.sectionid}).then(function(s){e.sectionDetail=s.data["Section Detail"],console.log(e.sectionDetail),t.postRequest("getSectionList/",{courseid:e.sectionDetail.courseid}).then(function(t){e.sectionList=t.data.course})}),i=o,console.log("Newcurr",i),e.nextdisable=!1})},e.pendingcourselist=function(){t.getRequest("admin/listOfPendingCourses/","").then(function(t){e.pendingCourseList=t.data.pendingcourses,e.page="pending",e.paginationLoad=!0},function(){errorMessage(s,"Please try again later!")})},e.doAcceptCourse=function(o){t.postRequest("admin/publishCourse/",{courseid:o}).then(function(){"pending"==e.page?(e.pendingcourselist(),successMessage(s,"Successfully Published")):(n.path("courseDetail/"+o),successMessage(s,"Successfully Published"))},function(){errorMessage(s,"Please try again later!")})},e.doRejectCourse=function(o){t.postRequest("admin/rejectCourse/",{courseid:o}).then(function(){"pending"==e.page?(e.pendingcourselist(),successMessage(s,"Successfully Rejected")):(n.path("courseDetail/"+o),successMessage(s,"Successfully Rejected"))},function(){errorMessage(s,"Please try again later!")})},e.viewinit=function(){e.courseDetails(),e.courseSectionList()},e.courselist(),$(".show-list-search").click(function(){$(".search-list-form").fadeIn(300),$(".search-list-form input").focus()}),$(".search-list-form input").focusout(function(){$(".search-list-form").fadeOut(300),e.coursesearch=""})}]),adminApp.filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),adminApp.filter("startsWithLetter",function(){return alert("hi"),function(e,t){for(var s=[],o=new RegExp(t,"i"),n=0;n<e.length;n++){var i=e[n];o.test(i.coursename)&&s.push(i)}return s}});
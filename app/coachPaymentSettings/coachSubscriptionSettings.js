var coachApp=angular.module("coachApp",["ngRoute","oc.lazyLoad","requestModule","flash","ngAnimate"]);coachApp.controller("CoachSubscriptionController",function(t,e,n){t.activeClass={subscriptionPanel:"active"};var o="";t.doGetCoachSubscriptionDetails=function(){e.getRequest("coachSubscriptionDetail/","").then(function(e){t.subscriptionDetail=e.data["Coach Subscription Detail"][0],0==t.subscriptionDetail.onemonth_amount&&(t.subscriptionDetail.onemonth_amount=""),t.subscriptionDetail.onemonth_amount=t.subscriptionDetail.onemonth_amount.toString(),null!=t.subscriptionDetail.threemonth_percentage&&(t.subscriptionDetail.threemonth_percentage=t.subscriptionDetail.threemonth_percentage.toString(),t.disablethreemonth=!0),null!=t.subscriptionDetail.sixmonth_percentage&&(t.subscriptionDetail.sixmonth_percentage=t.subscriptionDetail.sixmonth_percentage.toString(),t.disablesixmonth=!0),t.doCalculatesubscription(),o=angular.copy(t.subscriptionDetail)},function(){errorMessage(n,"Please Try again later")})},t.doUpdateSubscriptionDetails=function(){e.putRequest("updateSubscriptionDetailByCoach/",t.subscriptionDetail).then(function(){successMessage(n,"Successfully Updated!"),t.doGetCoachSubscriptionDetails()},function(){errorMessage(n,"Please try again later")})},t.doCalculatesubscription=function(){void 0===t.subscriptionDetail.onemonth_amount||void 0===t.subscriptionDetail.threemonth_percentage?(t.totalthreemonthamount=0,t.percentagethreemonthamount=0):(t.totalthreemonthamount=3*t.subscriptionDetail.onemonth_amount,t.totalthreemonthamount=t.totalthreemonthamount.toFixed(2),t.percentagethreemonthamount=3*t.subscriptionDetail.onemonth_amount-3*t.subscriptionDetail.onemonth_amount*t.subscriptionDetail.threemonth_percentage/100,t.percentagethreemonthamount=t.percentagethreemonthamount.toFixed(2)),void 0===t.subscriptionDetail.onemonth_amount||void 0===t.subscriptionDetail.sixmonth_percentage?(t.totalsixmonthamount=0,t.percentagesixmonthamount=0):(t.totalsixmonthamount=6*t.subscriptionDetail.onemonth_amount,t.totalsixmonthamount=t.totalsixmonthamount.toFixed(2),t.percentagesixmonthamount=6*t.subscriptionDetail.onemonth_amount-6*t.subscriptionDetail.onemonth_amount*t.subscriptionDetail.sixmonth_percentage/100,t.percentagesixmonthamount=t.percentagesixmonthamount.toFixed(2))},t.doClearValue=function(){0==t.disablethreemonth&&(t.subscriptionDetail.threemonth_percentage=null,t.percentagethreemonthamount=t.totalthreemonthamount),0==t.disablesixmonth&&(t.subscriptionDetail.sixmonth_percentage=null,t.percentagesixmonthamount=t.totalsixmonthamount)},t.isCleanSubscriptionDetails=function(){return angular.equals(o,t.subscriptionDetail)},t.doGetCoachSubscriptionDetails()});